function e(e,t){const n=Object.create(null),r=e.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return t?e=>!!n[e.toLowerCase()]:e=>!!n[e]}const t=e("Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt"),n=e("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function r(e){if(w(e)){const t={};for(let n=0;n<e.length;n++){const i=e[n],o=r(T(i)?s(i):i);if(o)for(const e in o)t[e]=o[e]}return t}if(x(e))return e}const i=/;(?![^(]*\))/g,o=/:(.+)/;function s(e){const t={};return e.split(i).forEach((e=>{if(e){const n=e.split(o);n.length>1&&(t[n[0].trim()]=n[1].trim())}})),t}function a(e){let t="";if(T(e))t=e;else if(w(e))for(let n=0;n<e.length;n++){const r=a(e[n]);r&&(t+=r+" ")}else if(x(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const u=e=>null==e?"":x(e)?JSON.stringify(e,l,2):String(e),l=(e,t)=>C(t)?{[`Map(${t.size})`]:[...t.entries()].reduce(((e,[t,n])=>(e[`${t} =>`]=n,e)),{})}:E(t)?{[`Set(${t.size})`]:[...t.values()]}:!x(t)||w(t)||O(t)?t:String(t),c={},h=[],p=()=>{},f=()=>!1,d=/^on[^a-z]/,_=e=>d.test(e),v=e=>e.startsWith("onUpdate:"),y=Object.assign,g=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},m=Object.prototype.hasOwnProperty,b=(e,t)=>m.call(e,t),w=Array.isArray,C=e=>"[object Map]"===k(e),E=e=>"[object Set]"===k(e),S=e=>"function"==typeof e,T=e=>"string"==typeof e,R=e=>"symbol"==typeof e,x=e=>null!==e&&"object"==typeof e,P=e=>x(e)&&S(e.then)&&S(e.catch),I=Object.prototype.toString,k=e=>I.call(e),O=e=>"[object Object]"===k(e),N=e=>T(e)&&"NaN"!==e&&"-"!==e[0]&&""+parseInt(e,10)===e,A=e(",key,ref,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),D=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},F=/-(\w)/g,L=D((e=>e.replace(F,((e,t)=>t?t.toUpperCase():"")))),M=/\B([A-Z])/g,U=D((e=>e.replace(M,"-$1").toLowerCase())),j=D((e=>e.charAt(0).toUpperCase()+e.slice(1))),q=D((e=>e?`on${j(e)}`:"")),W=(e,t)=>e!==t&&(e==e||t==t),B=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},Q=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},V=e=>{const t=parseFloat(e);return isNaN(t)?e:t},H=new WeakMap,z=[];let K;const G=Symbol(""),$=Symbol("");function Y(e,t=c){(function(e){return e&&!0===e._isEffect})(e)&&(e=e.raw);const n=function(e,t){const n=function(){if(!n.active)return t.scheduler?void 0:e();if(!z.includes(n)){Z(n);try{return te.push(ee),ee=!0,z.push(n),K=n,e()}finally{z.pop(),re(),K=z[z.length-1]}}};return n.id=J++,n.allowRecurse=!!t.allowRecurse,n._isEffect=!0,n.active=!0,n.raw=e,n.deps=[],n.options=t,n}(e,t);return t.lazy||n(),n}function X(e){e.active&&(Z(e),e.options.onStop&&e.options.onStop(),e.active=!1)}let J=0;function Z(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let ee=!0;const te=[];function ne(){te.push(ee),ee=!1}function re(){const e=te.pop();ee=void 0===e||e}function ie(e,t,n){if(!ee||void 0===K)return;let r=H.get(e);r||H.set(e,r=new Map);let i=r.get(n);i||r.set(n,i=new Set),i.has(K)||(i.add(K),K.deps.push(i))}function oe(e,t,n,r,i,o){const s=H.get(e);if(!s)return;const a=new Set,u=e=>{e&&e.forEach((e=>{(e!==K||e.allowRecurse)&&a.add(e)}))};if("clear"===t)s.forEach(u);else if("length"===n&&w(e))s.forEach(((e,t)=>{("length"===t||t>=r)&&u(e)}));else switch(void 0!==n&&u(s.get(n)),t){case"add":w(e)?N(n)&&u(s.get("length")):(u(s.get(G)),C(e)&&u(s.get($)));break;case"delete":w(e)||(u(s.get(G)),C(e)&&u(s.get($)));break;case"set":C(e)&&u(s.get(G))}a.forEach((e=>{e.options.scheduler?e.options.scheduler(e):e()}))}const se=e("__proto__,__v_isRef,__isVue"),ae=new Set(Object.getOwnPropertyNames(Symbol).map((e=>Symbol[e])).filter(R)),ue=fe(),le=fe(!1,!0),ce=fe(!0),he=fe(!0,!0),pe={};function fe(e=!1,t=!1){return function(n,r,i){if("__v_isReactive"===r)return!e;if("__v_isReadonly"===r)return e;if("__v_raw"===r&&i===(e?qe:je).get(n))return n;const o=w(n);if(!e&&o&&b(pe,r))return Reflect.get(pe,r,i);const s=Reflect.get(n,r,i);if(R(r)?ae.has(r):se(r))return s;if(e||ie(n,0,r),t)return s;if(Ye(s)){return!o||!N(r)?s.value:s}return x(s)?e?Qe(s):Be(s):s}}["includes","indexOf","lastIndexOf"].forEach((e=>{const t=Array.prototype[e];pe[e]=function(...e){const n=Ge(this);for(let t=0,i=this.length;t<i;t++)ie(n,0,t+"");const r=t.apply(n,e);return-1===r||!1===r?t.apply(n,e.map(Ge)):r}})),["push","pop","shift","unshift","splice"].forEach((e=>{const t=Array.prototype[e];pe[e]=function(...e){ne();const n=t.apply(this,e);return re(),n}}));function de(e=!1){return function(t,n,r,i){const o=t[n];if(!e&&(r=Ge(r),!w(t)&&Ye(o)&&!Ye(r)))return o.value=r,!0;const s=w(t)&&N(n)?Number(n)<t.length:b(t,n),a=Reflect.set(t,n,r,i);return t===Ge(i)&&(s?W(r,o)&&oe(t,"set",n,r):oe(t,"add",n,r)),a}}const _e={get:ue,set:de(),deleteProperty:function(e,t){const n=b(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&n&&oe(e,"delete",t,void 0),r},has:function(e,t){const n=Reflect.has(e,t);return R(t)&&ae.has(t)||ie(e,0,t),n},ownKeys:function(e){return ie(e,0,w(e)?"length":G),Reflect.ownKeys(e)}},ve={get:ce,set:(e,t)=>!0,deleteProperty:(e,t)=>!0},ye=y({},_e,{get:le,set:de(!0)});y({},ve,{get:he});const ge=e=>x(e)?Be(e):e,me=e=>x(e)?Qe(e):e,be=e=>e,we=e=>Reflect.getPrototypeOf(e);function Ce(e,t,n=!1,r=!1){const i=Ge(e=e.__v_raw),o=Ge(t);t!==o&&!n&&ie(i,0,t),!n&&ie(i,0,o);const{has:s}=we(i),a=n?me:r?be:ge;return s.call(i,t)?a(e.get(t)):s.call(i,o)?a(e.get(o)):void 0}function Ee(e,t=!1){const n=this.__v_raw,r=Ge(n),i=Ge(e);return e!==i&&!t&&ie(r,0,e),!t&&ie(r,0,i),e===i?n.has(e):n.has(e)||n.has(i)}function Se(e,t=!1){return e=e.__v_raw,!t&&ie(Ge(e),0,G),Reflect.get(e,"size",e)}function Te(e){e=Ge(e);const t=Ge(this);return we(t).has.call(t,e)||(t.add(e),oe(t,"add",e,e)),this}function Re(e,t){t=Ge(t);const n=Ge(this),{has:r,get:i}=we(n);let o=r.call(n,e);o||(e=Ge(e),o=r.call(n,e));const s=i.call(n,e);return n.set(e,t),o?W(t,s)&&oe(n,"set",e,t):oe(n,"add",e,t),this}function xe(e){const t=Ge(this),{has:n,get:r}=we(t);let i=n.call(t,e);i||(e=Ge(e),i=n.call(t,e)),r&&r.call(t,e);const o=t.delete(e);return i&&oe(t,"delete",e,void 0),o}function Pe(){const e=Ge(this),t=0!==e.size,n=e.clear();return t&&oe(e,"clear",void 0,void 0),n}function Ie(e,t){return function(n,r){const i=this,o=i.__v_raw,s=Ge(o),a=e?me:t?be:ge;return!e&&ie(s,0,G),o.forEach(((e,t)=>n.call(r,a(e),a(t),i)))}}function ke(e,t,n){return function(...r){const i=this.__v_raw,o=Ge(i),s=C(o),a="entries"===e||e===Symbol.iterator&&s,u="keys"===e&&s,l=i[e](...r),c=t?me:n?be:ge;return!t&&ie(o,0,u?$:G),{next(){const{value:e,done:t}=l.next();return t?{value:e,done:t}:{value:a?[c(e[0]),c(e[1])]:c(e),done:t}},[Symbol.iterator](){return this}}}}function Oe(e){return function(...t){return"delete"!==e&&this}}const Ne={get(e){return Ce(this,e)},get size(){return Se(this)},has:Ee,add:Te,set:Re,delete:xe,clear:Pe,forEach:Ie(!1,!1)},Ae={get(e){return Ce(this,e,!1,!0)},get size(){return Se(this)},has:Ee,add:Te,set:Re,delete:xe,clear:Pe,forEach:Ie(!1,!0)},De={get(e){return Ce(this,e,!0)},get size(){return Se(this,!0)},has(e){return Ee.call(this,e,!0)},add:Oe("add"),set:Oe("set"),delete:Oe("delete"),clear:Oe("clear"),forEach:Ie(!0,!1)};function Fe(e,t){const n=t?Ae:e?De:Ne;return(t,r,i)=>"__v_isReactive"===r?!e:"__v_isReadonly"===r?e:"__v_raw"===r?t:Reflect.get(b(n,r)&&r in t?n:t,r,i)}["keys","values","entries",Symbol.iterator].forEach((e=>{Ne[e]=ke(e,!1,!1),De[e]=ke(e,!0,!1),Ae[e]=ke(e,!1,!0)}));const Le={get:Fe(!1,!1)},Me={get:Fe(!1,!0)},Ue={get:Fe(!0,!1)},je=new WeakMap,qe=new WeakMap;function We(e){return e.__v_skip||!Object.isExtensible(e)?0:function(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}((e=>k(e).slice(8,-1))(e))}function Be(e){return e&&e.__v_isReadonly?e:Ve(e,!1,_e,Le)}function Qe(e){return Ve(e,!0,ve,Ue)}function Ve(e,t,n,r){if(!x(e))return e;if(e.__v_raw&&(!t||!e.__v_isReactive))return e;const i=t?qe:je,o=i.get(e);if(o)return o;const s=We(e);if(0===s)return e;const a=new Proxy(e,2===s?r:n);return i.set(e,a),a}function He(e){return ze(e)?He(e.__v_raw):!(!e||!e.__v_isReactive)}function ze(e){return!(!e||!e.__v_isReadonly)}function Ke(e){return He(e)||ze(e)}function Ge(e){return e&&Ge(e.__v_raw)||e}const $e=e=>x(e)?Be(e):e;function Ye(e){return Boolean(e&&!0===e.__v_isRef)}class Xe{constructor(e,t=!1){this._rawValue=e,this._shallow=t,this.__v_isRef=!0,this._value=t?e:$e(e)}get value(){return ie(Ge(this),0,"value"),this._value}set value(e){W(Ge(e),this._rawValue)&&(this._rawValue=e,this._value=this._shallow?e:$e(e),oe(Ge(this),"set","value",e))}}function Je(e,t=!1){return Ye(e)?e:new Xe(e,t)}function Ze(e){return Ye(e)?e.value:e}const et={get:(e,t,n)=>Ze(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const i=e[t];return Ye(i)&&!Ye(n)?(i.value=n,!0):Reflect.set(e,t,n,r)}};function tt(e){return He(e)?e:new Proxy(e,et)}class nt{constructor(e,t){this._object=e,this._key=t,this.__v_isRef=!0}get value(){return this._object[this._key]}set value(e){this._object[this._key]=e}}class rt{constructor(e,t,n){this._setter=t,this._dirty=!0,this.__v_isRef=!0,this.effect=Y(e,{lazy:!0,scheduler:()=>{this._dirty||(this._dirty=!0,oe(Ge(this),"set","value"))}}),this.__v_isReadonly=n}get value(){return this._dirty&&(this._value=this.effect(),this._dirty=!1),ie(Ge(this),0,"value"),this._value}set value(e){this._setter(e)}}function it(e,t,n,r){let i;try{i=r?e(...r):e()}catch(o){st(o,t,n)}return i}function ot(e,t,n,r){if(S(e)){const i=it(e,t,n,r);return i&&P(i)&&i.catch((e=>{st(e,t,n)})),i}const i=[];for(let o=0;o<e.length;o++)i.push(ot(e[o],t,n,r));return i}function st(e,t,n,r=!0){t&&t.vnode;if(t){let r=t.parent;const i=t.proxy,o=n;for(;r;){const t=r.ec;if(t)for(let n=0;n<t.length;n++)if(!1===t[n](e,i,o))return;r=r.parent}const s=t.appContext.config.errorHandler;if(s)return void it(s,null,10,[e,i,o])}!function(e,t,n,r=!0){console.error(e)}(e,0,0,r)}let at=!1,ut=!1;const lt=[];let ct=0;const ht=[];let pt=null,ft=0;const dt=[];let _t=null,vt=0;const yt=Promise.resolve();let gt=null,mt=null;function bt(e){const t=gt||yt;return e?t.then(this?e.bind(this):e):t}function wt(e){if(!(lt.length&&lt.includes(e,at&&e.allowRecurse?ct+1:ct)||e===mt)){const t=function(e){let t=ct+1,n=lt.length;const r=Rt(e);for(;t<n;){const e=t+n>>>1;Rt(lt[e])<r?t=e+1:n=e}return t}(e);t>-1?lt.splice(t,0,e):lt.push(e),Ct()}}function Ct(){at||ut||(ut=!0,gt=yt.then(xt))}function Et(e,t,n,r){w(e)?n.push(...e):t&&t.includes(e,e.allowRecurse?r+1:r)||n.push(e),Ct()}function St(e,t=null){if(ht.length){for(mt=t,pt=[...new Set(ht)],ht.length=0,ft=0;ft<pt.length;ft++)pt[ft]();pt=null,ft=0,mt=null,St(e,t)}}function Tt(e){if(dt.length){const e=[...new Set(dt)];if(dt.length=0,_t)return void _t.push(...e);for(_t=e,_t.sort(((e,t)=>Rt(e)-Rt(t))),vt=0;vt<_t.length;vt++)_t[vt]();_t=null,vt=0}}const Rt=e=>null==e.id?1/0:e.id;function xt(e){ut=!1,at=!0,St(e),lt.sort(((e,t)=>Rt(e)-Rt(t)));try{for(ct=0;ct<lt.length;ct++){const e=lt[ct];e&&it(e,null,14)}}finally{ct=0,lt.length=0,Tt(),at=!1,gt=null,(lt.length||dt.length)&&xt(e)}}function Pt(e,t,...n){const r=e.vnode.props||c;let i=n;const o=t.startsWith("update:"),s=o&&t.slice(7);if(s&&s in r){const e=`${"modelValue"===s?"model":s}Modifiers`,{number:t,trim:o}=r[e]||c;o?i=n.map((e=>e.trim())):t&&(i=n.map(V))}let a=q(L(t)),u=r[a];!u&&o&&(a=q(U(t)),u=r[a]),u&&ot(u,e,6,i);const l=r[a+"Once"];if(l){if(e.emitted){if(e.emitted[a])return}else(e.emitted={})[a]=!0;ot(l,e,6,i)}}function It(e,t,n=!1){if(!t.deopt&&void 0!==e.__emits)return e.__emits;const r=e.emits;let i={},o=!1;if(!S(e)){const r=e=>{o=!0,y(i,It(e,t,!0))};!n&&t.mixins.length&&t.mixins.forEach(r),e.extends&&r(e.extends),e.mixins&&e.mixins.forEach(r)}return r||o?(w(r)?r.forEach((e=>i[e]=null)):y(i,r),e.__emits=i):e.__emits=null}function kt(e,t){return!(!e||!_(t))&&(t=t.slice(2).replace(/Once$/,""),b(e,t[0].toLowerCase()+t.slice(1))||b(e,U(t))||b(e,t))}let Ot=null;function Nt(e){Ot=e}function At(e){const{type:t,vnode:n,proxy:r,withProxy:i,props:o,propsOptions:[s],slots:a,attrs:u,emit:l,render:c,renderCache:h,data:p,setupState:f,ctx:d}=e;let _;Ot=e;try{let e;if(4&n.shapeFlag){const t=i||r;_=ir(c.call(t,t,h,o,f,p,d)),e=u}else{const n=t;0,_=ir(n.length>1?n(o,{attrs:u,slots:a,emit:l}):n(o,null)),e=t.props?u:Ft(u)}let y=_;if(!1!==t.inheritAttrs&&e){const t=Object.keys(e),{shapeFlag:n}=y;t.length&&(1&n||6&n)&&(s&&t.some(v)&&(e=Lt(e,s)),y=tr(y,e))}n.dirs&&(y.dirs=y.dirs?y.dirs.concat(n.dirs):n.dirs),n.transition&&(y.transition=n.transition),_=y}catch(y){st(y,e,1),_=er(Bn)}return Ot=null,_}function Dt(e){let t;for(let n=0;n<e.length;n++){const r=e[n];if(!$n(r))return;if(r.type!==Bn||"v-if"===r.children){if(t)return;t=r}}return t}const Ft=e=>{let t;for(const n in e)("class"===n||"style"===n||_(n))&&((t||(t={}))[n]=e[n]);return t},Lt=(e,t)=>{const n={};for(const r in e)v(r)&&r.slice(9)in t||(n[r]=e[r]);return n};function Mt(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let i=0;i<r.length;i++){const o=r[i];if(t[o]!==e[o]&&!kt(n,o))return!0}return!1}function Ut(e){if(S(e)&&(e=e()),w(e)){e=Dt(e)}return ir(e)}let jt=0;const qt=e=>jt+=e;function Wt(e,t=Ot){if(!t)return e;const n=(...n)=>{jt||zn(!0);const r=Ot;Nt(t);const i=e(...n);return Nt(r),jt||Kn(),i};return n._c=!0,n}let Bt=null;const Qt=[];function Vt(e){Qt.push(Bt=e)}function Ht(){Qt.pop(),Bt=Qt[Qt.length-1]||null}function zt(e){return t=>Wt((function(){Vt(e);const n=t.apply(this,arguments);return Ht(),n}))}function Kt(e,t,n,r=!1){const i={},o={};Q(o,Xn,1),Gt(e,t,i,o),n?e.props=r?i:Ve(i,!1,ye,Me):e.type.props?e.props=i:e.props=o,e.attrs=o}function Gt(e,t,n,r){const[i,o]=e.propsOptions;if(t)for(const s in t){const o=t[s];if(A(s))continue;let a;i&&b(i,a=L(s))?n[a]=o:kt(e.emitsOptions,s)||(r[s]=o)}if(o){const t=Ge(n);for(let r=0;r<o.length;r++){const s=o[r];n[s]=$t(i,t,s,t[s],e)}}}function $t(e,t,n,r,i){const o=e[n];if(null!=o){const e=b(o,"default");if(e&&void 0===r){const e=o.default;o.type!==Function&&S(e)?(Tr(i),r=e(t),Tr(null)):r=e}o[0]&&(b(t,n)||e?!o[1]||""!==r&&r!==U(n)||(r=!0):r=!1)}return r}function Yt(e,t,n=!1){if(!t.deopt&&e.__props)return e.__props;const r=e.props,i={},o=[];let s=!1;if(!S(e)){const r=e=>{s=!0;const[n,r]=Yt(e,t,!0);y(i,n),r&&o.push(...r)};!n&&t.mixins.length&&t.mixins.forEach(r),e.extends&&r(e.extends),e.mixins&&e.mixins.forEach(r)}if(!r&&!s)return e.__props=h;if(w(r))for(let a=0;a<r.length;a++){const e=L(r[a]);Xt(e)&&(i[e]=c)}else if(r)for(const a in r){const e=L(a);if(Xt(e)){const t=r[a],n=i[e]=w(t)||S(t)?{type:t}:t;if(n){const t=en(Boolean,n.type),r=en(String,n.type);n[0]=t>-1,n[1]=r<0||t<r,(t>-1||b(n,"default"))&&o.push(e)}}}return e.__props=[i,o]}function Xt(e){return"$"!==e[0]}function Jt(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:""}function Zt(e,t){return Jt(e)===Jt(t)}function en(e,t){if(w(t)){for(let n=0,r=t.length;n<r;n++)if(Zt(t[n],e))return n}else if(S(t))return Zt(t,e)?0:-1;return-1}function tn(e,t,n=Sr,r=!1){if(n){const i=n[e]||(n[e]=[]),o=t.__weh||(t.__weh=(...r)=>{if(n.isUnmounted)return;ne(),Tr(n);const i=ot(t,n,e,r);return Tr(null),re(),i});return r?i.unshift(o):i.push(o),o}}const nn=e=>(t,n=Sr)=>!xr&&tn(e,t,n),rn=nn("bm"),on=nn("m"),sn=nn("bu"),an=nn("u"),un=nn("bum"),ln=nn("um"),cn=nn("rtg"),hn=nn("rtc"),pn={};function fn(e,t,n){return dn(e,t,n)}function dn(e,t,{immediate:n,deep:r,flush:i,onTrack:o,onTrigger:s}=c,a=Sr){let u,l,h=!1;if(Ye(e)?(u=()=>e.value,h=!!e._shallow):He(e)?(u=()=>e,r=!0):u=w(e)?()=>e.map((e=>Ye(e)?e.value:He(e)?vn(e):S(e)?it(e,a,2,[a&&a.proxy]):void 0)):S(e)?t?()=>it(e,a,2,[a&&a.proxy]):()=>{if(!a||!a.isUnmounted)return l&&l(),it(e,a,3,[f])}:p,t&&r){const e=u;u=()=>vn(e())}const f=e=>{l=y.options.onStop=()=>{it(e,a,4)}};let d=w(e)?[]:pn;const _=()=>{if(y.active)if(t){const e=y();(r||h||W(e,d))&&(l&&l(),ot(t,a,3,[e,d===pn?void 0:d,f]),d=e)}else y()};let v;_.allowRecurse=!!t,v="sync"===i?_:"post"===i?()=>On(_,a&&a.suspense):()=>{!a||a.isMounted?function(e){Et(e,pt,ht,ft)}(_):_()};const y=Y(u,{lazy:!0,onTrack:o,onTrigger:s,scheduler:v});return kr(y,a),t?n?_():d=y():"post"===i?On(y,a&&a.suspense):y(),()=>{X(y),a&&g(a.effects,y)}}function _n(e,t,n){const r=this.proxy;return dn(T(e)?()=>r[e]:e.bind(r),t.bind(r),n,this)}function vn(e,t=new Set){if(!x(e)||t.has(e))return e;if(t.add(e),Ye(e))vn(e.value,t);else if(w(e))for(let n=0;n<e.length;n++)vn(e[n],t);else if(E(e)||C(e))e.forEach((e=>{vn(e,t)}));else for(const n in e)vn(e[n],t);return e}const yn=e=>e.type.__isKeepAlive;function gn(e,t,n=Sr){const r=e.__wdc||(e.__wdc=()=>{let t=n;for(;t;){if(t.isDeactivated)return;t=t.parent}e()});if(tn(t,r,n),n){let e=n.parent;for(;e&&e.parent;)yn(e.parent.vnode)&&mn(r,t,n,e),e=e.parent}}function mn(e,t,n,r){const i=tn(t,e,r,!0);ln((()=>{g(r[t],i)}),n)}const bn=e=>"_"===e[0]||"$stable"===e,wn=e=>w(e)?e.map(ir):[ir(e)],Cn=(e,t,n)=>Wt((e=>wn(t(e))),n),En=(e,t)=>{const n=e._ctx;for(const r in e){if(bn(r))continue;const i=e[r];if(S(i))t[r]=Cn(0,i,n);else if(null!=i){const e=wn(i);t[r]=()=>e}}},Sn=(e,t)=>{const n=wn(t);e.slots.default=()=>n};function Tn(e,t,n,r){const i=e.dirs,o=t&&t.dirs;for(let s=0;s<i.length;s++){const a=i[s];o&&(a.oldValue=o[s].value);const u=a.dir[r];u&&ot(u,n,8,[e.el,a,e,t])}}function Rn(){return{app:null,config:{isNativeTag:f,performance:!1,globalProperties:{},optionMergeStrategies:{},isCustomElement:f,errorHandler:void 0,warnHandler:void 0},mixins:[],components:{},directives:{},provides:Object.create(null)}}let xn=0;function Pn(e,t){return function(n,r=null){null==r||x(r)||(r=null);const i=Rn(),o=new Set;let s=!1;const a=i.app={_uid:xn++,_component:n,_props:r,_container:null,_context:i,version:Dr,get config(){return i.config},set config(e){},use:(e,...t)=>(o.has(e)||(e&&S(e.install)?(o.add(e),e.install(a,...t)):S(e)&&(o.add(e),e(a,...t))),a),mixin:e=>(i.mixins.includes(e)||(i.mixins.push(e),(e.props||e.emits)&&(i.deopt=!0)),a),component:(e,t)=>t?(i.components[e]=t,a):i.components[e],directive:(e,t)=>t?(i.directives[e]=t,a):i.directives[e],mount(o,u){if(!s){const l=er(n,r);return l.appContext=i,u&&t?t(l,o):e(l,o),s=!0,a._container=o,o.__vue_app__=a,l.component.proxy}},unmount(){s&&(e(null,a._container),delete a._container.__vue_app__)},provide:(e,t)=>(i.provides[e]=t,a)};return a}}function In(e){return S(e)?{setup:e,name:e.name}:e}const kn={scheduler:wt,allowRecurse:!0},On=function(e,t){t&&t.pendingBranch?w(e)?t.effects.push(...e):t.effects.push(e):Et(e,_t,dt,vt)},Nn=(e,t,n,r)=>{if(w(e))return void e.forEach(((e,i)=>Nn(e,t&&(w(t)?t[i]:t),n,r)));let i;i=!r||r.type.__asyncLoader?null:4&r.shapeFlag?r.component.exposed||r.component.proxy:r.el;const{i:o,r:s}=e,a=t&&t.r,u=o.refs===c?o.refs={}:o.refs,l=o.setupState;if(null!=a&&a!==s&&(T(a)?(u[a]=null,b(l,a)&&(l[a]=null)):Ye(a)&&(a.value=null)),T(s)){const e=()=>{u[s]=i,b(l,s)&&(l[s]=i)};i?(e.id=-1,On(e,n)):e()}else if(Ye(s)){const e=()=>{s.value=i};i?(e.id=-1,On(e,n)):e()}else S(s)&&it(s,o,12,[i,u])};function An(e){return function(e,t){const{insert:n,remove:r,patchProp:i,forcePatchProp:o,createElement:s,createText:a,createComment:u,setText:l,setElementText:f,parentNode:d,nextSibling:_,setScopeId:v=p,cloneNode:g,insertStaticContent:m}=e,w=(e,t,n,r=null,i=null,o=null,s=!1,a=!1)=>{e&&!Yn(e,t)&&(r=se(e),J(e,i,o,!0),e=null),-2===t.patchFlag&&(a=!1,t.dynamicChildren=null);const{type:u,ref:l,shapeFlag:c}=t;switch(u){case Wn:C(e,t,n,r);break;case Bn:E(e,t,n,r);break;case Qn:null==e&&S(t,n,r,s);break;case qn:M(e,t,n,r,i,o,s,a);break;default:1&c?x(e,t,n,r,i,o,s,a):6&c?j(e,t,n,r,i,o,s,a):(64&c||128&c)&&u.process(e,t,n,r,i,o,s,a,ue)}null!=l&&i&&Nn(l,e&&e.ref,o,t)},C=(e,t,r,i)=>{if(null==e)n(t.el=a(t.children),r,i);else{const n=t.el=e.el;t.children!==e.children&&l(n,t.children)}},E=(e,t,r,i)=>{null==e?n(t.el=u(t.children||""),r,i):t.el=e.el},S=(e,t,n,r)=>{[e.el,e.anchor]=m(e.children,t,n,r)},T=({el:e,anchor:t},r,i)=>{let o;for(;e&&e!==t;)o=_(e),n(e,r,i),e=o;n(t,r,i)},R=({el:e,anchor:t})=>{let n;for(;e&&e!==t;)n=_(e),r(e),e=n;r(t)},x=(e,t,n,r,i,o,s,a)=>{s=s||"svg"===t.type,null==e?I(t,n,r,i,o,s,a):N(e,t,i,o,s,a)},I=(e,t,r,o,a,u,l)=>{let c,h;const{type:p,props:d,shapeFlag:_,transition:v,scopeId:y,patchFlag:m,dirs:b}=e;if(e.el&&void 0!==g&&-1===m)c=e.el=g(e.el);else{if(c=e.el=s(e.type,u,d&&d.is),8&_?f(c,e.children):16&_&&O(e.children,c,null,o,a,u&&"foreignObject"!==p,l||!!e.dynamicChildren),b&&Tn(e,null,o,"created"),d){for(const t in d)A(t)||i(c,t,null,d[t],u,e.children,o,a,ie);(h=d.onVnodeBeforeMount)&&Dn(h,o,e)}k(c,y,e,o)}b&&Tn(e,null,o,"beforeMount");const w=(!a||a&&!a.pendingBranch)&&v&&!v.persisted;w&&v.beforeEnter(c),n(c,t,r),((h=d&&d.onVnodeMounted)||w||b)&&On((()=>{h&&Dn(h,o,e),w&&v.enter(c),b&&Tn(e,null,o,"mounted")}),a)},k=(e,t,n,r)=>{if(t&&v(e,t),r){const i=r.type.__scopeId;i&&i!==t&&v(e,i+"-s"),n===r.subTree&&k(e,r.vnode.scopeId,r.vnode,r.parent)}},O=(e,t,n,r,i,o,s,a=0)=>{for(let u=a;u<e.length;u++){const a=e[u]=s?or(e[u]):ir(e[u]);w(null,a,t,n,r,i,o,s)}},N=(e,t,n,r,s,a)=>{const u=t.el=e.el;let{patchFlag:l,dynamicChildren:h,dirs:p}=t;l|=16&e.patchFlag;const d=e.props||c,_=t.props||c;let v;if((v=_.onVnodeBeforeUpdate)&&Dn(v,n,t,e),p&&Tn(t,e,n,"beforeUpdate"),l>0){if(16&l)F(u,t,d,_,n,r,s);else if(2&l&&d.class!==_.class&&i(u,"class",null,_.class,s),4&l&&i(u,"style",d.style,_.style,s),8&l){const a=t.dynamicProps;for(let t=0;t<a.length;t++){const l=a[t],c=d[l],h=_[l];(h!==c||o&&o(u,l))&&i(u,l,c,h,s,e.children,n,r,ie)}}1&l&&e.children!==t.children&&f(u,t.children)}else a||null!=h||F(u,t,d,_,n,r,s);const y=s&&"foreignObject"!==t.type;h?D(e.dynamicChildren,h,u,n,r,y):a||z(e,t,u,null,n,r,y),((v=_.onVnodeUpdated)||p)&&On((()=>{v&&Dn(v,n,t,e),p&&Tn(t,e,n,"updated")}),r)},D=(e,t,n,r,i,o)=>{for(let s=0;s<t.length;s++){const a=e[s],u=t[s],l=a.type===qn||!Yn(a,u)||6&a.shapeFlag||64&a.shapeFlag?d(a.el):n;w(a,u,l,null,r,i,o,!0)}},F=(e,t,n,r,s,a,u)=>{if(n!==r){for(const l in r){if(A(l))continue;const c=r[l],h=n[l];(c!==h||o&&o(e,l))&&i(e,l,h,c,u,t.children,s,a,ie)}if(n!==c)for(const o in n)A(o)||o in r||i(e,o,n[o],null,u,t.children,s,a,ie)}},M=(e,t,r,i,o,s,u,l)=>{const c=t.el=e?e.el:a(""),h=t.anchor=e?e.anchor:a("");let{patchFlag:p,dynamicChildren:f}=t;p>0&&(l=!0),null==e?(n(c,r,i),n(h,r,i),O(t.children,r,h,o,s,u,l)):p>0&&64&p&&f&&e.dynamicChildren?(D(e.dynamicChildren,f,r,o,s,u),(null!=t.key||o&&t===o.subTree)&&Fn(e,t,!0)):z(e,t,r,h,o,s,u,l)},j=(e,t,n,r,i,o,s,a)=>{null==e?512&t.shapeFlag?i.ctx.activate(t,n,r,s,a):q(t,n,r,i,o,s,a):W(e,t,a)},q=(e,t,n,r,i,o,s)=>{const a=e.component=function(e,t,n){const r=e.type,i=(t?t.appContext:e.appContext)||Cr,o={uid:Er++,vnode:e,type:r,parent:t,appContext:i,root:null,next:null,subTree:null,update:null,render:null,proxy:null,exposed:null,withProxy:null,effects:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Yt(r,i),emitsOptions:It(r,i),emit:null,emitted:null,ctx:c,data:c,props:c,attrs:c,slots:c,refs:c,setupState:c,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=Pt.bind(null,o),o}(e,r,i);if(yn(e)&&(a.ctx.renderer=ue),function(e,t=!1){xr=t;const{props:n,children:r}=e.vnode,i=Rr(e);Kt(e,n,i,t),((e,t)=>{if(32&e.vnode.shapeFlag){const n=t._;n?(e.slots=t,Q(t,"_",n)):En(t,e.slots={})}else e.slots={},t&&Sn(e,t);Q(e.slots,Xn,1)})(e,r);const o=i?function(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,br);const{setup:r}=n;if(r){const n=e.setupContext=r.length>1?function(e){const t=t=>{e.exposed=tt(t)};return{attrs:e.attrs,slots:e.slots,emit:e.emit,expose:t}}(e):null;Sr=e,ne();const i=it(r,e,0,[e.props,n]);if(re(),Sr=null,P(i)){if(t)return i.then((t=>{Pr(e,t)}));e.asyncDep=i}else Pr(e,i)}else Ir(e)}(e,t):void 0;xr=!1}(a),a.asyncDep){if(i&&i.registerDep(a,V),!e.el){const e=a.subTree=er(Bn);E(null,e,t,n)}}else V(a,e,t,n,i,o,s)},W=(e,t,n)=>{const r=t.component=e.component;if(function(e,t,n){const{props:r,children:i,component:o}=e,{props:s,children:a,patchFlag:u}=t,l=o.emitsOptions;if(t.dirs||t.transition)return!0;if(!(n&&u>=0))return!(!i&&!a||a&&a.$stable)||r!==s&&(r?!s||Mt(r,s,l):!!s);if(1024&u)return!0;if(16&u)return r?Mt(r,s,l):!!s;if(8&u){const e=t.dynamicProps;for(let t=0;t<e.length;t++){const n=e[t];if(s[n]!==r[n]&&!kt(l,n))return!0}}return!1}(e,t,n)){if(r.asyncDep&&!r.asyncResolved)return void H(r,t,n);r.next=t,function(e){const t=lt.indexOf(e);t>-1&&lt.splice(t,1)}(r.update),r.update()}else t.component=e.component,t.el=e.el,r.vnode=t},V=(e,t,n,r,i,o,s)=>{e.update=Y((function(){if(e.isMounted){let t,{next:n,bu:r,u:a,parent:u,vnode:l}=e,c=n;n?(n.el=l.el,H(e,n,s)):n=l,r&&B(r),(t=n.props&&n.props.onVnodeBeforeUpdate)&&Dn(t,u,n,l);const h=At(e),p=e.subTree;e.subTree=h,w(p,h,d(p.el),se(p),e,i,o),n.el=h.el,null===c&&function({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}(e,h.el),a&&On(a,i),(t=n.props&&n.props.onVnodeUpdated)&&On((()=>{Dn(t,u,n,l)}),i)}else{let s;const{el:a,props:u}=t,{bm:l,m:c,parent:h}=e;l&&B(l),(s=u&&u.onVnodeBeforeMount)&&Dn(s,h,t);const p=e.subTree=At(e);if(a&&ce?ce(t.el,p,e,i):(w(null,p,n,r,e,i,o),t.el=p.el),c&&On(c,i),s=u&&u.onVnodeMounted){const e=t;On((()=>{Dn(s,h,e)}),i)}const{a:f}=e;f&&256&t.shapeFlag&&On(f,i),e.isMounted=!0,t=n=r=null}}),kn)},H=(e,t,n)=>{t.component=e;const r=e.vnode.props;e.vnode=t,e.next=null,function(e,t,n,r){const{props:i,attrs:o,vnode:{patchFlag:s}}=e,a=Ge(i),[u]=e.propsOptions;if(!(r||s>0)||16&s){let r;Gt(e,t,i,o);for(const o in a)t&&(b(t,o)||(r=U(o))!==o&&b(t,r))||(u?!n||void 0===n[o]&&void 0===n[r]||(i[o]=$t(u,t||c,o,void 0,e)):delete i[o]);if(o!==a)for(const e in o)t&&b(t,e)||delete o[e]}else if(8&s){const n=e.vnode.dynamicProps;for(let r=0;r<n.length;r++){const s=n[r],l=t[s];if(u)if(b(o,s))o[s]=l;else{const t=L(s);i[t]=$t(u,a,t,l,e)}else o[s]=l}}oe(e,"set","$attrs")}(e,t.props,r,n),((e,t)=>{const{vnode:n,slots:r}=e;let i=!0,o=c;if(32&n.shapeFlag){const e=t._;e?1===e?i=!1:y(r,t):(i=!t.$stable,En(t,r)),o=t}else t&&(Sn(e,t),o={default:1});if(i)for(const s in r)bn(s)||s in o||delete r[s]})(e,t.children),St(void 0,e.update)},z=(e,t,n,r,i,o,s,a=!1)=>{const u=e&&e.children,l=e?e.shapeFlag:0,c=t.children,{patchFlag:h,shapeFlag:p}=t;if(h>0){if(128&h)return void G(u,c,n,r,i,o,s,a);if(256&h)return void K(u,c,n,r,i,o,s,a)}8&p?(16&l&&ie(u,i,o),c!==u&&f(n,c)):16&l?16&p?G(u,c,n,r,i,o,s,a):ie(u,i,o,!0):(8&l&&f(n,""),16&p&&O(c,n,r,i,o,s,a))},K=(e,t,n,r,i,o,s,a)=>{t=t||h;const u=(e=e||h).length,l=t.length,c=Math.min(u,l);let p;for(p=0;p<c;p++){const r=t[p]=a?or(t[p]):ir(t[p]);w(e[p],r,n,null,i,o,s,a)}u>l?ie(e,i,o,!0,!1,c):O(t,n,r,i,o,s,a,c)},G=(e,t,n,r,i,o,s,a)=>{let u=0;const l=t.length;let c=e.length-1,p=l-1;for(;u<=c&&u<=p;){const r=e[u],l=t[u]=a?or(t[u]):ir(t[u]);if(!Yn(r,l))break;w(r,l,n,null,i,o,s,a),u++}for(;u<=c&&u<=p;){const r=e[c],u=t[p]=a?or(t[p]):ir(t[p]);if(!Yn(r,u))break;w(r,u,n,null,i,o,s,a),c--,p--}if(u>c){if(u<=p){const e=p+1,c=e<l?t[e].el:r;for(;u<=p;)w(null,t[u]=a?or(t[u]):ir(t[u]),n,c,i,o,s),u++}}else if(u>p)for(;u<=c;)J(e[u],i,o,!0),u++;else{const f=u,d=u,_=new Map;for(u=d;u<=p;u++){const e=t[u]=a?or(t[u]):ir(t[u]);null!=e.key&&_.set(e.key,u)}let v,y=0;const g=p-d+1;let m=!1,b=0;const C=new Array(g);for(u=0;u<g;u++)C[u]=0;for(u=f;u<=c;u++){const r=e[u];if(y>=g){J(r,i,o,!0);continue}let l;if(null!=r.key)l=_.get(r.key);else for(v=d;v<=p;v++)if(0===C[v-d]&&Yn(r,t[v])){l=v;break}void 0===l?J(r,i,o,!0):(C[l-d]=u+1,l>=b?b=l:m=!0,w(r,t[l],n,null,i,o,s,a),y++)}const E=m?function(e){const t=e.slice(),n=[0];let r,i,o,s,a;const u=e.length;for(r=0;r<u;r++){const u=e[r];if(0!==u){if(i=n[n.length-1],e[i]<u){t[r]=i,n.push(r);continue}for(o=0,s=n.length-1;o<s;)a=(o+s)/2|0,e[n[a]]<u?o=a+1:s=a;u<e[n[o]]&&(o>0&&(t[r]=n[o-1]),n[o]=r)}}o=n.length,s=n[o-1];for(;o-- >0;)n[o]=s,s=t[s];return n}(C):h;for(v=E.length-1,u=g-1;u>=0;u--){const e=d+u,a=t[e],c=e+1<l?t[e+1].el:r;0===C[u]?w(null,a,n,c,i,o,s):m&&(v<0||u!==E[v]?$(a,n,c,2):v--)}}},$=(e,t,r,i,o=null)=>{const{el:s,type:a,transition:u,children:l,shapeFlag:c}=e;if(6&c)return void $(e.component.subTree,t,r,i);if(128&c)return void e.suspense.move(t,r,i);if(64&c)return void a.move(e,t,r,ue);if(a===qn){n(s,t,r);for(let e=0;e<l.length;e++)$(l[e],t,r,i);return void n(e.anchor,t,r)}if(a===Qn)return void T(e,t,r);if(2!==i&&1&c&&u)if(0===i)u.beforeEnter(s),n(s,t,r),On((()=>u.enter(s)),o);else{const{leave:e,delayLeave:i,afterLeave:o}=u,a=()=>n(s,t,r),l=()=>{e(s,(()=>{a(),o&&o()}))};i?i(s,a,l):l()}else n(s,t,r)},J=(e,t,n,r=!1,i=!1)=>{const{type:o,props:s,ref:a,children:u,dynamicChildren:l,shapeFlag:c,patchFlag:h,dirs:p}=e;if(null!=a&&Nn(a,null,n,null),256&c)return void t.ctx.deactivate(e);const f=1&c&&p;let d;if((d=s&&s.onVnodeBeforeUnmount)&&Dn(d,t,e),6&c)te(e.component,n,r);else{if(128&c)return void e.suspense.unmount(n,r);f&&Tn(e,null,t,"beforeUnmount"),l&&(o!==qn||h>0&&64&h)?ie(l,t,n,!1,!0):(o===qn&&(128&h||256&h)||!i&&16&c)&&ie(u,t,n),64&c&&(r||!Ln(e.props))&&e.type.remove(e,ue),r&&Z(e)}((d=s&&s.onVnodeUnmounted)||f)&&On((()=>{d&&Dn(d,t,e),f&&Tn(e,null,t,"unmounted")}),n)},Z=e=>{const{type:t,el:n,anchor:i,transition:o}=e;if(t===qn)return void ee(n,i);if(t===Qn)return void R(e);const s=()=>{r(n),o&&!o.persisted&&o.afterLeave&&o.afterLeave()};if(1&e.shapeFlag&&o&&!o.persisted){const{leave:t,delayLeave:r}=o,i=()=>t(n,s);r?r(e.el,s,i):i()}else s()},ee=(e,t)=>{let n;for(;e!==t;)n=_(e),r(e),e=n;r(t)},te=(e,t,n)=>{const{bum:r,effects:i,update:o,subTree:s,um:a}=e;if(r&&B(r),i)for(let u=0;u<i.length;u++)X(i[u]);o&&(X(o),J(s,e,t,n)),a&&On(a,t),On((()=>{e.isUnmounted=!0}),t),t&&t.pendingBranch&&!t.isUnmounted&&e.asyncDep&&!e.asyncResolved&&e.suspenseId===t.pendingId&&(t.deps--,0===t.deps&&t.resolve())},ie=(e,t,n,r=!1,i=!1,o=0)=>{for(let s=o;s<e.length;s++)J(e[s],t,n,r,i)},se=e=>6&e.shapeFlag?se(e.component.subTree):128&e.shapeFlag?e.suspense.next():_(e.anchor||e.el),ae=(e,t)=>{null==e?t._vnode&&J(t._vnode,null,null,!0):w(t._vnode||null,e,t),Tt(),t._vnode=e},ue={p:w,um:J,m:$,r:Z,mt:q,mc:O,pc:z,pbc:D,n:se,o:e};let le,ce;t&&([le,ce]=t(ue));return{render:ae,hydrate:le,createApp:Pn(ae,le)}}(e)}function Dn(e,t,n,r=null){ot(e,t,7,[n,r])}function Fn(e,t,n=!1){const r=e.children,i=t.children;if(w(r)&&w(i))for(let o=0;o<r.length;o++){const e=r[o];let t=i[o];1&t.shapeFlag&&!t.dynamicChildren&&((t.patchFlag<=0||32===t.patchFlag)&&(t=i[o]=or(i[o]),t.el=e.el),n||Fn(e,t))}}const Ln=e=>e&&(e.disabled||""===e.disabled);function Mn(e){return function(e,t,n=!0){const r=Ot||Sr;if(r){const n=r.type;if("components"===e){if("_self"===t)return n;const e=Or(n);if(e&&(e===t||e===L(t)||e===j(L(t))))return n}return jn(r[e]||n[e],t)||jn(r.appContext[e],t)}}("components",e)||e}const Un=Symbol();function jn(e,t){return e&&(e[t]||e[L(t)]||e[j(L(t))])}const qn=Symbol(void 0),Wn=Symbol(void 0),Bn=Symbol(void 0),Qn=Symbol(void 0),Vn=[];let Hn=null;function zn(e=!1){Vn.push(Hn=e?null:[])}function Kn(){Vn.pop(),Hn=Vn[Vn.length-1]||null}function Gn(e,t,n,r,i){const o=er(e,t,n,r,i,!0);return o.dynamicChildren=Hn||h,Kn(),Hn&&Hn.push(o),o}function $n(e){return!!e&&!0===e.__v_isVNode}function Yn(e,t){return e.type===t.type&&e.key===t.key}const Xn="__vInternal",Jn=({key:e})=>null!=e?e:null,Zn=({ref:e})=>null!=e?T(e)||Ye(e)||S(e)?{i:Ot,r:e}:e:null,er=function(e,t=null,n=null,i=0,o=null,s=!1){e&&e!==Un||(e=Bn);if($n(e)){const r=tr(e,t,!0);return n&&sr(r,n),r}u=e,S(u)&&"__vccOpts"in u&&(e=e.__vccOpts);var u;if(t){(Ke(t)||Xn in t)&&(t=y({},t));let{class:e,style:n}=t;e&&!T(e)&&(t.class=a(e)),x(n)&&(Ke(n)&&!w(n)&&(n=y({},n)),t.style=r(n))}const l=T(e)?1:(e=>e.__isSuspense)(e)?128:(e=>e.__isTeleport)(e)?64:x(e)?4:S(e)?2:0,c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Jn(t),ref:t&&Zn(t),scopeId:Bt,children:null,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:l,patchFlag:i,dynamicProps:o,dynamicChildren:null,appContext:null};if(sr(c,n),128&l){const{content:e,fallback:t}=function(e){const{shapeFlag:t,children:n}=e;let r,i;return 32&t?(r=Ut(n.default),i=Ut(n.fallback)):(r=Ut(n),i=ir(null)),{content:r,fallback:i}}(c);c.ssContent=e,c.ssFallback=t}!s&&Hn&&(i>0||6&l)&&32!==i&&Hn.push(c);return c};function tr(e,t,n=!1){const{props:i,ref:o,patchFlag:s,children:u}=e,l=t?function(...e){const t=y({},e[0]);for(let n=1;n<e.length;n++){const i=e[n];for(const e in i)if("class"===e)t.class!==i.class&&(t.class=a([t.class,i.class]));else if("style"===e)t.style=r([t.style,i.style]);else if(_(e)){const n=t[e],r=i[e];n!==r&&(t[e]=n?[].concat(n,i[e]):r)}else""!==e&&(t[e]=i[e])}return t}(i||{},t):i;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:l,key:l&&Jn(l),ref:t&&t.ref?n&&o?w(o)?o.concat(Zn(t)):[o,Zn(t)]:Zn(t):o,scopeId:e.scopeId,children:u,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==qn?-1===s?16:16|s:s,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&tr(e.ssContent),ssFallback:e.ssFallback&&tr(e.ssFallback),el:e.el,anchor:e.anchor}}function nr(e=" ",t=0){return er(Wn,null,e,t)}function rr(e="",t=!1){return t?(zn(),Gn(Bn,null,e)):er(Bn,null,e)}function ir(e){return null==e||"boolean"==typeof e?er(Bn):w(e)?er(qn,null,e):"object"==typeof e?null===e.el?e:tr(e):er(Wn,null,String(e))}function or(e){return null===e.el?e:tr(e)}function sr(e,t){let n=0;const{shapeFlag:r}=e;if(null==t)t=null;else if(w(t))n=16;else if("object"==typeof t){if(1&r||64&r){const n=t.default;return void(n&&(n._c&&qt(1),sr(e,n()),n._c&&qt(-1)))}{n=32;const r=t._;r||Xn in t?3===r&&Ot&&(1024&Ot.vnode.patchFlag?(t._=2,e.patchFlag|=1024):t._=1):t._ctx=Ot}}else S(t)?(t={default:t,_ctx:Ot},n=32):(t=String(t),64&r?(n=16,t=[nr(t)]):n=8);e.children=t,e.shapeFlag|=n}function ar(e,t){if(Sr){let n=Sr.provides;const r=Sr.parent&&Sr.parent.provides;r===n&&(n=Sr.provides=Object.create(r)),n[e]=t}else;}function ur(e,t,n=!1){const r=Sr||Ot;if(r){const i=null==r.parent?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(i&&e in i)return i[e];if(arguments.length>1)return n&&S(t)?t():t}}let lr=!1;function cr(e,t,n=[],r=[],i=[],o=!1){const{mixins:s,extends:a,data:u,computed:l,methods:h,watch:f,provide:d,inject:_,components:v,directives:g,beforeMount:m,mounted:b,beforeUpdate:C,updated:E,activated:T,deactivated:R,beforeDestroy:P,beforeUnmount:I,destroyed:k,unmounted:O,render:N,renderTracked:A,renderTriggered:D,errorCaptured:F,expose:L}=t,M=e.proxy,U=e.ctx,j=e.appContext.mixins;if(o&&N&&e.render===p&&(e.render=N),o||(lr=!0,hr("beforeCreate","bc",t,e,j),lr=!1,dr(e,j,n,r,i)),a&&cr(e,a,n,r,i,!0),s&&dr(e,s,n,r,i),_)if(w(_))for(let c=0;c<_.length;c++){const e=_[c];U[e]=ur(e)}else for(const c in _){const e=_[c];x(e)?U[c]=ur(e.from||c,e.default,!0):U[c]=ur(e)}if(h)for(const c in h){const e=h[c];S(e)&&(U[c]=e.bind(M))}if(o?u&&n.push(u):(n.length&&n.forEach((t=>_r(e,t,M))),u&&_r(e,u,M)),l)for(const c in l){const e=l[c],t=Nr({get:S(e)?e.bind(M,M):S(e.get)?e.get.bind(M,M):p,set:!S(e)&&S(e.set)?e.set.bind(M):p});Object.defineProperty(U,c,{enumerable:!0,configurable:!0,get:()=>t.value,set:e=>t.value=e})}var q;if(f&&r.push(f),!o&&r.length&&r.forEach((e=>{for(const t in e)vr(e[t],U,M,t)})),d&&i.push(d),!o&&i.length&&i.forEach((e=>{const t=S(e)?e.call(M):e;Reflect.ownKeys(t).forEach((e=>{ar(e,t[e])}))})),o&&(v&&y(e.components||(e.components=y({},e.type.components)),v),g&&y(e.directives||(e.directives=y({},e.type.directives)),g)),o||hr("created","c",t,e,j),m&&rn(m.bind(M)),b&&on(b.bind(M)),C&&sn(C.bind(M)),E&&an(E.bind(M)),T&&gn(T.bind(M),"a",q),R&&function(e,t){gn(e,"da",t)}(R.bind(M)),F&&((e,t=Sr)=>{tn("ec",e,t)})(F.bind(M)),A&&hn(A.bind(M)),D&&cn(D.bind(M)),I&&un(I.bind(M)),O&&ln(O.bind(M)),w(L)&&!o)if(L.length){const t=e.exposed||(e.exposed=tt({}));L.forEach((e=>{t[e]=function(e,t){return Ye(e[t])?e[t]:new nt(e,t)}(M,e)}))}else e.exposed||(e.exposed=c)}function hr(e,t,n,r,i){fr(e,t,i,r);const{extends:o,mixins:s}=n;o&&pr(e,t,o,r),s&&fr(e,t,s,r);const a=n[e];a&&ot(a.bind(r.proxy),r,t)}function pr(e,t,n,r){n.extends&&pr(e,t,n.extends,r);const i=n[e];i&&ot(i.bind(r.proxy),r,t)}function fr(e,t,n,r){for(let i=0;i<n.length;i++){const o=n[i].mixins;o&&fr(e,t,o,r);const s=n[i][e];s&&ot(s.bind(r.proxy),r,t)}}function dr(e,t,n,r,i){for(let o=0;o<t.length;o++)cr(e,t[o],n,r,i,!0)}function _r(e,t,n){const r=t.call(n,n);x(r)&&(e.data===c?e.data=Be(r):y(e.data,r))}function vr(e,t,n,r){const i=r.includes(".")?function(e,t){const n=t.split(".");return()=>{let t=e;for(let e=0;e<n.length&&t;e++)t=t[n[e]];return t}}(n,r):()=>n[r];if(T(e)){const n=t[e];S(n)&&fn(i,n)}else if(S(e))fn(i,e.bind(n));else if(x(e))if(w(e))e.forEach((e=>vr(e,t,n,r)));else{const r=S(e.handler)?e.handler.bind(n):t[e.handler];S(r)&&fn(i,r,e)}}function yr(e,t,n){const r=n.appContext.config.optionMergeStrategies,{mixins:i,extends:o}=t;o&&yr(e,o,n),i&&i.forEach((t=>yr(e,t,n)));for(const s in t)r&&b(r,s)?e[s]=r[s](e[s],t[s],n.proxy,s):e[s]=t[s]}const gr=e=>e?Rr(e)?e.exposed?e.exposed:e.proxy:gr(e.parent):null,mr=y(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>gr(e.parent),$root:e=>gr(e.root),$emit:e=>e.emit,$options:e=>function(e){const t=e.type,{__merged:n,mixins:r,extends:i}=t;if(n)return n;const o=e.appContext.mixins;if(!o.length&&!r&&!i)return t;const s={};return o.forEach((t=>yr(s,t,e))),yr(s,t,e),t.__merged=s}(e),$forceUpdate:e=>()=>wt(e.update),$nextTick:e=>bt.bind(e.proxy),$watch:e=>_n.bind(e)}),br={get({_:e},t){const{ctx:n,setupState:r,data:i,props:o,accessCache:s,type:a,appContext:u}=e;if("__v_skip"===t)return!0;let l;if("$"!==t[0]){const a=s[t];if(void 0!==a)switch(a){case 0:return r[t];case 1:return i[t];case 3:return n[t];case 2:return o[t]}else{if(r!==c&&b(r,t))return s[t]=0,r[t];if(i!==c&&b(i,t))return s[t]=1,i[t];if((l=e.propsOptions[0])&&b(l,t))return s[t]=2,o[t];if(n!==c&&b(n,t))return s[t]=3,n[t];lr||(s[t]=4)}}const h=mr[t];let p,f;return h?("$attrs"===t&&ie(e,0,t),h(e)):(p=a.__cssModules)&&(p=p[t])?p:n!==c&&b(n,t)?(s[t]=3,n[t]):(f=u.config.globalProperties,b(f,t)?f[t]:void 0)},set({_:e},t,n){const{data:r,setupState:i,ctx:o}=e;if(i!==c&&b(i,t))i[t]=n;else if(r!==c&&b(r,t))r[t]=n;else if(b(e.props,t))return!1;return("$"!==t[0]||!(t.slice(1)in e))&&(o[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:i,propsOptions:o}},s){let a;return void 0!==n[s]||e!==c&&b(e,s)||t!==c&&b(t,s)||(a=o[0])&&b(a,s)||b(r,s)||b(mr,s)||b(i.config.globalProperties,s)}},wr=y({},br,{get(e,t){if(t!==Symbol.unscopables)return br.get(e,t,e)},has:(e,n)=>"_"!==n[0]&&!t(n)}),Cr=Rn();let Er=0;let Sr=null;const Tr=e=>{Sr=e};function Rr(e){return 4&e.vnode.shapeFlag}let xr=!1;function Pr(e,t,n){S(t)?e.render=t:x(t)&&(e.setupState=tt(t)),Ir(e)}function Ir(e,t){const n=e.type;e.render||(e.render=n.render||p,e.render._rc&&(e.withProxy=new Proxy(e.ctx,wr))),Sr=e,ne(),cr(e,n),re(),Sr=null}function kr(e,t=Sr){t&&(t.effects||(t.effects=[])).push(e)}function Or(e){return S(e)&&e.displayName||e.name}function Nr(e){const t=function(e){let t,n;return S(e)?(t=e,n=p):(t=e.get,n=e.set),new rt(t,n,S(e)||!e.set)}(e);return kr(t.effect),t}function Ar(e,t,n){const r=arguments.length;return 2===r?x(t)&&!w(t)?$n(t)?er(e,null,[t]):er(e,t):er(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):3===r&&$n(n)&&(n=[n]),er(e,t,n))}const Dr="3.0.7",Fr="http://www.w3.org/2000/svg",Lr="undefined"!=typeof document?document:null;let Mr,Ur;const jr={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n)=>t?Lr.createElementNS(Fr,e):Lr.createElement(e,n?{is:n}:void 0),createText:e=>Lr.createTextNode(e),createComment:e=>Lr.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Lr.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode:e=>e.cloneNode(!0),insertStaticContent(e,t,n,r){const i=r?Ur||(Ur=Lr.createElementNS(Fr,"svg")):Mr||(Mr=Lr.createElement("div"));i.innerHTML=e;const o=i.firstChild;let s=o,a=s;for(;s;)a=s,jr.insert(s,t,n),s=i.firstChild;return[o,a]}};const qr=/\s*!important$/;function Wr(e,t,n){if(w(n))n.forEach((n=>Wr(e,t,n)));else if(t.startsWith("--"))e.setProperty(t,n);else{const r=function(e,t){const n=Qr[t];if(n)return n;let r=L(t);if("filter"!==r&&r in e)return Qr[t]=r;r=j(r);for(let i=0;i<Br.length;i++){const n=Br[i]+r;if(n in e)return Qr[t]=n}return t}(e,t);qr.test(n)?e.setProperty(U(r),n.replace(qr,""),"important"):e[r]=n}}const Br=["Webkit","Moz","ms"],Qr={};const Vr="http://www.w3.org/1999/xlink";let Hr=Date.now;"undefined"!=typeof document&&Hr()>document.createEvent("Event").timeStamp&&(Hr=()=>performance.now());let zr=0;const Kr=Promise.resolve(),Gr=()=>{zr=0};function $r(e,t,n,r,i=null){const o=e._vei||(e._vei={}),s=o[t];if(r&&s)s.value=r;else{const[n,a]=function(e){let t;if(Yr.test(e)){let n;for(t={};n=e.match(Yr);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[U(e.slice(2)),t]}(t);if(r){!function(e,t,n,r){e.addEventListener(t,n,r)}(e,n,o[t]=function(e,t){const n=e=>{(e.timeStamp||Hr())>=n.attached-1&&ot(function(e,t){if(w(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map((e=>t=>!t._stopped&&e(t)))}return t}(e,n.value),t,5,[e])};return n.value=e,n.attached=(()=>zr||(Kr.then(Gr),zr=Hr()))(),n}(r,i),a)}else s&&(!function(e,t,n,r){e.removeEventListener(t,n,r)}(e,n,s,a),o[t]=void 0)}}const Yr=/(?:Once|Passive|Capture)$/;const Xr=/^on[a-z]/;const Jr=["ctrl","shift","alt","meta"],Zr={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&0!==e.button,middle:e=>"button"in e&&1!==e.button,right:e=>"button"in e&&2!==e.button,exact:(e,t)=>Jr.some((n=>e[`${n}Key`]&&!t.includes(n)))},ei=(e,t)=>(n,...r)=>{for(let e=0;e<t.length;e++){const r=Zr[t[e]];if(r&&r(n,t))return}return e(n,...r)},ti=y({patchProp:(e,t,r,i,o=!1,s,a,u,l)=>{switch(t){case"class":!function(e,t,n){if(null==t&&(t=""),n)e.setAttribute("class",t);else{const n=e._vtc;n&&(t=(t?[t,...n]:[...n]).join(" ")),e.className=t}}(e,i,o);break;case"style":!function(e,t,n){const r=e.style;if(n)if(T(n)){if(t!==n){const t=r.display;r.cssText=n,"_vod"in e&&(r.display=t)}}else{for(const e in n)Wr(r,e,n[e]);if(t&&!T(t))for(const e in t)null==n[e]&&Wr(r,e,"")}else e.removeAttribute("style")}(e,r,i);break;default:_(t)?v(t)||$r(e,t,0,i,a):function(e,t,n,r){if(r)return"innerHTML"===t||!!(t in e&&Xr.test(t)&&S(n));if("spellcheck"===t||"draggable"===t)return!1;if("form"===t)return!1;if("list"===t&&"INPUT"===e.tagName)return!1;if("type"===t&&"TEXTAREA"===e.tagName)return!1;if(Xr.test(t)&&T(n))return!1;return t in e}(e,t,i,o)?function(e,t,n,r,i,o,s){if("innerHTML"===t||"textContent"===t)return r&&s(r,i,o),void(e[t]=null==n?"":n);if("value"!==t||"PROGRESS"===e.tagName){if(""===n||null==n){const r=typeof e[t];if(""===n&&"boolean"===r)return void(e[t]=!0);if(null==n&&"string"===r)return e[t]="",void e.removeAttribute(t);if("number"===r)return e[t]=0,void e.removeAttribute(t)}try{e[t]=n}catch(a){}}else{e._value=n;const t=null==n?"":n;e.value!==t&&(e.value=t)}}(e,t,i,s,a,u,l):("true-value"===t?e._trueValue=i:"false-value"===t&&(e._falseValue=i),function(e,t,r,i){if(i&&t.startsWith("xlink:"))null==r?e.removeAttributeNS(Vr,t.slice(6,t.length)):e.setAttributeNS(Vr,t,r);else{const i=n(t);null==r||i&&!1===r?e.removeAttribute(t):e.setAttribute(t,i?"":r)}}(e,t,i,o))}},forcePatchProp:(e,t)=>"value"===t},jr);let ni;const ri=(...e)=>{const t=(ni||(ni=An(ti))).createApp(...e),{mount:n}=t;return t.mount=e=>{const r=function(e){if(T(e)){return document.querySelector(e)}return e}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(e);if(!r)return;const i=t._component;S(i)||i.render||i.template||(i.template=r.innerHTML),r.innerHTML="";const o=n(r);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},t};var ii=function(e,t){return(ii=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function oi(e,t){function n(){this.constructor=e}ii(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var si=function(){return(si=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function ai(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(t){o(t)}}function a(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}function ui(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function li(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function ci(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function hi(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(ci(arguments[t]));return e}function pi(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fi=!1,di="${JSCORE_VERSION}",_i=function(e,t){if(!e)throw vi(t)},vi=function(e){return new Error("Firebase Database ("+di+") INTERNAL ASSERT FAILED: "+e)},yi=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},gi={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var o=e[i],s=i+1<e.length,a=s?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=o>>2,h=(3&o)<<4|a>>4,p=(15&a)<<2|l>>6,f=63&l;u||(f=64,s||(p=64)),r.push(n[c],n[h],n[p],n[f])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(yi(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=e[n++]))<<12|(63&(a=e[n++]))<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{o=e[n++];var a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var o=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0,a=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();var l=o<<2|s>>4;if(r.push(l),64!==a){var c=s<<4&240|a>>2;if(r.push(c),64!==u){var h=a<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},mi=function(e){try{return gi.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function bi(e){return wi(void 0,e)}function wi(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=wi(e[n],t[n]));return e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ci=function(){function e(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))}return e.prototype.wrapCallback=function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"==typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ei(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test("undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:"")}function Si(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(e){return!1}}function Ti(){return!0===fi}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ri=function(e){function t(n,r,i){var o=e.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,xi.prototype.create),o}return oi(t,e),t}(Error),xi=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n}return e.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t[0]||{},i=this.service+"/"+e,o=this.errors[e],s=o?Pi(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new Ri(i,a,r);return u},e}();function Pi(e,t){return e.replace(Ii,(function(e,n){var r=t[n];return null!=r?String(r):"<"+n+"?>"}))}var Ii=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ki(e){return JSON.parse(e)}function Oi(e){return JSON.stringify(e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ni=function(e){var t={},n={},r={},i="";try{var o=e.split(".");t=ki(mi(o[0])||""),n=ki(mi(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(s){}return{header:t,claims:n,data:r,signature:i}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ai(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Di(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function Fi(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Li(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Mi=function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}return e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if("string"==typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,s,a=this.chain_[0],u=this.chain_[1],l=this.chain_[2],c=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=c^u&(l^c),s=1518500249):(o=u^l^c,s=1859775393):r<60?(o=u&l|c&(u|l),s=2400959708):(o=u^l^c,s=3395469782);i=(a<<5|a>>>27)+o+h+s+n[r]&4294967295;h=c,c=l,l=4294967295&(u<<30|u>>>2),u=a,a=i}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},e.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<t;){if(0===o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}},e.prototype.digest=function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)e[r]=this.chain_[n]>>i&255,++r;return e},e}();function Ui(e,t){var n=new ji(e,t);return n.subscribe.bind(n)}var ji=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((function(){e(n)})).catch((function(e){n.error(e)}))}return e.prototype.next=function(e){this.forEachObserver((function(t){t.next(e)}))},e.prototype.error=function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)},e.prototype.complete=function(){this.forEachObserver((function(e){e.complete()})),this.close()},e.prototype.subscribe=function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i in e&&"function"==typeof e[i])return!0}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=qi),void 0===r.error&&(r.error=qi),void 0===r.complete&&(r.complete=qi);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),o},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}}))},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))},e}();function qi(){}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wi=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function Bi(e,t,n){var r="";switch(t){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=e+" failed: ";return i+=r+" argument "}function Qi(e,t,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(Bi(e,t,r)+"must be a valid function.")}function Vi(e,t,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(Bi(e,t,r)+"must be a valid context object.")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hi=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t},zi=function(){function e(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return e.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},e.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},e.prototype.setServiceProps=function(e){return this.serviceProps=e,this},e}(),Ki=function(){function e(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return e.prototype.get=function(e){void 0===e&&(e="[DEFAULT]");var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new Ci;this.instancesDeferred.set(t,n);try{var r=this.getOrInitializeService(t);r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise},e.prototype.getImmediate=function(e){var t=si({identifier:"[DEFAULT]",optional:!1},e),n=t.identifier,r=t.optional,i=this.normalizeInstanceIdentifier(n);try{var o=this.getOrInitializeService(i);if(!o){if(r)return null;throw Error("Service "+this.name+" is not available")}return o}catch(s){if(r)return null;throw s}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(e){var t,n;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,function(e){return"EAGER"===e.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e))try{this.getOrInitializeService("[DEFAULT]")}catch(c){}try{for(var r=li(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=ci(i.value,2),s=o[0],a=o[1],u=this.normalizeInstanceIdentifier(s);try{var l=this.getOrInitializeService(u);a.resolve(l)}catch(c){}}}catch(h){t={error:h}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}},e.prototype.clearInstance=function(e){void 0===e&&(e="[DEFAULT]"),this.instancesDeferred.delete(e),this.instances.delete(e)},e.prototype.delete=function(){return ai(this,void 0,void 0,(function(){var e;return ui(this,(function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(hi(e.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()})),e.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()}))))];case 1:return t.sent(),[2]}}))}))},e.prototype.isComponentSet=function(){return null!=this.component},e.prototype.isInitialized=function(e){return void 0===e&&(e="[DEFAULT]"),this.instances.has(e)},e.prototype.getOrInitializeService=function(e){var t=this.instances.get(e);return!t&&this.component&&(t=this.component.instanceFactory(this.container,function(e){return"[DEFAULT]"===e?void 0:e}(e)),this.instances.set(e,t)),t||null},e.prototype.normalizeInstanceIdentifier=function(e){return this.component?this.component.multipleInstances?e:"[DEFAULT]":e},e}();var Gi,$i=function(){function e(e){this.name=e,this.providers=new Map}return e.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);t.setComponent(e)},e.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},e.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Ki(e,this);return this.providers.set(e,t),t},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}();
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function Yi(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xi,Ji,Zi=[];(Ji=Xi||(Xi={}))[Ji.DEBUG=0]="DEBUG",Ji[Ji.VERBOSE=1]="VERBOSE",Ji[Ji.INFO=2]="INFO",Ji[Ji.WARN=3]="WARN",Ji[Ji.ERROR=4]="ERROR",Ji[Ji.SILENT=5]="SILENT";var eo,to={debug:Xi.DEBUG,verbose:Xi.VERBOSE,info:Xi.INFO,warn:Xi.WARN,error:Xi.ERROR,silent:Xi.SILENT},no=Xi.INFO,ro=((Gi={})[Xi.DEBUG]="log",Gi[Xi.VERBOSE]="log",Gi[Xi.INFO]="info",Gi[Xi.WARN]="warn",Gi[Xi.ERROR]="error",Gi),io=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(t<e.logLevel)){var i=(new Date).toISOString(),o=ro[t];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+t+")");console[o].apply(console,Yi(["["+i+"]  "+e.name+":"],n))}},oo=function(){function e(e){this.name=e,this._logLevel=no,this._logHandler=io,this._userLogHandler=null,Zi.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in Xi))throw new TypeError('Invalid value "'+e+'" assigned to `logLevel`');this._logLevel=e},enumerable:!1,configurable:!0}),e.prototype.setLogLevel=function(e){this._logLevel="string"==typeof e?to[e]:e},Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,Yi([this,Xi.DEBUG],e)),this._logHandler.apply(this,Yi([this,Xi.DEBUG],e))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,Yi([this,Xi.VERBOSE],e)),this._logHandler.apply(this,Yi([this,Xi.VERBOSE],e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,Yi([this,Xi.INFO],e)),this._logHandler.apply(this,Yi([this,Xi.INFO],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,Yi([this,Xi.WARN],e)),this._logHandler.apply(this,Yi([this,Xi.WARN],e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,Yi([this,Xi.ERROR],e)),this._logHandler.apply(this,Yi([this,Xi.ERROR],e))},e}();function so(e){Zi.forEach((function(t){t.setLogLevel(e)}))}var ao,uo=((eo={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",eo["bad-app-name"]="Illegal App name: '{$appName}",eo["duplicate-app"]="Firebase App named '{$appName}' already exists",eo["app-deleted"]="Firebase App named '{$appName}' already deleted",eo["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",eo["invalid-log-argument"]="First argument to `onLog` must be null or a function.",eo),lo=new xi("app","Firebase",uo),co=((ao={})["@firebase/app"]="fire-core",ao["@firebase/analytics"]="fire-analytics",ao["@firebase/auth"]="fire-auth",ao["@firebase/database"]="fire-rtdb",ao["@firebase/functions"]="fire-fn",ao["@firebase/installations"]="fire-iid",ao["@firebase/messaging"]="fire-fcm",ao["@firebase/performance"]="fire-perf",ao["@firebase/remote-config"]="fire-rc",ao["@firebase/storage"]="fire-gcs",ao["@firebase/firestore"]="fire-fst",ao["fire-js"]="fire-js",ao["firebase-wrapper"]="fire-js-all",ao),ho=new oo("@firebase/app"),po=function(){function e(e,t,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=t.name,this.automaticDataCollectionEnabled_=t.automaticDataCollectionEnabled||!1,this.options_=bi(e),this.container=new $i(t.name),this._addComponent(new zi("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(e){return r._addComponent(e)}))}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),e.prototype.delete=function(){var e=this;return new Promise((function(t){e.checkDestroyed_(),t()})).then((function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map((function(e){return e.delete()})))})).then((function(){e.isDeleted_=!0}))},e.prototype._getService=function(e,t){return void 0===t&&(t="[DEFAULT]"),this.checkDestroyed_(),this.container.getProvider(e).getImmediate({identifier:t})},e.prototype._removeServiceInstance=function(e,t){void 0===t&&(t="[DEFAULT]"),this.container.getProvider(e).clearInstance(t)},e.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(t){ho.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,t)}},e.prototype._addOrOverwriteComponent=function(e){this.container.addOrOverwriteComponent(e)},e.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},e.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw lo.create("app-deleted",{appName:this.name_})},e}();po.prototype.name&&po.prototype.options||po.prototype.delete||console.log("dc");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function fo(e){var t={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!=typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name="[DEFAULT]");var s=o.name;if("string"!=typeof s||!s)throw lo.create("bad-app-name",{appName:String(s)});if(Ai(t,s))throw lo.create("duplicate-app",{appName:s});var a=new e(n,o,r);return t[s]=a,a},app:i,registerVersion:function(e,t,n){var r,i=null!==(r=co[e])&&void 0!==r?r:e;n&&(i+="-"+n);var s=i.match(/\s|\//),a=t.match(/\s|\//);if(s||a){var u=['Unable to register library "'+i+'" with version "'+t+'":'];return s&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&a&&u.push("and"),a&&u.push('version name "'+t+'" contains illegal characters (whitespace or "/")'),void ho.warn(u.join(" "))}o(new zi(i+"-version",(function(){return{library:i,version:t}}),"VERSION"))},setLogLevel:so,onLog:function(e,t){if(null!==e&&"function"!=typeof e)throw lo.create("invalid-log-argument");!function(e,t){for(var n=function(n){var r=null;t&&t.level&&(r=to[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s=i.map((function(e){if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!=r?r:t.logLevel)&&e({level:Xi[n].toLowerCase(),message:s,args:i,type:t.name})}},r=0,i=Zi;r<i.length;r++)n(i[r])}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e,t)},apps:null,SDK_VERSION:"8.2.9",INTERNAL:{registerComponent:o,removeApp:function(e){delete t[e]},components:n,useAsService:function(e,t){if("serverAuth"===t)return null;return t}}};function i(e){if(!Ai(t,e=e||"[DEFAULT]"))throw lo.create("no-app",{appName:e});return t[e]}function o(o){var s=o.name;if(n.has(s))return ho.debug("There were multiple attempts to register component "+s+"."),"PUBLIC"===o.type?r[s]:null;if(n.set(s,o),"PUBLIC"===o.type){var a=function(e){if(void 0===e&&(e=i()),"function"!=typeof e[s])throw lo.create("invalid-app-argument",{appName:s});return e[s]()};void 0!==o.serviceProps&&wi(a,o.serviceProps),r[s]=a,e.prototype[s]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this._getService.bind(this,s);return n.apply(this,o.multipleInstances?e:[])}}for(var u=0,l=Object.keys(t);u<l.length;u++){var c=l[u];t[c]._addComponent(o)}return"PUBLIC"===o.type?r[s]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(t).map((function(e){return t[e]}))}}),i.App=e,r}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _o=function e(){var t=fo(po);return t.INTERNAL=si(si({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){wi(t,e)},createSubscribe:Ui,ErrorFactory:xi,deepExtend:wi}),t}(),vo=function(){function e(e){this.container=e}return e.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)){var t=e.getImmediate();return t.library+"/"+t.version}return null})).filter((function(e){return e})).join(" ")},e}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
if("object"==typeof self&&self.self===self&&void 0!==self.firebase){ho.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var yo=self.firebase.SDK_VERSION;yo&&yo.indexOf("LITE")>=0&&ho.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var go=_o.initializeApp;_o.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Si()&&ho.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),go.apply(void 0,e)};var mo,bo,wo=_o;(mo=wo).INTERNAL.registerComponent(new zi("platform-logger",(function(e){return new vo(e)}),"PRIVATE")),mo.registerVersion("@firebase/app","0.6.15",bo),mo.registerVersion("fire-js","");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Co,Eo=function(){function e(e){this.domStorage_=e,this.prefix_="firebase:"}return e.prototype.set=function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Oi(t))},e.prototype.get=function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:ki(t)},e.prototype.remove=function(e){this.domStorage_.removeItem(this.prefixedName_(e))},e.prototype.prefixedName_=function(e){return this.prefix_+e},e.prototype.toString=function(){return this.domStorage_.toString()},e}(),So=function(){function e(){this.cache_={},this.isInMemoryStorage=!0}return e.prototype.set=function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t},e.prototype.get=function(e){return Ai(this.cache_,e)?this.cache_[e]:null},e.prototype.remove=function(e){delete this.cache_[e]},e}(),To=function(e){try{if("undefined"!=typeof window&&void 0!==window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Eo(t)}}catch(n){}return new So},Ro=To("localStorage"),xo=To("sessionStorage"),Po=new oo("@firebase/database"),Io=(Co=1,function(){return Co++}),ko=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var o=i-55296;r++,_i(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(o<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new Mi;n.update(t);var r=n.digest();return gi.encodeByteArray(r)},Oo=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n="",r=0;r<e.length;r++){var i=e[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=Oo.apply(null,i):n+="object"==typeof i?Oi(i):i,n+=" "}return n},No=null,Ao=!0,Do=function(e,t){_i(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(Po.logLevel=Xi.VERBOSE,No=Po.log.bind(Po),t&&xo.set("logging_enabled",!0)):"function"==typeof e?No=e:(No=null,xo.remove("logging_enabled"))},Fo=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!0===Ao&&(Ao=!1,null===No&&!0===xo.get("logging_enabled")&&Do(!0)),No){var n=Oo.apply(null,e);No(n)}},Lo=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];Fo.apply(void 0,hi([e],t))}},Mo=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE INTERNAL ERROR: "+Oo.apply(void 0,hi(e));Po.error(n)},Uo=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE FATAL ERROR: "+Oo.apply(void 0,hi(e));throw Po.error(n),new Error(n)},jo=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE WARNING: "+Oo.apply(void 0,hi(e));Po.warn(n)},qo=function(e){return"number"==typeof e&&(e!=e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},Wo="[MIN_NAME]",Bo="[MAX_NAME]",Qo=function(e,t){if(e===t)return 0;if(e===Wo||t===Bo)return-1;if(t===Wo||e===Bo)return 1;var n=Xo(e),r=Xo(t);return null!==n?null!==r?n-r==0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},Vo=function(e,t){return e===t?0:e<t?-1:1},Ho=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Oi(t))},zo=function(e){if("object"!=typeof e||null===e)return Oi(e);var t=[];for(var n in e)t.push(n);t.sort();for(var r="{",i=0;i<t.length;i++)0!==i&&(r+=","),r+=Oi(t[i]),r+=":",r+=zo(e[t[i]]);return r+="}"},Ko=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Go(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var $o=function(e){_i(!qo(e),"Invalid JSON number");var t,n,r,i,o,s=1023;0===e?(n=0,r=0,t=1/e==-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),s))+s,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var a=[];for(o=52;o;o-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;o-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(t?1:0),a.reverse();var u=a.join(""),l="";for(o=0;o<64;o+=8){var c=parseInt(u.substr(o,8),2).toString(16);1===c.length&&(c="0"+c),l+=c}return l.toLowerCase()},Yo=new RegExp("^-?(0*)\\d{1,10}$"),Xo=function(e){if(Yo.test(e)){var t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},Jo=function(e){try{e()}catch(t){setTimeout((function(){var e=t.stack||"";throw jo("Exception was thrown by user callback.",e),t}),Math.floor(0))}},Zo=function(e,t){var n=setTimeout(e,t);return"object"==typeof n&&n.unref&&n.unref(),n},es=function(){function e(e,t){if(void 0===t){this.pieces_=e.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}return e.prototype.toString=function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"},e}();function ts(){return new es("")}function ns(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function rs(e){return e.pieces_.length-e.pieceNum_}function is(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new es(e.pieces_,t)}function os(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function ss(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}function as(e,t){return void 0===t&&(t=0),e.pieces_.slice(e.pieceNum_+t)}function us(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new es(t,0)}function ls(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof es)for(r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{var i=t.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new es(n,0)}function cs(e){return e.pieceNum_>=e.pieces_.length}function hs(e,t){var n=ns(e),r=ns(t);if(null===n)return t;if(n===r)return hs(is(e),is(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function ps(e,t){for(var n=as(e,0),r=as(t,0),i=0;i<n.length&&i<r.length;i++){var o=Qo(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function fs(e,t){if(rs(e)!==rs(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function ds(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(rs(e)>rs(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var _s=function(){function e(e,t){this.errorPrefix_=t,this.parts_=as(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Hi(this.parts_[n]);this.checkValid_()}return Object.defineProperty(e,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(e,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!1,configurable:!0}),e.prototype.push=function(e){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(e),this.byteLength_+=Hi(e),this.checkValid_()},e.prototype.pop=function(){var e=this.parts_.pop();this.byteLength_-=Hi(e),this.parts_.length>0&&(this.byteLength_-=1)},e.prototype.checkValid_=function(){if(this.byteLength_>e.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+e.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>e.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+e.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},e.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},e}(),vs=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ys=function(){function e(e,t,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this.host=e.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=Ro.get("host:"+e)||this.host}return e.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},e.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},e.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},e.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},e.prototype.updateHost=function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ro.set("host:"+this.host,this.internalHost))},e.prototype.connectionURL=function(e,t){var n;if(_i("string"==typeof e,"typeof type must == string"),_i("object"==typeof t,"typeof params must == object"),"websocket"===e)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if("long_polling"!==e)throw new Error("Unknown connection type: "+e);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(t.ns=this.namespace);var r=[];return Go(t,(function(e,t){r.push(e+"="+t)})),n+r.join("&")},e.prototype.toString=function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e},e.prototype.toURLString=function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns="+this.namespace:"";return""+e+this.host+"/"+t},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gs,ms,bs,ws,Cs=function(e,t){var n=Es(e),r=n.namespace;"firebase.com"===n.domain&&Uo(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||Uo("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&jo("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new ys(n.host,n.secure,r,t,i,"",r!==n.subdomain),path:new es(n.pathString)}},Es=function(e){var t="",n="",r="",i="",o="",s=!0,a="https",u=443;if("string"==typeof e){var l=e.indexOf("//");l>=0&&(a=e.substring(0,l-1),e=e.substring(l+2));var c=e.indexOf("/");-1===c&&(c=e.length);var h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(c,h)),c<h&&(i=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}t+="/"+i}return t}(e.substring(c,h)));var p=function(e){var t,n,r={};"?"===e.charAt(0)&&(e=e.substring(1));try{for(var i=li(e.split("&")),o=i.next();!o.done;o=i.next()){var s=o.value;if(0!==s.length){var a=s.split("=");2===a.length?r[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):jo("Invalid query segment '"+s+"' in query '"+e+"'")}}}catch(u){t={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}(e.substring(Math.min(e.length,h)));(l=t.indexOf(":"))>=0?(s="https"===a||"wss"===a,u=parseInt(t.substring(l+1),10)):l=t.length;var f=t.slice(0,l);if("localhost"===f.toLowerCase())n="localhost";else if(f.split(".").length<=2)n=f;else{var d=t.indexOf(".");r=t.substring(0,d).toLowerCase(),n=t.substring(d+1),o=r}"ns"in p&&(o=p.ns)}return{host:t,port:u,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}},Ss=/[\[\].#$\/\u0000-\u001F\u007F]/,Ts=/[\[\].#$\u0000-\u001F\u007F]/,Rs=function(e){return"string"==typeof e&&0!==e.length&&!Ss.test(e)},xs=function(e){return"string"==typeof e&&0!==e.length&&!Ts.test(e)},Ps=function(e){return null===e||"string"==typeof e||"number"==typeof e&&!qo(e)||e&&"object"==typeof e&&Ai(e,".sv")},Is=function(e,t,n,r,i){i&&void 0===n||ks(Bi(e,t,i),n,r)},ks=function(e,t,n){var r=n instanceof es?new _s(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+r.toErrorString());if("function"==typeof t)throw new Error(e+"contains a function "+r.toErrorString()+" with contents = "+t.toString());if(qo(t))throw new Error(e+"contains "+t.toString()+" "+r.toErrorString());if("string"==typeof t&&t.length>10485760/3&&Hi(t)>10485760)throw new Error(e+"contains a string greater than 10485760 utf8 bytes "+r.toErrorString()+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){var i=!1,o=!1;if(Go(t,(function(t,n){if(".value"===t)i=!0;else if(".priority"!==t&&".sv"!==t&&(o=!0,!Rs(t)))throw new Error(e+" contains an invalid key ("+t+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(t),ks(e,n,r),r.pop()})),i&&o)throw new Error(e+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},Os=function(e,t,n,r,i){if(!i||void 0!==n){var o=Bi(e,t,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var s=[];Go(n,(function(e,t){var n=new es(e);if(ks(o,t,ls(r,n)),".priority"===os(n)&&!Ps(t))throw new Error(o+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(n)})),function(e,t){var n,r;for(n=0;n<t.length;n++)for(var i=as(r=t[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!Rs(i[o]))throw new Error(e+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');t.sort(ps);var s=null;for(n=0;n<t.length;n++){if(r=t[n],null!==s&&ds(s,r))throw new Error(e+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(o,s)}},Ns=function(e,t,n,r){if(!r||void 0!==n){if(qo(n))throw new Error(Bi(e,t,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Ps(n))throw new Error(Bi(e,t,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},As=function(e,t,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Bi(e,t,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Ds=function(e,t,n,r){if(!(r&&void 0===n||Rs(n)))throw new Error(Bi(e,t,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Fs=function(e,t,n,r){if(!(r&&void 0===n||xs(n)))throw new Error(Bi(e,t,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Ls=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Fs(e,t,n,r)},Ms=function(e,t){if(".info"===ns(t))throw new Error(e+" failed = Can't modify data under /.info/")},Us=function(e,t,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!Rs(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),xs(e)}(r))throw new Error(Bi(e,t,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},js=function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(Bi(e,t,r)+"must be a boolean.")},qs=function(){function e(e,t){this.repo_=e,this.path_=t}return e.prototype.cancel=function(e){Wi("OnDisconnect.cancel",0,1,arguments.length),Qi("OnDisconnect.cancel",1,e,!0);var t=new Ci;return this.repo_.onDisconnectCancel(this.path_,t.wrapCallback(e)),t.promise},e.prototype.remove=function(e){Wi("OnDisconnect.remove",0,1,arguments.length),Ms("OnDisconnect.remove",this.path_),Qi("OnDisconnect.remove",1,e,!0);var t=new Ci;return this.repo_.onDisconnectSet(this.path_,null,t.wrapCallback(e)),t.promise},e.prototype.set=function(e,t){Wi("OnDisconnect.set",1,2,arguments.length),Ms("OnDisconnect.set",this.path_),Is("OnDisconnect.set",1,e,this.path_,!1),Qi("OnDisconnect.set",2,t,!0);var n=new Ci;return this.repo_.onDisconnectSet(this.path_,e,n.wrapCallback(t)),n.promise},e.prototype.setWithPriority=function(e,t,n){Wi("OnDisconnect.setWithPriority",2,3,arguments.length),Ms("OnDisconnect.setWithPriority",this.path_),Is("OnDisconnect.setWithPriority",1,e,this.path_,!1),Ns("OnDisconnect.setWithPriority",2,t,!1),Qi("OnDisconnect.setWithPriority",3,n,!0);var r=new Ci;return this.repo_.onDisconnectSetWithPriority(this.path_,e,t,r.wrapCallback(n)),r.promise},e.prototype.update=function(e,t){if(Wi("OnDisconnect.update",1,2,arguments.length),Ms("OnDisconnect.update",this.path_),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,jo("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Os("OnDisconnect.update",1,e,this.path_,!1),Qi("OnDisconnect.update",2,t,!0);var i=new Ci;return this.repo_.onDisconnectUpdate(this.path_,e,i.wrapCallback(t)),i.promise},e}(),Ws=function(){function e(e,t){this.committed=e,this.snapshot=t}return e.prototype.toJSON=function(){return Wi("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},e}(),Bs="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Qs=(gs=0,ms=[],function(e){var t,n=e===gs;gs=e;var r=new Array(8);for(t=7;t>=0;t--)r[t]=Bs.charAt(e%64),e=Math.floor(e/64);_i(0===e,"Cannot push at time == 0");var i=r.join("");if(n){for(t=11;t>=0&&63===ms[t];t--)ms[t]=0;ms[t]++}else for(t=0;t<12;t++)ms[t]=Math.floor(64*Math.random());for(t=0;t<12;t++)i+=Bs.charAt(ms[t]);return _i(20===i.length,"nextPushId: Length should be 20."),i}),Vs=function(e){if("2147483647"===e)return"-";var t=Xo(e);if(null!=t)return""+(t+1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return Bo;var o=n[i],s=Bs.charAt(Bs.indexOf(o)+1);return n[i]=s,n.slice(0,i+1).join("")},Hs=function(e){if("-2147483648"===e)return Wo;var t=Xo(e);if(null!=t)return""+(t-1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=Bs.charAt(Bs.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))},zs=function(){function e(e,t){this.name=e,this.node=t}return e.Wrap=function(t,n){return new e(t,n)},e}(),Ks=function(){function e(){}return e.prototype.getCompare=function(){return this.compare.bind(this)},e.prototype.indexedValueChanged=function(e,t){var n=new zs(Wo,e),r=new zs(Wo,t);return 0!==this.compare(n,r)},e.prototype.minPost=function(){return zs.MIN},e}(),Gs=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return oi(t,e),Object.defineProperty(t,"__EMPTY_NODE",{get:function(){return bs},set:function(e){bs=e},enumerable:!1,configurable:!0}),t.prototype.compare=function(e,t){return Qo(e.name,t.name)},t.prototype.isDefinedOn=function(e){throw vi("KeyIndex.isDefinedOn not expected to be called.")},t.prototype.indexedValueChanged=function(e,t){return!1},t.prototype.minPost=function(){return zs.MIN},t.prototype.maxPost=function(){return new zs(Bo,bs)},t.prototype.makePost=function(e,t){return _i("string"==typeof e,"KeyIndex indexValue must always be a string."),new zs(e,bs)},t.prototype.toString=function(){return".key"},t}(Ks),$s=new Gs;var Ys,Xs,Js,Zs=function(e){return"number"==typeof e?"number:"+$o(e):"string:"+e},ea=function(e){if(e.isLeafNode()){var t=e.val();_i("string"==typeof t||"number"==typeof t||"object"==typeof t&&Ai(t,".sv"),"Priority must be a string or number.")}else _i(e===ws||e.isEmpty(),"priority of unexpected type.");_i(e===ws||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},ta=function(){function e(t,n){void 0===n&&(n=e.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,_i(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),ea(this.priorityNode_)}return Object.defineProperty(e,"__childrenNodeConstructor",{get:function(){return Ys},set:function(e){Ys=e},enumerable:!1,configurable:!0}),e.prototype.isLeafNode=function(){return!0},e.prototype.getPriority=function(){return this.priorityNode_},e.prototype.updatePriority=function(t){return new e(this.value_,t)},e.prototype.getImmediateChild=function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.getChild=function(t){return cs(t)?this:".priority"===ns(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.hasChild=function(){return!1},e.prototype.getPredecessorChildName=function(e,t){return null},e.prototype.updateImmediateChild=function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)},e.prototype.updateChild=function(t,n){var r=ns(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(_i(".priority"!==r||1===rs(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(is(t),n)))},e.prototype.isEmpty=function(){return!1},e.prototype.numChildren=function(){return 0},e.prototype.forEachChild=function(e,t){return!1},e.prototype.val=function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},e.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+Zs(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?$o(this.value_):this.value_,this.lazyHash_=ko(e)}return this.lazyHash_},e.prototype.getValue=function(){return this.value_},e.prototype.compareTo=function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(_i(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},e.prototype.compareToLeafNode_=function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),o=e.VALUE_TYPE_ORDER.indexOf(r);return _i(i>=0,"Unknown leaf type: "+n),_i(o>=0,"Unknown leaf type: "+r),i===o?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-i},e.prototype.withIndex=function(){return this},e.prototype.isIndexed=function(){return!0},e.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1},e.VALUE_TYPE_ORDER=["object","boolean","number","string"],e}();var na,ra,ia=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return oi(t,e),t.prototype.compare=function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?Qo(e.name,t.name):i},t.prototype.isDefinedOn=function(e){return!e.getPriority().isEmpty()},t.prototype.indexedValueChanged=function(e,t){return!e.getPriority().equals(t.getPriority())},t.prototype.minPost=function(){return zs.MIN},t.prototype.maxPost=function(){return new zs(Bo,new ta("[PRIORITY-POST]",Js))},t.prototype.makePost=function(e,t){var n=Xs(e);return new zs(t,new ta("[PRIORITY-POST]",n))},t.prototype.toString=function(){return".priority"},t}(Ks)),oa=function(){function e(e,t,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!e.isEmpty();)if(e=e,o=t?n(e.key,t):1,r&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}return e.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e},e.prototype.hasNext=function(){return this.nodeStack_.length>0},e.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}},e}(),sa=function(){function e(t,n,r,i,o){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:ua.EMPTY_NODE,this.right=null!=o?o:ua.EMPTY_NODE}return e.prototype.copy=function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},e.prototype.count=function(){return this.left.count()+1+this.right.count()},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},e.prototype.minKey=function(){return this.min_().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()},e.prototype.removeMin_=function(){if(this.left.isEmpty())return ua.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()},e.prototype.remove=function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return ua.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()},e.prototype.isRed_=function(){return this.color},e.prototype.fixUp_=function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e},e.prototype.moveRedLeft_=function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e},e.prototype.moveRedRight_=function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e},e.prototype.rotateLeft_=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight_=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip_=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth_=function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1},e.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)},e.RED=!0,e.BLACK=!1,e}(),aa=function(){function e(){}return e.prototype.copy=function(e,t,n,r,i){return this},e.prototype.insert=function(e,t,n){return new sa(e,t,null)},e.prototype.remove=function(e,t){return this},e.prototype.count=function(){return 0},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.check_=function(){return 0},e.prototype.isRed_=function(){return!1},e}(),ua=function(){function e(t,n){void 0===n&&(n=e.EMPTY_NODE),this.comparator_=t,this.root_=n}return e.prototype.insert=function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,sa.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,sa.BLACK,null,null))},e.prototype.get=function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null},e.prototype.getPredecessorKey=function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},e.prototype.isEmpty=function(){return this.root_.isEmpty()},e.prototype.count=function(){return this.root_.count()},e.prototype.minKey=function(){return this.root_.minKey()},e.prototype.maxKey=function(){return this.root_.maxKey()},e.prototype.inorderTraversal=function(e){return this.root_.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.root_.reverseTraversal(e)},e.prototype.getIterator=function(e){return new oa(this.root_,null,this.comparator_,!1,e)},e.prototype.getIteratorFrom=function(e,t){return new oa(this.root_,e,this.comparator_,!1,t)},e.prototype.getReverseIteratorFrom=function(e,t){return new oa(this.root_,e,this.comparator_,!0,t)},e.prototype.getReverseIterator=function(e){return new oa(this.root_,null,this.comparator_,!0,e)},e.EMPTY_NODE=new aa,e}(),la=Math.log(2),ca=function(){function e(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/la,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=e+1&r}return e.prototype.nextBitIsOne=function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e},e}(),ha=function(e,t,n,r){e.sort(t);var i=function(t,r){var o,s,a=r-t;if(0===a)return null;if(1===a)return o=e[t],s=n?n(o):o,new sa(s,o.node,sa.BLACK,null,null);var u=parseInt(a/2,10)+t,l=i(t,u),c=i(u+1,r);return o=e[u],s=n?n(o):o,new sa(s,o.node,sa.BLACK,l,c)},o=function(t){for(var r=null,o=null,s=e.length,a=function(t,r){var o=s-t,a=s;s-=t;var l=i(o+1,a),c=e[o],h=n?n(c):c;u(new sa(h,c.node,r,null,l))},u=function(e){r?(r.left=e,r=e):(o=e,r=e)},l=0;l<t.count;++l){var c=t.nextBitIsOne(),h=Math.pow(2,t.count-(l+1));c?a(h,sa.BLACK):(a(h,sa.BLACK),a(h,sa.RED))}return o}(new ca(e.length));return new ua(r||t,o)},pa={},fa=function(){function e(e,t){this.indexes_=e,this.indexSet_=t}return Object.defineProperty(e,"Default",{get:function(){return _i(pa&&ia,"ChildrenNode.ts has not been loaded"),na=na||new e({".priority":pa},{".priority":ia})},enumerable:!1,configurable:!0}),e.prototype.get=function(e){var t=Di(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ua?t:null},e.prototype.hasIndex=function(e){return Ai(this.indexSet_,e.toString())},e.prototype.addIndex=function(t,n){_i(t!==$s,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],o=!1,s=n.getIterator(zs.Wrap),a=s.getNext();a;)o=o||t.isDefinedOn(a.node),i.push(a),a=s.getNext();r=o?ha(i,t.getCompare()):pa;var u=t.toString(),l=si({},this.indexSet_);l[u]=t;var c=si({},this.indexes_);return c[u]=r,new e(c,l)},e.prototype.addToIndexes=function(t,n){var r=this;return new e(Li(this.indexes_,(function(e,i){var o=Di(r.indexSet_,i);if(_i(o,"Missing index implementation for "+i),e===pa){if(o.isDefinedOn(t.node)){for(var s=[],a=n.getIterator(zs.Wrap),u=a.getNext();u;)u.name!==t.name&&s.push(u),u=a.getNext();return s.push(t),ha(s,o.getCompare())}return pa}var l=n.get(t.name),c=e;return l&&(c=c.remove(new zs(t.name,l))),c.insert(t,t.node)})),this.indexSet_)},e.prototype.removeFromIndexes=function(t,n){return new e(Li(this.indexes_,(function(e){if(e===pa)return e;var r=n.get(t.name);return r?e.remove(new zs(t.name,r)):e})),this.indexSet_)},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function da(e,t){return Qo(e.name,t.name)}function _a(e,t){return Qo(e,t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var va=function(){function e(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&ea(this.priorityNode_),this.children_.isEmpty()&&_i(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(e,"EMPTY_NODE",{get:function(){return ra||(ra=new e(new ua(_a),null,fa.Default))},enumerable:!1,configurable:!0}),e.prototype.isLeafNode=function(){return!1},e.prototype.getPriority=function(){return this.priorityNode_||ra},e.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)},e.prototype.getImmediateChild=function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?ra:t},e.prototype.getChild=function(e){var t=ns(e);return null===t?this:this.getImmediateChild(t).getChild(is(e))},e.prototype.hasChild=function(e){return null!==this.children_.get(e)},e.prototype.updateImmediateChild=function(t,n){if(_i(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r=new zs(t,n),i=void 0,o=void 0;n.isEmpty()?(i=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(t,n),o=this.indexMap_.addToIndexes(r,this.children_));var s=i.isEmpty()?ra:this.priorityNode_;return new e(i,s,o)},e.prototype.updateChild=function(e,t){var n=ns(e);if(null===n)return t;_i(".priority"!==ns(e)||1===rs(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(is(e),t);return this.updateImmediateChild(n,r)},e.prototype.isEmpty=function(){return this.children_.isEmpty()},e.prototype.numChildren=function(){return this.children_.count()},e.prototype.val=function(t){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(ia,(function(s,a){n[s]=a.val(t),r++,o&&e.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1})),!t&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},e.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+Zs(this.getPriority().val())+":"),this.forEachChild(ia,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":ko(e)}return this.lazyHash_},e.prototype.getPredecessorChildName=function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new zs(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)},e.prototype.getFirstChildName=function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()},e.prototype.getFirstChild=function(e){var t=this.getFirstChildName(e);return t?new zs(t,this.children_.get(t)):null},e.prototype.getLastChildName=function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()},e.prototype.getLastChild=function(e){var t=this.getLastChildName(e);return t?new zs(t,this.children_.get(t)):null},e.prototype.forEachChild=function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)},e.prototype.getIterator=function(e){return this.getIteratorFrom(e.minPost(),e)},e.prototype.getIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,zs.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r},e.prototype.getReverseIterator=function(e){return this.getReverseIteratorFrom(e.maxPost(),e)},e.prototype.getReverseIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,zs.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r},e.prototype.compareTo=function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===ya?-1:0},e.prototype.withIndex=function(t){if(t===$s||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)},e.prototype.isIndexed=function(e){return e===$s||this.indexMap_.hasIndex(e)},e.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(ia),r=t.getIterator(ia),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},e.prototype.resolveIndex_=function(e){return e===$s?null:this.indexMap_.get(e.toString())},e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e}(),ya=new(function(e){function t(){return e.call(this,new ua(_a),va.EMPTY_NODE,fa.Default)||this}return oi(t,e),t.prototype.compareTo=function(e){return e===this?0:1},t.prototype.equals=function(e){return e===this},t.prototype.getPriority=function(){return this},t.prototype.getImmediateChild=function(e){return va.EMPTY_NODE},t.prototype.isEmpty=function(){return!1},t}(va));Object.defineProperties(zs,{MIN:{value:new zs(Wo,va.EMPTY_NODE)},MAX:{value:new zs(Bo,ya)}}),Gs.__EMPTY_NODE=va.EMPTY_NODE,ta.__childrenNodeConstructor=va,ws=ya,function(e){Js=e}(ya);function ga(e,t){if(void 0===t&&(t=null),null===e)return va.EMPTY_NODE;if("object"==typeof e&&".priority"in e&&(t=e[".priority"]),_i(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!=typeof e||".sv"in e)return new ta(e,ga(t));if(e instanceof Array){var n=va.EMPTY_NODE;return Go(e,(function(t,r){if(Ai(e,t)&&"."!==t.substring(0,1)){var i=ga(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(t,i))}})),n.updatePriority(ga(t))}var r=[],i=!1;if(Go(e,(function(e,t){if("."!==e.substring(0,1)){var n=ga(t);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new zs(e,n)))}})),0===r.length)return va.EMPTY_NODE;var o=ha(r,da,(function(e){return e.name}),_a);if(i){var s=ha(r,ia.getCompare());return new va(o,ga(t),new fa({".priority":s},{".priority":ia}))}return new va(o,ga(t),fa.Default)}!function(e){Xs=e}(ga);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ma=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return oi(t,e),t.prototype.compare=function(e,t){var n=e.node.compareTo(t.node);return 0===n?Qo(e.name,t.name):n},t.prototype.isDefinedOn=function(e){return!0},t.prototype.indexedValueChanged=function(e,t){return!e.equals(t)},t.prototype.minPost=function(){return zs.MIN},t.prototype.maxPost=function(){return zs.MAX},t.prototype.makePost=function(e,t){var n=ga(e);return new zs(t,n)},t.prototype.toString=function(){return".value"},t}(Ks)),ba=function(e){function t(t){var n=e.call(this)||this;return n.indexPath_=t,_i(!cs(t)&&".priority"!==ns(t),"Can't create PathIndex with empty path or .priority key"),n}return oi(t,e),t.prototype.extractChild=function(e){return e.getChild(this.indexPath_)},t.prototype.isDefinedOn=function(e){return!e.getChild(this.indexPath_).isEmpty()},t.prototype.compare=function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?Qo(e.name,t.name):i},t.prototype.makePost=function(e,t){var n=ga(e),r=va.EMPTY_NODE.updateChild(this.indexPath_,n);return new zs(t,r)},t.prototype.maxPost=function(){var e=va.EMPTY_NODE.updateChild(this.indexPath_,ya);return new zs(Bo,e)},t.prototype.toString=function(){return as(this.indexPath_,0).join("/")},t}(Ks),wa=function(){function e(e,t,n){this.node_=e,this.ref_=t,this.index_=n}return e.prototype.val=function(){return Wi("DataSnapshot.val",0,0,arguments.length),this.node_.val()},e.prototype.exportVal=function(){return Wi("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},e.prototype.toJSON=function(){return Wi("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},e.prototype.exists=function(){return Wi("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},e.prototype.child=function(t){Wi("DataSnapshot.child",0,1,arguments.length),t=String(t),Fs("DataSnapshot.child",1,t,!1);var n=new es(t),r=this.ref_.child(n);return new e(this.node_.getChild(n),r,ia)},e.prototype.hasChild=function(e){Wi("DataSnapshot.hasChild",1,1,arguments.length),Fs("DataSnapshot.hasChild",1,e,!1);var t=new es(e);return!this.node_.getChild(t).isEmpty()},e.prototype.getPriority=function(){return Wi("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},e.prototype.forEach=function(t){var n=this;if(Wi("DataSnapshot.forEach",1,1,arguments.length),Qi("DataSnapshot.forEach",1,t,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,(function(r,i){return t(new e(i,n.ref_.child(r),ia))}))},e.prototype.hasChildren=function(){return Wi("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(e.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),e.prototype.numChildren=function(){return Wi("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},e.prototype.getRef=function(){return Wi("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(e.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),e}(),Ca=function(){function e(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}return e.prototype.getPath=function(){var e=this.snapshot.getRef();return"value"===this.eventType?e.path:e.getParent().path},e.prototype.getEventType=function(){return this.eventType},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Oi(this.snapshot.exportVal())},e}(),Ea=function(){function e(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}return e.prototype.getPath=function(){return this.path},e.prototype.getEventType=function(){return"cancel"},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.path.toString()+":cancel"},e}(),Sa=function(){function e(e,t,n){this.callback_=e,this.cancelCallback_=t,this.context_=n}return e.prototype.respondsTo=function(e){return"value"===e},e.prototype.createEvent=function(e,t){var n=t.getQueryParams().getIndex();return new Ca("value",this,new wa(e.snapshotNode,t.getRef(),n))},e.prototype.getEventRunner=function(e){var t=this.context_;if("cancel"===e.getEventType()){_i(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(t,e.error)}}var r=this.callback_;return function(){r.call(t,e.snapshot)}},e.prototype.createCancelEvent=function(e,t){return this.cancelCallback_?new Ea(this,e,t):null},e.prototype.matches=function(t){return t instanceof e&&(!t.callback_||!this.callback_||t.callback_===this.callback_&&t.context_===this.context_)},e.prototype.hasAnyCallback=function(){return null!==this.callback_},e}(),Ta=function(){function e(e,t,n){this.callbacks_=e,this.cancelCallback_=t,this.context_=n}return e.prototype.respondsTo=function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,Ai(this.callbacks_,t)},e.prototype.createCancelEvent=function(e,t){return this.cancelCallback_?new Ea(this,e,t):null},e.prototype.createEvent=function(e,t){_i(null!=e.childName,"Child events should have a childName.");var n=t.getRef().child(e.childName),r=t.getQueryParams().getIndex();return new Ca(e.type,this,new wa(e.snapshotNode,n,r),e.prevName)},e.prototype.getEventRunner=function(e){var t=this.context_;if("cancel"===e.getEventType()){_i(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(t,e.error)}}var r=this.callbacks_[e.eventType];return function(){r.call(t,e.snapshot,e.prevName)}},e.prototype.matches=function(t){var n=this;if(t instanceof e){if(!this.callbacks_||!t.callbacks_)return!0;if(this.context_===t.context_){var r=Object.keys(t.callbacks_),i=Object.keys(this.callbacks_),o=r.length;if(o===i.length){if(1===o){var s=r[0],a=i[0];return!(a!==s||t.callbacks_[s]&&this.callbacks_[a]&&t.callbacks_[s]!==this.callbacks_[a])}return i.every((function(e){return t.callbacks_[e]===n.callbacks_[e]}))}}}return!1},e.prototype.hasAnyCallback=function(){return null!==this.callbacks_},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ra(e){return{type:"value",snapshotNode:e}}function xa(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Pa(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Ia(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ka,Oa=function(){function e(e){this.index_=e}return e.prototype.updateChild=function(e,t,n,r,i,o){_i(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=e.getImmediateChild(t);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?e:(null!=o&&(n.isEmpty()?e.hasChild(t)?o.trackChildChange(Pa(t,s)):_i(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?o.trackChildChange(xa(t,n)):o.trackChildChange(Ia(t,n,s))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))},e.prototype.updateFullNode=function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(ia,(function(e,r){t.hasChild(e)||n.trackChildChange(Pa(e,r))})),t.isLeafNode()||t.forEachChild(ia,(function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(Ia(t,r,i))}else n.trackChildChange(xa(t,r))}))),t.withIndex(this.index_)},e.prototype.updatePriority=function(e,t){return e.isEmpty()?va.EMPTY_NODE:e.updatePriority(t)},e.prototype.filtersNodes=function(){return!1},e.prototype.getIndexedFilter=function(){return this},e.prototype.getIndex=function(){return this.index_},e}(),Na=function(){function e(t){this.indexedFilter_=new Oa(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return e.prototype.getStartPost=function(){return this.startPost_},e.prototype.getEndPost=function(){return this.endPost_},e.prototype.matches=function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0},e.prototype.updateChild=function(e,t,n,r,i,o){return this.matches(new zs(t,n))||(n=va.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,o)},e.prototype.updateFullNode=function(e,t,n){t.isLeafNode()&&(t=va.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(va.EMPTY_NODE);var i=this;return t.forEachChild(ia,(function(e,t){i.matches(new zs(e,t))||(r=r.updateImmediateChild(e,va.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)},e.prototype.updatePriority=function(e,t){return e},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.indexedFilter_},e.prototype.getIndex=function(){return this.index_},e.getStartPost_=function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()},e.getEndPost_=function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()},e}(),Aa=function(){function e(e){this.rangedFilter_=new Na(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}return e.prototype.updateChild=function(e,t,n,r,i,o){return this.rangedFilter_.matches(new zs(t,n))||(n=va.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,o):this.fullLimitUpdateChild_(e,t,n,i,o)},e.prototype.updateFullNode=function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=va.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){r=va.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=t.withIndex(this.index_)).updatePriority(va.EMPTY_NODE);var a=void 0,u=void 0,l=void 0;i=void 0;if(this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var c=this.index_.getCompare();l=function(e,t){return c(t,e)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),l=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();){s=i.getNext();!h&&l(a,s)<=0&&(h=!0),h&&o<this.limit_&&l(s,u)<=0?o++:r=r.updateImmediateChild(s.name,va.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)},e.prototype.updatePriority=function(e,t){return e},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},e.prototype.getIndex=function(){return this.index_},e.prototype.fullLimitUpdateChild_=function(e,t,n,r,i){var o;if(this.reverse_){var s=this.index_.getCompare();o=function(e,t){return s(t,e)}}else o=this.index_.getCompare();var a=e;_i(a.numChildren()===this.limit_,"");var u=new zs(t,n),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),c=this.rangedFilter_.matches(u);if(a.hasChild(t)){for(var h=a.getImmediateChild(t),p=r.getChildAfterChild(this.index_,l,this.reverse_);null!=p&&(p.name===t||a.hasChild(p.name));)p=r.getChildAfterChild(this.index_,p,this.reverse_);var f=null==p?1:o(p,u);if(c&&!n.isEmpty()&&f>=0)return null!=i&&i.trackChildChange(Ia(t,n,h)),a.updateImmediateChild(t,n);null!=i&&i.trackChildChange(Pa(t,h));var d=a.updateImmediateChild(t,va.EMPTY_NODE);return null!=p&&this.rangedFilter_.matches(p)?(null!=i&&i.trackChildChange(xa(p.name,p.node)),d.updateImmediateChild(p.name,p.node)):d}return n.isEmpty()?e:c&&o(l,u)>=0?(null!=i&&(i.trackChildChange(Pa(l.name,l.node)),i.trackChildChange(xa(t,n))),a.updateImmediateChild(t,n).updateImmediateChild(l.name,va.EMPTY_NODE)):e},e}(),Da=function(){function e(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ia}return e.prototype.hasStart=function(){return this.startSet_},e.prototype.hasStartAfter=function(){return this.startAfterSet_},e.prototype.hasEndBefore=function(){return this.endBeforeSet_},e.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},e.prototype.getIndexStartValue=function(){return _i(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},e.prototype.getIndexStartName=function(){return _i(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Wo},e.prototype.hasEnd=function(){return this.endSet_},e.prototype.getIndexEndValue=function(){return _i(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},e.prototype.getIndexEndName=function(){return _i(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Bo},e.prototype.hasLimit=function(){return this.limitSet_},e.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},e.prototype.getLimit=function(){return _i(this.limitSet_,"Only valid if limit has been set"),this.limit_},e.prototype.getIndex=function(){return this.index_},e.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},e.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===ia},e.prototype.copy=function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fa(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}function La(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}function Ma(e,t,n){var r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Ua(e,t,n){var r;if(e.index_===$s)"string"==typeof t&&(t=Vs(t)),r=Ma(e,t,n);else{r=Ma(e,t,null==n?Bo:Vs(n))}return r.startAfterSet_=!0,r}function ja(e,t,n){var r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function qa(e,t,n){var r;return e.index_===$s?("string"==typeof t&&(t=Hs(t)),r=ja(e,t,n)):r=ja(e,t,null==n?Wo:Hs(n)),r.endBeforeSet_=!0,r}function Wa(e,t){var n=e.copy();return n.index_=t,n}function Ba(e){var t,n={};return e.isDefault()||(e.index_===ia?t="$priority":e.index_===ma?t="$value":e.index_===$s?t="$key":(_i(e.index_ instanceof ba,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=Oi(t),e.startSet_&&(n.startAt=Oi(e.indexStartValue_),e.startNameSet_&&(n.startAt+=","+Oi(e.indexStartName_))),e.endSet_&&(n.endAt=Oi(e.indexEndValue_),e.endNameSet_&&(n.endAt+=","+Oi(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_)),n}var Qa=function(){function e(e,t,n,r){this.repo=e,this.path=t,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(e,"__referenceConstructor",{get:function(){return _i(ka,"Reference.ts has not been loaded"),ka},set:function(e){ka=e},enumerable:!1,configurable:!0}),e.validateQueryEndpoints_=function(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===$s){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==Wo)throw new Error(r);if("string"!=typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==Bo)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(e.getIndex()===ia){if(null!=t&&!Ps(t)||null!=n&&!Ps(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(_i(e.getIndex()instanceof ba||e.getIndex()===ma,"unknown index type."),null!=t&&"object"==typeof t||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")},e.validateLimit_=function(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")},e.prototype.validateNoPreviousOrderByCall_=function(e){if(!0===this.orderByCalled_)throw new Error(e+": You can't combine multiple orderBy calls.")},e.prototype.getQueryParams=function(){return this.queryParams_},e.prototype.getRef=function(){return Wi("Query.ref",0,0,arguments.length),new e.__referenceConstructor(this.repo,this.path)},e.prototype.on=function(t,n,r,i){Wi("Query.on",2,4,arguments.length),As("Query.on",1,t,!1),Qi("Query.on",2,n,!1);var o=e.getCancelAndContextArgs_("Query.on",r,i);if("value"===t)this.onValueEvent(n,o.cancel,o.context);else{var s={};s[t]=n,this.onChildEvent(s,o.cancel,o.context)}return n},e.prototype.onValueEvent=function(e,t,n){var r=new Sa(e,t||null,n||null);this.repo.addEventCallbackForQuery(this,r)},e.prototype.onChildEvent=function(e,t,n){var r=new Ta(e,t,n);this.repo.addEventCallbackForQuery(this,r)},e.prototype.off=function(e,t,n){Wi("Query.off",0,3,arguments.length),As("Query.off",1,e,!0),Qi("Query.off",2,t,!0),Vi("Query.off",3,n,!0);var r=null,i=null;if("value"===e){var o=t||null;r=new Sa(o,null,n||null)}else e&&(t&&((i={})[e]=t),r=new Ta(i,null,n||null));this.repo.removeEventCallbackForQuery(this,r)},e.prototype.get=function(){return this.repo.getValue(this)},e.prototype.once=function(t,n,r,i){var o=this;Wi("Query.once",1,4,arguments.length),As("Query.once",1,t,!1),Qi("Query.once",2,n,!0);var s=e.getCancelAndContextArgs_("Query.once",r,i),a=!0,u=new Ci;u.promise.catch((function(){}));var l=function(e){a&&(a=!1,o.off(t,l),n&&n.bind(s.context)(e),u.resolve(e))};return this.on(t,l,(function(e){o.off(t,l),s.cancel&&s.cancel.bind(s.context)(e),u.reject(e)})),u.promise},e.prototype.limitToFirst=function(t){if(Wi("Query.limitToFirst",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new e(this.repo,this.path,Fa(this.queryParams_,t),this.orderByCalled_)},e.prototype.limitToLast=function(t){if(Wi("Query.limitToLast",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new e(this.repo,this.path,La(this.queryParams_,t),this.orderByCalled_)},e.prototype.orderByChild=function(t){if(Wi("Query.orderByChild",1,1,arguments.length),"$key"===t)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===t)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===t)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');Fs("Query.orderByChild",1,t,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new es(t);if(cs(n))throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new ba(n),i=Wa(this.queryParams_,r);return e.validateQueryEndpoints_(i),new e(this.repo,this.path,i,!0)},e.prototype.orderByKey=function(){Wi("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var t=Wa(this.queryParams_,$s);return e.validateQueryEndpoints_(t),new e(this.repo,this.path,t,!0)},e.prototype.orderByPriority=function(){Wi("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var t=Wa(this.queryParams_,ia);return e.validateQueryEndpoints_(t),new e(this.repo,this.path,t,!0)},e.prototype.orderByValue=function(){Wi("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var t=Wa(this.queryParams_,ma);return e.validateQueryEndpoints_(t),new e(this.repo,this.path,t,!0)},e.prototype.startAt=function(t,n){void 0===t&&(t=null),Wi("Query.startAt",0,2,arguments.length),Is("Query.startAt",1,t,this.path,!0),Ds("Query.startAt",2,n,!0);var r=Ma(this.queryParams_,t,n);if(e.validateLimit_(r),e.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===t&&(t=null,n=null),new e(this.repo,this.path,r,this.orderByCalled_)},e.prototype.startAfter=function(t,n){void 0===t&&(t=null),Wi("Query.startAfter",0,2,arguments.length),Is("Query.startAfter",1,t,this.path,!1),Ds("Query.startAfter",2,n,!0);var r=Ua(this.queryParams_,t,n);if(e.validateLimit_(r),e.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAfter: Starting point was already set (by another call to startAt, startAfter or equalTo).");return new e(this.repo,this.path,r,this.orderByCalled_)},e.prototype.endAt=function(t,n){void 0===t&&(t=null),Wi("Query.endAt",0,2,arguments.length),Is("Query.endAt",1,t,this.path,!0),Ds("Query.endAt",2,n,!0);var r=ja(this.queryParams_,t,n);if(e.validateLimit_(r),e.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new e(this.repo,this.path,r,this.orderByCalled_)},e.prototype.endBefore=function(t,n){void 0===t&&(t=null),Wi("Query.endBefore",0,2,arguments.length),Is("Query.endBefore",1,t,this.path,!1),Ds("Query.endBefore",2,n,!0);var r=qa(this.queryParams_,t,n);if(e.validateLimit_(r),e.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endBefore: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new e(this.repo,this.path,r,this.orderByCalled_)},e.prototype.equalTo=function(e,t){if(Wi("Query.equalTo",1,2,arguments.length),Is("Query.equalTo",1,e,this.path,!1),Ds("Query.equalTo",2,t,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return this.startAt(e,t).endAt(e,t)},e.prototype.toString=function(){return Wi("Query.toString",0,0,arguments.length),this.repo.toString()+ss(this.path)},e.prototype.toJSON=function(){return Wi("Query.toJSON",0,1,arguments.length),this.toString()},e.prototype.queryObject=function(){return function(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==ia&&(t.i=e.index_.toString()),t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this.queryParams_)},e.prototype.queryIdentifier=function(){var e=this.queryObject(),t=zo(e);return"{}"===t?"default":t},e.prototype.isEqual=function(t){if(Wi("Query.isEqual",1,1,arguments.length),!(t instanceof e)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===t.repo,i=fs(this.path,t.path),o=this.queryIdentifier()===t.queryIdentifier();return r&&i&&o},e.getCancelAndContextArgs_=function(e,t,n){var r={cancel:null,context:null};if(t&&n)r.cancel=t,Qi(e,3,r.cancel,!0),r.context=n,Vi(e,4,r.context,!0);else if(t)if("object"==typeof t&&null!==t)r.context=t;else{if("function"!=typeof t)throw new Error(Bi(e,3,!0)+" must either be a cancel callback or a context object.");r.cancel=t}return r},Object.defineProperty(e.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),e}(),Va=function(){function e(e){this.node_=e}return e.prototype.getImmediateChild=function(t){return new e(this.node_.getImmediateChild(t))},e.prototype.node=function(){return this.node_},e}(),Ha=function(){function e(e,t){this.syncTree_=e,this.path_=t}return e.prototype.getImmediateChild=function(t){var n=ls(this.path_,t);return new e(this.syncTree_,n)},e.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},e}(),za=function(e,t,n){return e&&"object"==typeof e?(_i(".sv"in e,"Unexpected leaf node or priority contents"),"string"==typeof e[".sv"]?Ka(e[".sv"],t,n):"object"==typeof e[".sv"]?Ga(e[".sv"],t):void _i(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},Ka=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:_i(!1,"Unexpected server value: "+e)}},Ga=function(e,t,n){e.hasOwnProperty("increment")||_i(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!=typeof r&&_i(!1,"Unexpected increment value: "+r);var i=t.node();if(_i(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var o=i.getValue();return"number"!=typeof o?r:o+r},$a=function(e,t,n,r){return Xa(t,new Ha(n,e),r)},Ya=function(e,t,n){return Xa(e,new Va(t),n)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xa(e,t,n){var r,i=e.getPriority().val(),o=za(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var s=e,a=za(s.getValue(),t,n);return a!==s.getValue()||o!==s.getPriority().val()?new ta(a,ga(o)):e}var u=e;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new ta(o))),u.forEachChild(ia,(function(e,i){var o=Xa(i,t.getImmediateChild(e),n);o!==i&&(r=r.updateImmediateChild(e,o))})),r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ja,Za,eu=function(){function e(){this.value=null,this.children=new Map}return e.prototype.find=function(e){if(null!=this.value)return this.value.getChild(e);if(!cs(e)&&this.children.size>0){var t=ns(e);return e=is(e),this.children.has(t)?this.children.get(t).find(e):null}return null},e.prototype.remember=function(t,n){if(cs(t))this.value=n,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(t,n);else{var r=ns(t);this.children.has(r)||this.children.set(r,new e);var i=this.children.get(r);t=is(t),i.remember(t,n)}},e.prototype.forget=function(e){if(cs(e))return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var t=this.value;this.value=null;var n=this;return t.forEachChild(ia,(function(e,t){n.remember(new es(e),t)})),this.forget(e)}if(this.children.size>0){var r=ns(e);if(e=is(e),this.children.has(r))this.children.get(r).forget(e)&&this.children.delete(r);return 0===this.children.size}return!0},e.prototype.forEachTree=function(e,t){null!==this.value?t(e,this.value):this.forEachChild((function(n,r){var i=new es(e.toString()+"/"+n);r.forEachTree(i,t)}))},e.prototype.forEachChild=function(e){this.children.forEach((function(t,n){e(n,t)}))},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tu(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(Za=Ja||(Ja={}))[Za.OVERWRITE=0]="OVERWRITE",Za[Za.MERGE=1]="MERGE",Za[Za.ACK_USER_WRITE=2]="ACK_USER_WRITE",Za[Za.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";var nu,ru=function(){function e(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=Ja.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return e.prototype.operationForChild=function(t){if(cs(this.path)){if(null!=this.affectedTree.value)return _i(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new es(t));return new e(ts(),n,this.revert)}return _i(ns(this.path)===t,"operationForChild called for unrelated child."),new e(is(this.path),this.affectedTree,this.revert)},e}(),iu=function(){function e(e,t){void 0===t&&(nu||(nu=new ua(Vo)),t=nu),this.value=e,this.children=t}return e.fromObject=function(t){var n=new e(null);return Go(t,(function(e,t){n=n.set(new es(e),t)})),n},e.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},e.prototype.findRootMostMatchingPathAndValue=function(e,t){if(null!=this.value&&t(this.value))return{path:ts(),value:this.value};if(cs(e))return null;var n=ns(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(is(e),t);return null!=i?{path:ls(new es(n),i.path),value:i.value}:null}return null},e.prototype.findRootMostValueAndPath=function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))},e.prototype.subtree=function(t){if(cs(t))return this;var n=ns(t),r=this.children.get(n);return null!==r?r.subtree(is(t)):new e(null)},e.prototype.set=function(t,n){if(cs(t))return new e(n,this.children);var r=ns(t),i=(this.children.get(r)||new e(null)).set(is(t),n),o=this.children.insert(r,i);return new e(this.value,o)},e.prototype.remove=function(t){if(cs(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=ns(t),r=this.children.get(n);if(r){var i=r.remove(is(t)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new e(null):new e(this.value,o)}return this},e.prototype.get=function(e){if(cs(e))return this.value;var t=ns(e),n=this.children.get(t);return n?n.get(is(e)):null},e.prototype.setTree=function(t,n){if(cs(t))return n;var r=ns(t),i=(this.children.get(r)||new e(null)).setTree(is(t),n),o=void 0;return o=i.isEmpty()?this.children.remove(r):this.children.insert(r,i),new e(this.value,o)},e.prototype.fold=function(e){return this.fold_(ts(),e)},e.prototype.fold_=function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(ls(e,r),t)})),t(e,this.value,n)},e.prototype.findOnPath=function(e,t){return this.findOnPath_(e,ts(),t)},e.prototype.findOnPath_=function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(cs(e))return null;var i=ns(e),o=this.children.get(i);return o?o.findOnPath_(is(e),ls(t,i),n):null},e.prototype.foreachOnPath=function(e,t){return this.foreachOnPath_(e,ts(),t)},e.prototype.foreachOnPath_=function(t,n,r){if(cs(t))return this;this.value&&r(n,this.value);var i=ns(t),o=this.children.get(i);return o?o.foreachOnPath_(is(t),ls(n,i),r):new e(null)},e.prototype.foreach=function(e){this.foreach_(ts(),e)},e.prototype.foreach_=function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(ls(e,n),t)})),this.value&&t(e,this.value)},e.prototype.foreachChild=function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))},e}(),ou=function(){function e(e,t){this.source=e,this.path=t,this.type=Ja.LISTEN_COMPLETE}return e.prototype.operationForChild=function(t){return cs(this.path)?new e(this.source,ts()):new e(this.source,is(this.path))},e}(),su=function(){function e(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=Ja.OVERWRITE}return e.prototype.operationForChild=function(t){return cs(this.path)?new e(this.source,ts(),this.snap.getImmediateChild(t)):new e(this.source,is(this.path),this.snap)},e}(),au=function(){function e(e,t,n){this.source=e,this.path=t,this.children=n,this.type=Ja.MERGE}return e.prototype.operationForChild=function(t){if(cs(this.path)){var n=this.children.subtree(new es(t));return n.isEmpty()?null:n.value?new su(this.source,ts(),n.value):new e(this.source,ts(),n)}return _i(ns(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,is(this.path),this.children)},e.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},e}(),uu=function(){function e(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}return e.prototype.isFullyInitialized=function(){return this.fullyInitialized_},e.prototype.isFiltered=function(){return this.filtered_},e.prototype.isCompleteForPath=function(e){if(cs(e))return this.isFullyInitialized()&&!this.filtered_;var t=ns(e);return this.isCompleteForChild(t)},e.prototype.isCompleteForChild=function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)},e.prototype.getNode=function(){return this.node_},e}(),lu=function(){function e(e,t){this.eventCache_=e,this.serverCache_=t}return e.prototype.updateEventSnap=function(t,n,r){return new e(new uu(t,n,r),this.serverCache_)},e.prototype.updateServerSnap=function(t,n,r){return new e(this.eventCache_,new uu(t,n,r))},e.prototype.getEventCache=function(){return this.eventCache_},e.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},e.prototype.getServerCache=function(){return this.serverCache_},e.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},e}(),cu=function(){function e(){this.changeMap=new Map}return e.prototype.trackChildChange=function(e){var t=e.type,n=e.childName;_i("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),_i(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,Ia(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,Pa(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,xa(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw vi("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,Ia(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)},e.prototype.getChanges=function(){return Array.from(this.changeMap.values())},e}(),hu=new(function(){function e(){}return e.prototype.getCompleteChild=function(e){return null},e.prototype.getChildAfterChild=function(e,t,n){return null},e}()),pu=function(){function e(e,t,n){void 0===n&&(n=null),this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}return e.prototype.getCompleteChild=function(e){var t=this.viewCache_.getEventCache();if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new uu(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(e,n)},e.prototype.getChildAfterChild=function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,t,1,n,e);return 0===i.length?null:i[0]},e}(),fu=function(e,t){this.viewCache=e,this.changes=t},du=function(){function e(e){this.filter_=e}return e.prototype.assertIndexed=function(e){_i(e.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),_i(e.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},e.prototype.applyOperation=function(t,n,r,i){var o,s,a=new cu;if(n.type===Ja.OVERWRITE){var u=n;u.source.fromUser?o=this.applyUserOverwrite_(t,u.path,u.snap,r,i,a):(_i(u.source.fromServer,"Unknown source."),s=u.source.tagged||t.getServerCache().isFiltered()&&!cs(u.path),o=this.applyServerOverwrite_(t,u.path,u.snap,r,i,s,a))}else if(n.type===Ja.MERGE){var l=n;l.source.fromUser?o=this.applyUserMerge_(t,l.path,l.children,r,i,a):(_i(l.source.fromServer,"Unknown source."),s=l.source.tagged||t.getServerCache().isFiltered(),o=this.applyServerMerge_(t,l.path,l.children,r,i,s,a))}else if(n.type===Ja.ACK_USER_WRITE){var c=n;o=c.revert?this.revertUserWrite_(t,c.path,r,i,a):this.ackUserWrite_(t,c.path,c.affectedTree,r,i,a)}else{if(n.type!==Ja.LISTEN_COMPLETE)throw vi("Unknown operation type: "+n.type);o=this.listenComplete_(t,n.path,r,a)}var h=a.getChanges();return e.maybeAddValueEvent_(t,o,h),new fu(o,h)},e.maybeAddValueEvent_=function(e,t,n){var r=t.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=e.getCompleteEventSnap();(n.length>0||!e.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(Ra(t.getCompleteEventSnap()))}},e.prototype.generateEventCacheAfterServerEvent_=function(e,t,n,r,i){var o=e.getEventCache();if(null!=n.shadowingWrite(t))return e;var s=void 0,a=void 0;if(cs(t))if(_i(e.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),e.getServerCache().isFiltered()){var u=e.getCompleteServerSnap(),l=u instanceof va?u:va.EMPTY_NODE,c=n.calcCompleteEventChildren(l);s=this.filter_.updateFullNode(e.getEventCache().getNode(),c,i)}else{var h=n.calcCompleteEventCache(e.getCompleteServerSnap());s=this.filter_.updateFullNode(e.getEventCache().getNode(),h,i)}else{var p=ns(t);if(".priority"===p){_i(1===rs(t),"Can't have a priority with additional path components");var f=o.getNode();a=e.getServerCache().getNode();var d=n.calcEventCacheAfterServerOverwrite(t,f,a);s=null!=d?this.filter_.updatePriority(f,d):o.getNode()}else{var _=is(t),v=void 0;if(o.isCompleteForChild(p)){a=e.getServerCache().getNode();var y=n.calcEventCacheAfterServerOverwrite(t,o.getNode(),a);v=null!=y?o.getNode().getImmediateChild(p).updateChild(_,y):o.getNode().getImmediateChild(p)}else v=n.calcCompleteChild(p,e.getServerCache());s=null!=v?this.filter_.updateChild(o.getNode(),p,v,_,r,i):o.getNode()}}return e.updateEventSnap(s,o.isFullyInitialized()||cs(t),this.filter_.filtersNodes())},e.prototype.applyServerOverwrite_=function(e,t,n,r,i,o,s){var a,u=e.getServerCache(),l=o?this.filter_:this.filter_.getIndexedFilter();if(cs(t))a=l.updateFullNode(u.getNode(),n,null);else if(l.filtersNodes()&&!u.isFiltered()){var c=u.getNode().updateChild(t,n);a=l.updateFullNode(u.getNode(),c,null)}else{var h=ns(t);if(!u.isCompleteForPath(t)&&rs(t)>1)return e;var p=is(t),f=u.getNode().getImmediateChild(h).updateChild(p,n);a=".priority"===h?l.updatePriority(u.getNode(),f):l.updateChild(u.getNode(),h,f,p,hu,null)}var d=e.updateServerSnap(a,u.isFullyInitialized()||cs(t),l.filtersNodes()),_=new pu(r,d,i);return this.generateEventCacheAfterServerEvent_(d,t,r,_,s)},e.prototype.applyUserOverwrite_=function(e,t,n,r,i,o){var s,a,u=e.getEventCache(),l=new pu(r,e,i);if(cs(t))a=this.filter_.updateFullNode(e.getEventCache().getNode(),n,o),s=e.updateEventSnap(a,!0,this.filter_.filtersNodes());else{var c=ns(t);if(".priority"===c)a=this.filter_.updatePriority(e.getEventCache().getNode(),n),s=e.updateEventSnap(a,u.isFullyInitialized(),u.isFiltered());else{var h=is(t),p=u.getNode().getImmediateChild(c),f=void 0;if(cs(h))f=n;else{var d=l.getCompleteChild(c);f=null!=d?".priority"===os(h)&&d.getChild(us(h)).isEmpty()?d:d.updateChild(h,n):va.EMPTY_NODE}if(p.equals(f))s=e;else{var _=this.filter_.updateChild(u.getNode(),c,f,h,l,o);s=e.updateEventSnap(_,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return s},e.cacheHasChild_=function(e,t){return e.getEventCache().isCompleteForChild(t)},e.prototype.applyUserMerge_=function(t,n,r,i,o,s){var a=this,u=t;return r.foreach((function(r,l){var c=ls(n,r);e.cacheHasChild_(t,ns(c))&&(u=a.applyUserOverwrite_(u,c,l,i,o,s))})),r.foreach((function(r,l){var c=ls(n,r);e.cacheHasChild_(t,ns(c))||(u=a.applyUserOverwrite_(u,c,l,i,o,s))})),u},e.prototype.applyMerge_=function(e,t){return t.foreach((function(t,n){e=e.updateChild(t,n)})),e},e.prototype.applyServerMerge_=function(e,t,n,r,i,o,s){var a=this;if(e.getServerCache().getNode().isEmpty()&&!e.getServerCache().isFullyInitialized())return e;var u,l=e;u=cs(t)?n:new iu(null).setTree(t,n);var c=e.getServerCache().getNode();return u.children.inorderTraversal((function(t,n){if(c.hasChild(t)){var u=e.getServerCache().getNode().getImmediateChild(t),h=a.applyMerge_(u,n);l=a.applyServerOverwrite_(l,new es(t),h,r,i,o,s)}})),u.children.inorderTraversal((function(t,n){var u=!e.getServerCache().isCompleteForChild(t)&&null==n.value;if(!c.hasChild(t)&&!u){var h=e.getServerCache().getNode().getImmediateChild(t),p=a.applyMerge_(h,n);l=a.applyServerOverwrite_(l,new es(t),p,r,i,o,s)}})),l},e.prototype.ackUserWrite_=function(e,t,n,r,i,o){if(null!=r.shadowingWrite(t))return e;var s=e.getServerCache().isFiltered(),a=e.getServerCache();if(null!=n.value){if(cs(t)&&a.isFullyInitialized()||a.isCompleteForPath(t))return this.applyServerOverwrite_(e,t,a.getNode().getChild(t),r,i,s,o);if(cs(t)){var u=new iu(null);return a.getNode().forEachChild($s,(function(e,t){u=u.set(new es(e),t)})),this.applyServerMerge_(e,t,u,r,i,s,o)}return e}var l=new iu(null);return n.foreach((function(e,n){var r=ls(t,e);a.isCompleteForPath(r)&&(l=l.set(e,a.getNode().getChild(r)))})),this.applyServerMerge_(e,t,l,r,i,s,o)},e.prototype.listenComplete_=function(e,t,n,r){var i=e.getServerCache(),o=e.updateServerSnap(i.getNode(),i.isFullyInitialized()||cs(t),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,t,n,hu,r)},e.prototype.revertUserWrite_=function(e,t,n,r,i){var o;if(null!=n.shadowingWrite(t))return e;var s=new pu(n,e,r),a=e.getEventCache().getNode(),u=void 0;if(cs(t)||".priority"===ns(t)){var l=void 0;if(e.getServerCache().isFullyInitialized())l=n.calcCompleteEventCache(e.getCompleteServerSnap());else{var c=e.getServerCache().getNode();_i(c instanceof va,"serverChildren would be complete if leaf node"),l=n.calcCompleteEventChildren(c)}l=l,u=this.filter_.updateFullNode(a,l,i)}else{var h=ns(t),p=n.calcCompleteChild(h,e.getServerCache());null==p&&e.getServerCache().isCompleteForChild(h)&&(p=a.getImmediateChild(h)),(u=null!=p?this.filter_.updateChild(a,h,p,is(t),s,i):e.getEventCache().getNode().hasChild(h)?this.filter_.updateChild(a,h,va.EMPTY_NODE,is(t),s,i):a).isEmpty()&&e.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(e.getCompleteServerSnap())).isLeafNode()&&(u=this.filter_.updateFullNode(u,o,i))}return o=e.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(ts()),e.updateEventSnap(u,o,this.filter_.filtersNodes())},e}(),_u=function(e){this.query_=e,this.index_=this.query_.getQueryParams().getIndex()};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vu(e,t,n,r,i,o){var s=r.filter((function(e){return e.type===n}));s.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw vi("Should only compare child_ events.");var r=new zs(t.childName,t.snapshotNode),i=new zs(n.childName,n.snapshotNode);return e.index_.compare(r,i)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e,t,n)})),s.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,o);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}var yu,gu=function(){function e(e,t){this.query_=e,this.eventRegistrations_=[];var n,r=this.query_.getQueryParams(),i=new Oa(r.getIndex()),o=(n=r).loadsAllData()?new Oa(n.getIndex()):n.hasLimit()?new Aa(n):new Na(n);this.processor_=new du(o);var s=t.getServerCache(),a=t.getEventCache(),u=i.updateFullNode(va.EMPTY_NODE,s.getNode(),null),l=o.updateFullNode(va.EMPTY_NODE,a.getNode(),null),c=new uu(u,s.isFullyInitialized(),i.filtersNodes()),h=new uu(l,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=new lu(h,c),this.eventGenerator_=new _u(this.query_)}return e.prototype.getQuery=function(){return this.query_},e.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},e.prototype.getCompleteNode=function(){return this.viewCache_.getCompleteEventSnap()},e.prototype.getCompleteServerCache=function(e){var t=this.viewCache_.getCompleteServerSnap();return t&&(this.query_.getQueryParams().loadsAllData()||!cs(e)&&!t.getImmediateChild(ns(e)).isEmpty())?t.getChild(e):null},e.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},e.prototype.addEventRegistration=function(e){this.eventRegistrations_.push(e)},e.prototype.removeEventRegistration=function(e,t){var n=[];if(t){_i(null==e,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach((function(e){var i=e.createCancelEvent(t,r);i&&n.push(i)}))}if(e){for(var i=[],o=0;o<this.eventRegistrations_.length;++o){var s=this.eventRegistrations_[o];if(s.matches(e)){if(e.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(o+1));break}}else i.push(s)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},e.prototype.applyOperation=function(e,t,n){e.type===Ja.MERGE&&null!==e.source.queryId&&(_i(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),_i(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,e,t,n);return this.processor_.assertIndexed(i.viewCache),_i(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},e.prototype.getInitialEvents=function(e){var t=this.viewCache_.getEventCache(),n=[];t.getNode().isLeafNode()||t.getNode().forEachChild(ia,(function(e,t){n.push(xa(e,t))}));return t.isFullyInitialized()&&n.push(Ra(t.getNode())),this.generateEventsForChanges_(n,t.getNode(),e)},e.prototype.generateEventsForChanges_=function(e,t,n){var r=n?[n]:this.eventRegistrations_;return function(e,t,n,r){var i=[],o=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),vu(e,i,"child_removed",t,r,n),vu(e,i,"child_added",t,r,n),vu(e,i,"child_moved",o,r,n),vu(e,i,"child_changed",t,r,n),vu(e,i,"value",t,r,n),i}(this.eventGenerator_,e,t,r)},e}(),mu=function(){function e(){this.views=new Map}return Object.defineProperty(e,"__referenceConstructor",{get:function(){return _i(yu,"Reference.ts has not been loaded"),yu},set:function(e){_i(!yu,"__referenceConstructor has already been defined"),yu=e},enumerable:!1,configurable:!0}),e.prototype.isEmpty=function(){return 0===this.views.size},e.prototype.applyOperation=function(e,t,n){var r,i,o=e.source.queryId;if(null!==o){var s=this.views.get(o);return _i(null!=s,"SyncTree gave us an op for an invalid query."),s.applyOperation(e,t,n)}var a=[];try{for(var u=li(this.views.values()),l=u.next();!l.done;l=u.next()){s=l.value;a=a.concat(s.applyOperation(e,t,n))}}catch(c){r={error:c}}finally{try{l&&!l.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return a},e.prototype.getView=function(e,t,n,r){var i=e.queryIdentifier(),o=this.views.get(i);if(!o){var s=t.calcCompleteEventCache(r?n:null),a=!1;s?a=!0:n instanceof va?(s=t.calcCompleteEventChildren(n),a=!1):(s=va.EMPTY_NODE,a=!1);var u=new lu(new uu(s,a,!1),new uu(n,r,!1));return new gu(e,u)}return o},e.prototype.addEventRegistration=function(e,t,n,r,i){var o=this.getView(e,n,r,i);return this.views.has(e.queryIdentifier())||this.views.set(e.queryIdentifier(),o),o.addEventRegistration(t),o.getInitialEvents(t)},e.prototype.removeEventRegistration=function(t,n,r){var i,o,s=t.queryIdentifier(),a=[],u=[],l=this.hasCompleteView();if("default"===s)try{for(var c=li(this.views.entries()),h=c.next();!h.done;h=c.next()){var p=ci(h.value,2),f=p[0],d=p[1];u=u.concat(d.removeEventRegistration(n,r)),d.isEmpty()&&(this.views.delete(f),d.getQuery().getQueryParams().loadsAllData()||a.push(d.getQuery()))}}catch(_){i={error:_}}finally{try{h&&!h.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}else(d=this.views.get(s))&&(u=u.concat(d.removeEventRegistration(n,r)),d.isEmpty()&&(this.views.delete(s),d.getQuery().getQueryParams().loadsAllData()||a.push(d.getQuery())));return l&&!this.hasCompleteView()&&a.push(new e.__referenceConstructor(t.repo,t.path)),{removed:a,events:u}},e.prototype.getQueryViews=function(){var e,t,n=[];try{for(var r=li(this.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;o.getQuery().getQueryParams().loadsAllData()||n.push(o)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},e.prototype.getCompleteServerCache=function(e){var t,n,r=null;try{for(var i=li(this.views.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r||s.getCompleteServerCache(e)}}catch(a){t={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r},e.prototype.viewForQuery=function(e){if(e.getQueryParams().loadsAllData())return this.getCompleteView();var t=e.queryIdentifier();return this.views.get(t)},e.prototype.viewExistsForQuery=function(e){return null!=this.viewForQuery(e)},e.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},e.prototype.getCompleteView=function(){var e,t;try{for(var n=li(this.views.values()),r=n.next();!r.done;r=n.next()){var i=r.value;if(i.getQuery().getQueryParams().loadsAllData())return i}}catch(o){e={error:o}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return null},e}(),bu=function(){function e(e){this.writeTree_=e}return e.empty=function(){return new e(new iu(null))},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wu(e,t,n){if(cs(t))return new bu(new iu(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,o=r.value,s=hs(i,t);return o=o.updateChild(s,n),new bu(e.writeTree_.set(i,o))}var a=new iu(n),u=e.writeTree_.setTree(t,a);return new bu(u)}function Cu(e,t,n){var r=e;return Go(n,(function(e,n){r=wu(r,ls(t,e),n)})),r}function Eu(e,t){if(cs(t))return bu.empty();var n=e.writeTree_.setTree(t,new iu(null));return new bu(n)}function Su(e,t){return null!=Tu(e,t)}function Tu(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(hs(n.path,t)):null}function Ru(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(ia,(function(e,n){t.push(new zs(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new zs(e,n.value))})),t}function xu(e,t){if(cs(t))return e;var n=Tu(e,t);return new bu(null!=n?new iu(n):e.writeTree_.subtree(t))}function Pu(e){return e.writeTree_.isEmpty()}function Iu(e,t){return ku(ts(),e.writeTree_,t)}function ku(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(_i(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=ku(ls(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(ls(e,".priority"),r)),n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ou=function(){function e(){this.visibleWrites_=bu.empty(),this.allWrites_=[],this.lastWriteId_=-1}return e.prototype.childWrites=function(e){return new Nu(e,this)},e.prototype.addOverwrite=function(e,t,n,r){_i(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:e,snap:t,writeId:n,visible:r}),r&&(this.visibleWrites_=wu(this.visibleWrites_,e,t)),this.lastWriteId_=n},e.prototype.addMerge=function(e,t,n){_i(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:e,children:t,writeId:n,visible:!0}),this.visibleWrites_=Cu(this.visibleWrites_,e,t),this.lastWriteId_=n},e.prototype.getWrite=function(e){for(var t=0;t<this.allWrites_.length;t++){var n=this.allWrites_[t];if(n.writeId===e)return n}return null},e.prototype.removeWrite=function(e){var t=this,n=this.allWrites_.findIndex((function(t){return t.writeId===e}));_i(n>=0,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);for(var i=r.visible,o=!1,s=this.allWrites_.length-1;i&&s>=0;){var a=this.allWrites_[s];a.visible&&(s>=n&&this.recordContainsPath_(a,r.path)?i=!1:ds(r.path,a.path)&&(o=!0)),s--}if(i){if(o)return this.resetTree_(),!0;r.snap?this.visibleWrites_=Eu(this.visibleWrites_,r.path):Go(r.children,(function(e){t.visibleWrites_=Eu(t.visibleWrites_,ls(r.path,e))}));return!0}return!1},e.prototype.getCompleteWriteData=function(e){return Tu(this.visibleWrites_,e)},e.prototype.calcCompleteEventCache=function(t,n,r,i){if(r||i){var o=xu(this.visibleWrites_,t);if(!i&&Pu(o))return n;if(i||null!=n||Su(o,ts())){return Iu(e.layerTree_(this.allWrites_,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(ds(e.path,t)||ds(t,e.path))}),t),n||va.EMPTY_NODE)}return null}var s=Tu(this.visibleWrites_,t);if(null!=s)return s;var a=xu(this.visibleWrites_,t);return Pu(a)?n:null!=n||Su(a,ts())?Iu(a,n||va.EMPTY_NODE):null},e.prototype.calcCompleteEventChildren=function(e,t){var n=va.EMPTY_NODE,r=Tu(this.visibleWrites_,e);if(r)return r.isLeafNode()||r.forEachChild(ia,(function(e,t){n=n.updateImmediateChild(e,t)})),n;if(t){var i=xu(this.visibleWrites_,e);return t.forEachChild(ia,(function(e,t){var r=Iu(xu(i,new es(e)),t);n=n.updateImmediateChild(e,r)})),Ru(i).forEach((function(e){n=n.updateImmediateChild(e.name,e.node)})),n}return Ru(xu(this.visibleWrites_,e)).forEach((function(e){n=n.updateImmediateChild(e.name,e.node)})),n},e.prototype.calcEventCacheAfterServerOverwrite=function(e,t,n,r){_i(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=ls(e,t);if(Su(this.visibleWrites_,i))return null;var o=xu(this.visibleWrites_,i);return Pu(o)?r.getChild(t):Iu(o,r.getChild(t))},e.prototype.calcCompleteChild=function(e,t,n){var r=ls(e,t),i=Tu(this.visibleWrites_,r);return null!=i?i:n.isCompleteForChild(t)?Iu(xu(this.visibleWrites_,r),n.getNode().getImmediateChild(t)):null},e.prototype.shadowingWrite=function(e){return Tu(this.visibleWrites_,e)},e.prototype.calcIndexedSlice=function(e,t,n,r,i,o){var s,a=xu(this.visibleWrites_,e),u=Tu(a,ts());if(null!=u)s=u;else{if(null==t)return[];s=Iu(a,t)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var l=[],c=o.getCompare(),h=i?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),p=h.getNext();p&&l.length<r;)0!==c(p,n)&&l.push(p),p=h.getNext();return l},e.prototype.recordContainsPath_=function(e,t){if(e.snap)return ds(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&ds(ls(e.path,n),t))return!0;return!1},e.prototype.resetTree_=function(){this.visibleWrites_=e.layerTree_(this.allWrites_,e.DefaultFilter_,ts()),this.allWrites_.length>0?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},e.DefaultFilter_=function(e){return e.visible},e.layerTree_=function(e,t,n){for(var r=bu.empty(),i=0;i<e.length;++i){var o=e[i];if(t(o)){var s=o.path,a=void 0;if(o.snap)ds(n,s)?r=wu(r,a=hs(n,s),o.snap):ds(s,n)&&(a=hs(s,n),r=wu(r,ts(),o.snap.getChild(a)));else{if(!o.children)throw vi("WriteRecord should have .snap or .children");if(ds(n,s))r=Cu(r,a=hs(n,s),o.children);else if(ds(s,n))if(cs(a=hs(s,n)))r=Cu(r,ts(),o.children);else{var u=Di(o.children,ns(a));if(u){var l=u.getChild(is(a));r=wu(r,ts(),l)}}}}}return r},e}(),Nu=function(){function e(e,t){this.treePath_=e,this.writeTree_=t}return e.prototype.calcCompleteEventCache=function(e,t,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,e,t,n)},e.prototype.calcCompleteEventChildren=function(e){return this.writeTree_.calcCompleteEventChildren(this.treePath_,e)},e.prototype.calcEventCacheAfterServerOverwrite=function(e,t,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,e,t,n)},e.prototype.shadowingWrite=function(e){return this.writeTree_.shadowingWrite(ls(this.treePath_,e))},e.prototype.calcIndexedSlice=function(e,t,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,e,t,n,r,i)},e.prototype.calcCompleteChild=function(e,t){return this.writeTree_.calcCompleteChild(this.treePath_,e,t)},e.prototype.child=function(t){return new e(ls(this.treePath_,t),this.writeTree_)},e}(),Au=function(){function e(e){this.listenProvider_=e,this.syncPointTree_=new iu(null),this.pendingWriteTree_=new Ou,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return e.prototype.applyUserOverwrite=function(e,t,n,r){return this.pendingWriteTree_.addOverwrite(e,t,n,r),r?this.applyOperationToSyncPoints_(new su({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]},e.prototype.applyUserMerge=function(e,t,n){this.pendingWriteTree_.addMerge(e,t,n);var r=iu.fromObject(t);return this.applyOperationToSyncPoints_(new au({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,r))},e.prototype.ackUserWrite=function(e,t){void 0===t&&(t=!1);var n=this.pendingWriteTree_.getWrite(e);if(this.pendingWriteTree_.removeWrite(e)){var r=new iu(null);return null!=n.snap?r=r.set(ts(),!0):Go(n.children,(function(e){r=r.set(new es(e),!0)})),this.applyOperationToSyncPoints_(new ru(n.path,r,t))}return[]},e.prototype.applyServerOverwrite=function(e,t){return this.applyOperationToSyncPoints_(new su({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))},e.prototype.applyServerMerge=function(e,t){var n=iu.fromObject(t);return this.applyOperationToSyncPoints_(new au({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))},e.prototype.applyListenComplete=function(e){return this.applyOperationToSyncPoints_(new ou({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))},e.prototype.applyTaggedQueryOverwrite=function(t,n,r){var i=this.queryKeyForTag_(r);if(null!=i){var o=e.parseQueryKey_(i),s=o.path,a=o.queryId,u=hs(s,t),l=new su(tu(a),u,n);return this.applyTaggedOperation_(s,l)}return[]},e.prototype.applyTaggedQueryMerge=function(t,n,r){var i=this.queryKeyForTag_(r);if(i){var o=e.parseQueryKey_(i),s=o.path,a=o.queryId,u=hs(s,t),l=iu.fromObject(n),c=new au(tu(a),u,l);return this.applyTaggedOperation_(s,c)}return[]},e.prototype.applyTaggedListenComplete=function(t,n){var r=this.queryKeyForTag_(n);if(r){var i=e.parseQueryKey_(r),o=i.path,s=i.queryId,a=hs(o,t),u=new ou(tu(s),a);return this.applyTaggedOperation_(o,u)}return[]},e.prototype.addEventRegistration=function(t,n){var r=t.path,i=null,o=!1;this.syncPointTree_.foreachOnPath(r,(function(e,t){var n=hs(e,r);i=i||t.getCompleteServerCache(n),o=o||t.hasCompleteView()}));var s,a=this.syncPointTree_.get(r);(a?(o=o||a.hasCompleteView(),i=i||a.getCompleteServerCache(ts())):(a=new mu,this.syncPointTree_=this.syncPointTree_.set(r,a)),null!=i)?s=!0:(s=!1,i=va.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild((function(e,t){var n=t.getCompleteServerCache(ts());n&&(i=i.updateImmediateChild(e,n))})));var u=a.viewExistsForQuery(t);if(!u&&!t.getQueryParams().loadsAllData()){var l=e.makeQueryKey_(t);_i(!this.queryToTagMap.has(l),"View does not exist, but we have a tag");var c=e.getNextQueryTag_();this.queryToTagMap.set(l,c),this.tagToQueryMap.set(c,l)}var h=this.pendingWriteTree_.childWrites(r),p=a.addEventRegistration(t,n,h,i,s);if(!u&&!o){var f=a.viewForQuery(t);p=p.concat(this.setupListener_(t,f))}return p},e.prototype.removeEventRegistration=function(t,n,r){var i=this,o=t.path,s=this.syncPointTree_.get(o),a=[];if(s&&("default"===t.queryIdentifier()||s.viewExistsForQuery(t))){var u=s.removeEventRegistration(t,n,r);s.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var l=u.removed;a=u.events;var c=-1!==l.findIndex((function(e){return e.getQueryParams().loadsAllData()})),h=this.syncPointTree_.findOnPath(o,(function(e,t){return t.hasCompleteView()}));if(c&&!h){var p=this.syncPointTree_.subtree(o);if(!p.isEmpty())for(var f=this.collectDistinctViewsForSubTree_(p),d=0;d<f.length;++d){var _=f[d],v=_.getQuery(),y=this.createListenerForView_(_);this.listenProvider_.startListening(e.queryForListening_(v),this.tagForQuery_(v),y.hashFn,y.onComplete)}}if(!h&&l.length>0&&!r)if(c){this.listenProvider_.stopListening(e.queryForListening_(t),null)}else l.forEach((function(t){var n=i.queryToTagMap.get(e.makeQueryKey_(t));i.listenProvider_.stopListening(e.queryForListening_(t),n)}));this.removeTags_(l)}return a},e.prototype.calcCompleteEventCache=function(e,t){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(e,(function(t,n){var r=hs(t,e),i=n.getCompleteServerCache(r);if(i)return i}));return n.calcCompleteEventCache(e,r,t,!0)},e.prototype.getServerValue=function(e){var t=e.path,n=null;this.syncPointTree_.foreachOnPath(t,(function(e,r){var i=hs(e,t);n=n||r.getCompleteServerCache(i)}));var r=this.syncPointTree_.get(t);r?n=n||r.getCompleteServerCache(ts()):(r=new mu,this.syncPointTree_=this.syncPointTree_.set(t,r));var i=null!=n,o=i?new uu(n,!0,!1):null,s=this.pendingWriteTree_.childWrites(e.path);return r.getView(e,s,i?o.getNode():va.EMPTY_NODE,i).getCompleteNode()},e.prototype.collectDistinctViewsForSubTree_=function(e){return e.fold((function(e,t,n){if(t&&t.hasCompleteView())return[t.getCompleteView()];var r=[];return t&&(r=t.getQueryViews()),Go(n,(function(e,t){r=r.concat(t)})),r}))},e.prototype.removeTags_=function(t){for(var n=0;n<t.length;++n){var r=t[n];if(!r.getQueryParams().loadsAllData()){var i=e.makeQueryKey_(r),o=this.queryToTagMap.get(i);this.queryToTagMap.delete(i),this.tagToQueryMap.delete(o)}}},e.queryForListening_=function(e){return e.getQueryParams().loadsAllData()&&!e.getQueryParams().isDefault()?e.getRef():e},e.prototype.setupListener_=function(t,n){var r=t.path,i=this.tagForQuery_(t),o=this.createListenerForView_(n),s=this.listenProvider_.startListening(e.queryForListening_(t),i,o.hashFn,o.onComplete),a=this.syncPointTree_.subtree(r);if(i)_i(!a.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var u=a.fold((function(e,t,n){if(!cs(e)&&t&&t.hasCompleteView())return[t.getCompleteView().getQuery()];var r=[];return t&&(r=r.concat(t.getQueryViews().map((function(e){return e.getQuery()})))),Go(n,(function(e,t){r=r.concat(t)})),r})),l=0;l<u.length;++l){var c=u[l];this.listenProvider_.stopListening(e.queryForListening_(c),this.tagForQuery_(c))}return s},e.prototype.createListenerForView_=function(e){var t=this,n=e.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(e.getServerCache()||va.EMPTY_NODE).hash()},onComplete:function(e){if("ok"===e)return r?t.applyTaggedListenComplete(n.path,r):t.applyListenComplete(n.path);var i=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var r=new Error(e+" at "+t.path.toString()+": "+n);return r.code=e.toUpperCase(),r}(e,n);return t.removeEventRegistration(n,null,i)}}},e.makeQueryKey_=function(e){return e.path.toString()+"$"+e.queryIdentifier()},e.parseQueryKey_=function(e){var t=e.indexOf("$");return _i(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new es(e.substr(0,t))}},e.prototype.queryKeyForTag_=function(e){return this.tagToQueryMap.get(e)},e.prototype.tagForQuery_=function(t){var n=e.makeQueryKey_(t);return this.queryToTagMap.get(n)},e.getNextQueryTag_=function(){return e.nextQueryTag_++},e.prototype.applyTaggedOperation_=function(e,t){var n=this.syncPointTree_.get(e);_i(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(e);return n.applyOperation(t,r,null)},e.prototype.applyOperationToSyncPoints_=function(e){return this.applyOperationHelper_(e,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(ts()))},e.prototype.applyOperationHelper_=function(e,t,n,r){if(cs(e.path))return this.applyOperationDescendantsHelper_(e,t,n,r);var i=t.get(ts());null==n&&null!=i&&(n=i.getCompleteServerCache(ts()));var o=[],s=ns(e.path),a=e.operationForChild(s),u=t.children.get(s);if(u&&a){var l=n?n.getImmediateChild(s):null,c=r.child(s);o=o.concat(this.applyOperationHelper_(a,u,l,c))}return i&&(o=o.concat(i.applyOperation(e,r,n))),o},e.prototype.applyOperationDescendantsHelper_=function(e,t,n,r){var i=this,o=t.get(ts());null==n&&null!=o&&(n=o.getCompleteServerCache(ts()));var s=[];return t.children.inorderTraversal((function(t,o){var a=n?n.getImmediateChild(t):null,u=r.child(t),l=e.operationForChild(t);l&&(s=s.concat(i.applyOperationDescendantsHelper_(l,o,a,u)))})),o&&(s=s.concat(o.applyOperation(e,r,n))),s},e.nextQueryTag_=1,e}(),Du=function(){function e(){this.rootNode_=va.EMPTY_NODE}return e.prototype.getNode=function(e){return this.rootNode_.getChild(e)},e.prototype.updateSnapshot=function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)},e}(),Fu=function(){function e(){this.counters_={}}return e.prototype.incrementCounter=function(e,t){void 0===t&&(t=1),Ai(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t},e.prototype.get=function(){return bi(this.counters_)},e}(),Lu=function(){function e(){}return e.getCollection=function(e){var t=e.toString();return this.collections_[t]||(this.collections_[t]=new Fu),this.collections_[t]},e.getOrCreateReporter=function(e,t){var n=e.toString();return this.reporters_[n]||(this.reporters_[n]=t()),this.reporters_[n]},e.collections_={},e.reporters_={},e}(),Mu=function(){function e(e){this.collection_=e,this.last_=null}return e.prototype.get=function(){var e=this.collection_.get(),t=si({},e);return this.last_&&Go(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t},e}(),Uu=function(){function e(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Mu(e);var n=1e4+2e4*Math.random();Zo(this.reportStats_.bind(this),Math.floor(n))}return e.prototype.includeStat=function(e){this.statsToReport_[e]=!0},e.prototype.reportStats_=function(){var e=this,t=this.statsListener_.get(),n={},r=!1;Go(t,(function(t,i){i>0&&Ai(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),Zo(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},e}(),ju=function(){this.eventLists_=[],this.recursionDepth_=0};function qu(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],o=i.getPath();null===n||fs(o,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&e.eventLists_.push(n)}function Wu(e,t,n){qu(e,n),Qu(e,(function(e){return fs(e,t)}))}function Bu(e,t,n){qu(e,n),Qu(e,(function(e){return ds(e,t)||ds(t,e)}))}function Qu(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(Vu(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function Vu(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();No&&Fo("event: "+n.toString()),Jo(r)}}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hu=function(){function e(e){this.allowedEvents_=e,this.listeners_={},_i(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}return e.prototype.trigger=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Array.isArray(this.listeners_[e]))for(var r=hi(this.listeners_[e]),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)},e.prototype.on=function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)},e.prototype.off=function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)},e.prototype.validateEventType_=function(e){_i(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)},e}(),zu=function(e){function t(){var t,n,r=e.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",t="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",t="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",t="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",t="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var e=!document[t];e!==r.visible_&&(r.visible_=e,r.trigger("visible",e))}),!1),r}return oi(t,e),t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(e){return _i("visible"===e,"Unknown event type: "+e),[this.visible_]},t}(Hu),Ku=function(e){function t(){var t=e.call(this,["online"])||this;return t.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Ei()||(window.addEventListener("online",(function(){t.online_||(t.online_=!0,t.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){t.online_&&(t.online_=!1,t.trigger("online",!1))}),!1)),t}return oi(t,e),t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(e){return _i("online"===e,"Unknown event type: "+e),[this.online_]},t.prototype.currentlyOnline=function(){return this.online_},t}(Hu),Gu=function(){function e(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return e.prototype.closeAfter=function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},e.prototype.handleResponse=function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var t=function(t){e[t]&&Jo((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum];){if("break"===r())break}},e}(),$u=function(){function e(e,t,n,r,i){this.connId=e,this.repoInfo=t,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Lo(e),this.stats_=Lu.getCollection(t),this.urlFn=function(e){return t.connectionURL("long_polling",e)}}return e.prototype.open=function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Gu(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if("complete"===document.readyState)e();else{var t=!1,n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new Yu((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=ci(e,5),i=r[0],o=r[1],s=r[2];if(r[3],r[4],n.incrementIncomingBytes_(e),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,"start"===i)n.id=o,n.password=s;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=ci(e,2),i=r[0],o=r[1];n.incrementIncomingBytes_(e),n.myPacketOrderer.handleResponse(i,o)}),(function(){n.onClosed_()}),n.urlFn);var e={start:"t"};e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v="5",n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),"undefined"!=typeof location&&location.hostname&&vs.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))},e.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},e.forceAllow=function(){e.forceAllow_=!0},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){return!!e.forceAllow_||!(e.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI)},e.prototype.markConnectionHealthy=function(){},e.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},e.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},e.prototype.send=function(e){var t=Oi(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n,r=(n=yi(t),gi.encodeByteArray(n,!0)),i=Ko(r,1840),o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++},e.prototype.addDisconnectPingFrame=function(e,t){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)},e.prototype.incrementIncomingBytes_=function(e){var t=Oi(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)},e}(),Yu=function(){function e(t,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,this.uniqueCallbackIdentifier=Io(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(o='<script>document.domain="'+document.domain+'";<\/script>');var s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){Fo("frame writing exception"),a.stack&&Fo(a.stack),Fo(a)}}return e.createIFrame_=function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Fo("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e},e.prototype.close=function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())},e.prototype.startLongPoll=function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););},e.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1},e.prototype.enqueueSegment=function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()},e.prototype.addLongPollTag_=function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))},e.prototype.addTag=function(e,t){var n=this;setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){Fo("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))},e}(),Xu="";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ju(e){Xu=e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zu=null;"undefined"!=typeof MozWebSocket?Zu=MozWebSocket:"undefined"!=typeof WebSocket&&(Zu=WebSocket);var el,tl,nl=function(){function e(t,n,r,i,o){this.connId=t,this.applicationId=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Lo(this.connId),this.stats_=Lu.getCollection(n),this.connURL=e.connectionURL_(n,i,o),this.nodeAdmin=n.nodeAdmin}return e.connectionURL_=function(e,t,n){var r={v:"5"};return"undefined"!=typeof location&&location.hostname&&vs.test(location.hostname)&&(r.r="f"),t&&(r.s=t),n&&(r.ls=n),e.connectionURL("websocket",r)},e.prototype.open=function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ro.set("previous_websocket_failure",!0);try{if(Ti());else{var r={headers:{"X-Firebase-GMPID":this.applicationId||""}};this.mySock=new Zu(this.connURL,[],r)}}catch(o){this.log_("Error instantiating WebSocket.");var i=o.message||o.data;return i&&this.log_(i),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}},e.prototype.start=function(){},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){var t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==Zu&&!e.forceDisallow_},e.previouslyFailed=function(){return Ro.isInMemoryStorage||!0===Ro.get("previous_websocket_failure")},e.prototype.markConnectionHealthy=function(){Ro.remove("previous_websocket_failure")},e.prototype.appendFrame_=function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=ki(t);this.onMessage(n)}},e.prototype.handleNewFrameCount_=function(e){this.totalFrames=e,this.frames=[]},e.prototype.extractFrameCount_=function(e){if(_i(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e},e.prototype.handleIncomingFrame=function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}},e.prototype.send=function(e){this.resetKeepAlive();var t=Oi(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=Ko(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},e.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},e.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},e.prototype.resetKeepAlive=function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))},e.prototype.sendString_=function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4,e}(),rl=function(){function e(e){this.initTransports_(e)}return Object.defineProperty(e,"ALL_TRANSPORTS",{get:function(){return[$u,nl]},enumerable:!1,configurable:!0}),e.prototype.initTransports_=function(t){var n,r,i=nl&&nl.isAvailable(),o=i&&!nl.previouslyFailed();if(t.webSocketOnly&&(i||jo("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[nl];else{var s=this.transports_=[];try{for(var a=li(e.ALL_TRANSPORTS),u=a.next();!u.done;u=a.next()){var l=u.value;l&&l.isAvailable()&&s.push(l)}}catch(c){n={error:c}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}},e.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},e.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},e}(),il=function(){function e(e,t,n,r,i,o,s,a){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Lo("c:"+this.id+":"),this.transportManager_=new rl(t),this.log_("Connection created"),this.start_()}return e.prototype.start_=function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=Zo((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))},e.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},e.prototype.disconnReceiver_=function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}},e.prototype.connReceiver_=function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}},e.prototype.sendRequest=function(e){var t={t:"d",d:e};this.sendData_(t)},e.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},e.prototype.onSecondaryControl_=function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},e.prototype.onSecondaryMessageReceived_=function(e){var t=Ho("t",e),n=Ho("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}},e.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},e.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},e.prototype.onPrimaryMessageReceived_=function(e){var t=Ho("t",e),n=Ho("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)},e.prototype.onDataMessage_=function(e){this.onPrimaryResponse_(),this.onMessage_(e)},e.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},e.prototype.onControl_=function(e){var t=Ho("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?Mo("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Mo("Unknown control packet command: "+t)}},e.prototype.onHandshake_=function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==n&&jo("Protocol version mismatch detected"),this.tryStartUpgrade_())},e.prototype.tryStartUpgrade_=function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)},e.prototype.startUpgrade_=function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Zo((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))},e.prototype.onReset_=function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.updateHost(e),1===this.state_?this.close():(this.closeConnections_(),this.start_())},e.prototype.onConnectionEstablished_=function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Zo((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},e.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},e.prototype.onSecondaryConnectionLost_=function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()},e.prototype.onConnectionLost_=function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ro.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},e.prototype.onConnectionShutdown_=function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()},e.prototype.sendData_=function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)},e.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},e.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},e}(),ol=function(){function e(){}return e.prototype.put=function(e,t,n,r){},e.prototype.merge=function(e,t,n,r){},e.prototype.refreshAuthToken=function(e){},e.prototype.onDisconnectPut=function(e,t,n){},e.prototype.onDisconnectMerge=function(e,t,n){},e.prototype.onDisconnectCancel=function(e,t){},e.prototype.reportStats=function(e){},e}(),sl=function(e){function t(n,r,i,o,s,a,u){var l=e.call(this)||this;if(l.repoInfo_=n,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=o,l.onServerInfoUpdate_=s,l.authTokenProvider_=a,l.authOverride_=u,l.id=t.nextPersistentConnectionId_++,l.log_=Lo("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=1e3,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,u&&!Ti())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return l.scheduleConnect_(0),zu.getInstance().on("visible",l.onVisible_,l),-1===n.host.indexOf("fblocal")&&Ku.getInstance().on("online",l.onOnline_,l),l}return oi(t,e),t.prototype.sendRequest=function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(Oi(i)),_i(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},t.prototype.get=function(e){var t=this,n=new Ci,r={p:e.path.toString(),q:e.queryObject()},i={action:"g",request:r,onComplete:function(e){var i=e.d;"ok"===e.s?(t.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var o=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var e=t.outstandingGets_[o];void 0!==e&&i===e&&(delete t.outstandingGets_[o],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),t.log_("get "+o+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(o),n.promise},t.prototype.listen=function(e,t,n,r){var i=e.queryIdentifier(),o=e.path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),_i(e.getQueryParams().isDefault()||!e.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),_i(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");var s={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(o).set(i,s),this.connected_&&this.sendListen_(s)},t.prototype.sendGet_=function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))},t.prototype.sendListen_=function(e){var n=this,r=e.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var s={p:i};e.tag&&(s.q=r.queryObject(),s.t=e.tag),s.h=e.hashFn(),this.sendRequest("q",s,(function(s){var a=s.d,u=s.s;t.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===e&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),e.onComplete&&e.onComplete(u,a))}))},t.warnOnListenWarnings_=function(e,t){if(e&&"object"==typeof e&&Ai(e,"w")){var n=Di(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t.getQueryParams().getIndex().toString()+'"',i=t.path.toString();jo("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},t.prototype.refreshAuthToken=function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)},t.prototype.reduceReconnectDelayIfAdminCredential_=function(e){var t;(e&&40===e.length||"object"==typeof(t=Ni(e).claims)&&!0===t.admin)&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},t.prototype.tryAuth=function(){var e,t=this;if(this.connected_&&this.authToken_){var n=this.authToken_,r=(e=Ni(n).claims)&&"object"==typeof e&&e.hasOwnProperty("iat")?"auth":"gauth",i={cred:n};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,(function(e){var r=e.s,i=e.d||"error";t.authToken_===n&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))}))}},t.prototype.unlisten=function(e,t){var n=e.path.toString(),r=e.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),_i(e.getQueryParams().isDefault()||!e.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e.queryObject(),t)},t.prototype.sendUnlisten_=function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},t.prototype.onDisconnectPut=function(e,t,n){this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})},t.prototype.onDisconnectMerge=function(e,t,n){this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})},t.prototype.onDisconnectCancel=function(e,t){this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})},t.prototype.sendOnDisconnect_=function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))},t.prototype.put=function(e,t,n,r){this.putInternal("p",e,t,n,r)},t.prototype.merge=function(e,t,n,r){this.putInternal("m",e,t,n,r)},t.prototype.putInternal=function(e,t,n,r,i){var o={p:t,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;var s=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(s):this.log_("Buffering put: "+t)},t.prototype.sendPut_=function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))},t.prototype.reportStats=function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}},t.prototype.onDataMessage_=function(e){if("r"in e){this.log_("from server: "+Oi(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}},t.prototype.onDataPush_=function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):Mo("Unrecognized action received from server: "+Oi(e)+"\nAre you using the latest client?")},t.prototype.onReady_=function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},t.prototype.scheduleConnect_=function(e){var t=this;_i(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))},t.prototype.onVisible_=function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=e},t.prototype.onOnline_=function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},t.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},t.prototype.establishConnection_=function(){var e=this;if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+t.nextConnectionId_++,s=this,a=this.lastSessionId,u=!1,l=null,c=function(){l?l.close():(u=!0,i())};this.realtime_={close:c,sendRequest:function(e){_i(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(e)}};var h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(h).then((function(e){u?Fo("getToken() completed but was canceled"):(Fo("getToken() completed. Creating connection."),s.authToken_=e&&e.accessToken,l=new il(o,s.repoInfo_,s.applicationId_,n,r,i,(function(e){jo(e+" ("+s.repoInfo_.toString()+")"),s.interrupt("server_kill")}),a))})).then(null,(function(t){s.log_("Failed to get token: "+t),u||(e.repoInfo_.nodeAdmin&&jo(t),c())}))}},t.prototype.interrupt=function(e){Fo("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},t.prototype.resume=function(e){Fo("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Fi(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))},t.prototype.handleTimestamp_=function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})},t.prototype.cancelSentTransactions_=function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},t.prototype.onListenRevoked_=function(e,t){var n;n=t?t.map((function(e){return zo(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")},t.prototype.removeListen_=function(e,t){var n,r=new es(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n},t.prototype.onAuthRevoked_=function(e,t){Fo("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},t.prototype.onSecurityDebugPacket_=function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))},t.prototype.restoreState_=function(){var e,t,n,r;this.tryAuth();try{for(var i=li(this.listens.values()),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,li(s.values())),u=a.next();!u.done;u=a.next()){var l=u.value;this.sendListen_(l)}}catch(p){n={error:p}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(f){e={error:f}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}for(var c=0;c<this.outstandingPuts_.length;c++)this.outstandingPuts_[c]&&this.sendPut_(c);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(c=0;c<this.outstandingGets_.length;c++)this.outstandingGets_[c]&&this.sendGet_(c)},t.prototype.sendConnectStats_=function(){var e={};e["sdk.js."+Xu.replace(/\./g,"-")]=1,Ei()?e["framework.cordova"]=1:"object"==typeof navigator&&"ReactNative"===navigator.product&&(e["framework.reactnative"]=1),this.reportStats(e)},t.prototype.shouldReconnect_=function(){var e=Ku.getInstance().currentlyOnline();return Fi(this.interruptReasons_)&&e},t.nextPersistentConnectionId_=0,t.nextConnectionId_=0,t}(ol),al=function(e){function t(t,n,r){var i=e.call(this)||this;return i.repoInfo_=t,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=Lo("p:rest:"),i.listens_={},i}return oi(t,e),t.prototype.reportStats=function(e){throw new Error("Method not implemented.")},t.getListenId_=function(e,t){return void 0!==t?"tag$"+t:(_i(e.getQueryParams().isDefault(),"should have a tag if it's not a default query."),e.path.toString())},t.prototype.listen=function(e,n,r,i){var o=this,s=e.path.toString();this.log_("Listen called for "+s+" "+e.queryIdentifier());var a=t.getListenId_(e,r),u={};this.listens_[a]=u;var l=Ba(e.getQueryParams());this.restRequest_(s+".json",l,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&o.onDataUpdate_(s,n,!1,r),Di(o.listens_,a)===u)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))},t.prototype.unlisten=function(e,n){var r=t.getListenId_(e,n);delete this.listens_[r]},t.prototype.get=function(e){var t=this,n=Ba(e.getQueryParams()),r=e.path.toString(),i=new Ci;return this.restRequest_(r+".json",n,(function(e,n){var o=n;404===e&&(o=null,e=null),null===e?(t.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))})),i.promise},t.prototype.refreshAuthToken=function(e){},t.prototype.restRequest_=function(e,t,n){var r=this;void 0===t&&(t={}),t.format="export",this.authTokenProvider_.getToken(!1).then((function(i){var o=i&&i.accessToken;o&&(t.auth=o);var s=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+e+"?ns="+r.repoInfo_.namespace+function(e){for(var t=[],n=function(e,n){Array.isArray(n)?n.forEach((function(n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))})):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))},r=0,i=Object.entries(e);r<i.length;r++){var o=i[r];n(o[0],o[1])}return t.length?"&"+t.join("&"):""}(t);r.log_("Sending REST request for "+s);var a=new XMLHttpRequest;a.onreadystatechange=function(){if(n&&4===a.readyState){r.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);var e=null;if(a.status>=200&&a.status<300){try{e=ki(a.responseText)}catch(t){jo("Failed to parse JSON response for "+s+": "+a.responseText)}n(null,e)}else 401!==a.status&&404!==a.status&&jo("Got unsuccessful REST response for "+s+" Status: "+a.status),n(a.status);n=null}},a.open("GET",s,!0),a.send()}))},t}(ol),ul=function(){this.children={},this.childCount=0,this.value=null},ll=function(){function e(e,t,n){void 0===e&&(e=""),void 0===t&&(t=null),void 0===n&&(n=new ul),this.name_=e,this.parent_=t,this.node_=n}return e.prototype.subTree=function(t){for(var n=t instanceof es?t:new es(t),r=this,i=ns(n);null!==i;){r=new e(i,r,Di(r.node_.children,i)||new ul),i=ns(n=is(n))}return r},e.prototype.getValue=function(){return this.node_.value},e.prototype.setValue=function(e){_i(void 0!==e,"Cannot set value to undefined"),this.node_.value=e,this.updateParents_()},e.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},e.prototype.hasChildren=function(){return this.node_.childCount>0},e.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},e.prototype.forEachChild=function(t){var n=this;Go(this.node_.children,(function(r,i){t(new e(r,n,i))}))},e.prototype.forEachDescendant=function(e,t,n){t&&!n&&e(this),this.forEachChild((function(t){t.forEachDescendant(e,!0,n)})),t&&n&&e(this)},e.prototype.forEachAncestor=function(e,t){for(var n=t?this:this.parent();null!==n;){if(e(n))return!0;n=n.parent()}return!1},e.prototype.forEachImmediateDescendantWithValue=function(e){this.forEachChild((function(t){null!==t.getValue()?e(t):t.forEachImmediateDescendantWithValue(e)}))},e.prototype.path=function(){return new es(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},e.prototype.name=function(){return this.name_},e.prototype.parent=function(){return this.parent_},e.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},e.prototype.updateChild_=function(e,t){var n=t.isEmpty(),r=Ai(this.node_.children,e);n&&r?(delete this.node_.children[e],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[e]=t.node_,this.node_.childCount++,this.updateParents_())},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(tl=el||(el={}))[tl.RUN=0]="RUN",tl[tl.SENT=1]="SENT",tl[tl.COMPLETED=2]="COMPLETED",tl[tl.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",tl[tl.NEEDS_ABORT=4]="NEEDS_ABORT";var cl=function(){function e(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.app=n,this.authTokenProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ju,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new eu,this.transactionQueueTree_=new ll,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return e.prototype.start=function(){var e=this;if(this.stats_=Lu.getCollection(this.repoInfo_),this.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)this.server_=new al(this.repoInfo_,this.onDataUpdate_.bind(this),this.authTokenProvider_),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var t=this.app.options.databaseAuthVariableOverride;if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Oi(t)}catch(n){throw new Error("Invalid authOverride provided: "+n)}}this.persistentConnection_=new sl(this.repoInfo_,this.app.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),this.authTokenProvider_,t),this.server_=this.persistentConnection_}this.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),this.statsReporter_=Lu.getOrCreateReporter(this.repoInfo_,(function(){return new Uu(e.stats_,e.server_)})),this.infoData_=new Du,this.infoSyncTree_=new Au({startListening:function(t,n,r,i){var o=[],s=e.infoData_.getNode(t.path);return s.isEmpty()||(o=e.infoSyncTree_.applyServerOverwrite(t.path,s),setTimeout((function(){i("ok")}),0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new Au({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var o=i(n,r);Bu(e.eventQueue_,t.path,o)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})},e.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},e.prototype.name=function(){return this.repoInfo_.namespace},e.prototype.serverTime=function(){var e=this.infoData_.getNode(new es(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e},e.prototype.generateServerValues=function(){return(e=(e={timestamp:this.serverTime()})||{}).timestamp=e.timestamp||(new Date).getTime(),e;var e},e.prototype.onDataUpdate_=function(e,t,n,r){this.dataUpdateCount++;var i=new es(e);t=this.interceptServerDataCallback_?this.interceptServerDataCallback_(e,t):t;var o=[];if(r)if(n){var s=Li(t,(function(e){return ga(e)}));o=this.serverSyncTree_.applyTaggedQueryMerge(i,s,r)}else{var a=ga(t);o=this.serverSyncTree_.applyTaggedQueryOverwrite(i,a,r)}else if(n){var u=Li(t,(function(e){return ga(e)}));o=this.serverSyncTree_.applyServerMerge(i,u)}else{var l=ga(t);o=this.serverSyncTree_.applyServerOverwrite(i,l)}var c=i;o.length>0&&(c=this.rerunTransactions_(i)),Bu(this.eventQueue_,c,o)},e.prototype.interceptServerData_=function(e){this.interceptServerDataCallback_=e},e.prototype.onConnectStatus_=function(e){this.updateInfo_("connected",e),!1===e&&this.runOnDisconnectEvents_()},e.prototype.onServerInfoUpdate_=function(e){var t=this;Go(e,(function(e,n){t.updateInfo_(e,n)}))},e.prototype.updateInfo_=function(e,t){var n=new es("/.info/"+e),r=ga(t);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);Bu(this.eventQueue_,n,i)},e.prototype.getNextWriteId_=function(){return this.nextWriteId_++},e.prototype.getValue=function(e){var t=this,n=this.serverSyncTree_.getServerValue(e);return null!=n?Promise.resolve(new wa(n,e.getRef(),e.getQueryParams().getIndex())):this.server_.get(e).then((function(n){var r=ga(n),i=t.serverSyncTree_.applyServerOverwrite(e.path,r);return Wu(t.eventQueue_,e.path,i),Promise.resolve(new wa(r,e.getRef(),e.getQueryParams().getIndex()))}),(function(n){return t.log_("get for query "+Oi(e)+" failed: "+n),Promise.reject(new Error(n))}))},e.prototype.setWithPriority=function(e,t,n,r){var i=this;this.log_("set",{path:e.toString(),value:t,priority:n});var o=this.generateServerValues(),s=ga(t,n),a=this.serverSyncTree_.calcCompleteEventCache(e),u=Ya(s,a,o),l=this.getNextWriteId_(),c=this.serverSyncTree_.applyUserOverwrite(e,u,l,!0);qu(this.eventQueue_,c),this.server_.put(e.toString(),s.val(!0),(function(t,n){var o="ok"===t;o||jo("set at "+e+" failed: "+t);var s=i.serverSyncTree_.ackUserWrite(l,!o);Bu(i.eventQueue_,e,s),i.callOnCompleteCallback(r,t,n)}));var h=this.abortTransactions_(e);this.rerunTransactions_(h),Bu(this.eventQueue_,h,[])},e.prototype.update=function(e,t,n){var r=this;this.log_("update",{path:e.toString(),value:t});var i=!0,o=this.generateServerValues(),s={};if(Go(t,(function(t,n){i=!1,s[t]=$a(ls(e,t),ga(n),r.serverSyncTree_,o)})),i)Fo("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var a=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserMerge(e,s,a);qu(this.eventQueue_,u),this.server_.merge(e.toString(),t,(function(t,i){var o="ok"===t;o||jo("update at "+e+" failed: "+t);var s=r.serverSyncTree_.ackUserWrite(a,!o),u=s.length>0?r.rerunTransactions_(e):e;Bu(r.eventQueue_,u,s),r.callOnCompleteCallback(n,t,i)})),Go(t,(function(t){var n=r.abortTransactions_(ls(e,t));r.rerunTransactions_(n)})),Bu(this.eventQueue_,e,[])}},e.prototype.runOnDisconnectEvents_=function(){var e=this;this.log_("onDisconnectEvents");var t=this.generateServerValues(),n=new eu;this.onDisconnect_.forEachTree(ts(),(function(r,i){var o=$a(r,i,e.serverSyncTree_,t);n.remember(r,o)}));var r=[];n.forEachTree(ts(),(function(t,n){r=r.concat(e.serverSyncTree_.applyServerOverwrite(t,n));var i=e.abortTransactions_(t);e.rerunTransactions_(i)})),this.onDisconnect_=new eu,Bu(this.eventQueue_,ts(),r)},e.prototype.onDisconnectCancel=function(e,t){var n=this;this.server_.onDisconnectCancel(e.toString(),(function(r,i){"ok"===r&&n.onDisconnect_.forget(e),n.callOnCompleteCallback(t,r,i)}))},e.prototype.onDisconnectSet=function(e,t,n){var r=this,i=ga(t);this.server_.onDisconnectPut(e.toString(),i.val(!0),(function(t,o){"ok"===t&&r.onDisconnect_.remember(e,i),r.callOnCompleteCallback(n,t,o)}))},e.prototype.onDisconnectSetWithPriority=function(e,t,n,r){var i=this,o=ga(t,n);this.server_.onDisconnectPut(e.toString(),o.val(!0),(function(t,n){"ok"===t&&i.onDisconnect_.remember(e,o),i.callOnCompleteCallback(r,t,n)}))},e.prototype.onDisconnectUpdate=function(e,t,n){var r=this;if(Fi(t))return Fo("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(e.toString(),t,(function(i,o){"ok"===i&&Go(t,(function(t,n){var i=ga(n);r.onDisconnect_.remember(ls(e,t),i)})),r.callOnCompleteCallback(n,i,o)}))},e.prototype.addEventCallbackForQuery=function(e,t){var n;n=".info"===ns(e.path)?this.infoSyncTree_.addEventRegistration(e,t):this.serverSyncTree_.addEventRegistration(e,t),Wu(this.eventQueue_,e.path,n)},e.prototype.removeEventCallbackForQuery=function(e,t){var n;n=".info"===ns(e.path)?this.infoSyncTree_.removeEventRegistration(e,t):this.serverSyncTree_.removeEventRegistration(e,t),Wu(this.eventQueue_,e.path,n)},e.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt("repo_interrupt")},e.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume("repo_interrupt")},e.prototype.stats=function(e){if(void 0===e&&(e=!1),"undefined"!=typeof console){var t;e?(this.statsListener_||(this.statsListener_=new Mu(this.stats_)),t=this.statsListener_.get()):t=this.stats_.get();var n=Object.keys(t).reduce((function(e,t){return Math.max(t.length,e)}),0);Go(t,(function(e,t){for(var r=e,i=e.length;i<n+2;i++)r+=" ";console.log(r+t)}))}},e.prototype.statsIncrementCounter=function(e){this.stats_.incrementCounter(e),this.statsReporter_.includeStat(e)},e.prototype.log_=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),Fo.apply(void 0,hi([n],e))},e.prototype.callOnCompleteCallback=function(e,t,n){e&&Jo((function(){if("ok"===t)e(null);else{var r=(t||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,e(o)}}))},Object.defineProperty(e.prototype,"database",{get:function(){return this.__database||(this.__database=new vl(this))},enumerable:!1,configurable:!0}),e.prototype.startTransaction=function(e,t,n,r){this.log_("transaction on "+e);var i=function(){},o=new hl(this,e);o.on("value",i);var s={path:e,update:t,onComplete:n,status:null,order:Io(),applyLocally:r,retryCount:0,unwatcher:function(){o.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=this.getLatestState_(e);s.currentInputSnapshot=a;var u=s.update(a.val());if(void 0===u){if(s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete){var l=new wa(s.currentInputSnapshot,new hl(this,s.path),ia);s.onComplete(null,!1,l)}}else{ks("transaction failed: Data returned ",u,s.path),s.status=el.RUN;var c=this.transactionQueueTree_.subTree(e),h=c.getValue()||[];h.push(s),c.setValue(h);var p=void 0;if("object"==typeof u&&null!==u&&Ai(u,".priority"))p=Di(u,".priority"),_i(Ps(p),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.");else p=(this.serverSyncTree_.calcCompleteEventCache(e)||va.EMPTY_NODE).getPriority().val();var f=this.generateServerValues(),d=ga(u,p),_=Ya(d,a,f);s.currentOutputSnapshotRaw=d,s.currentOutputSnapshotResolved=_,s.currentWriteId=this.getNextWriteId_();var v=this.serverSyncTree_.applyUserOverwrite(e,_,s.currentWriteId,s.applyLocally);Bu(this.eventQueue_,e,v),this.sendReadyTransactions_()}},e.prototype.getLatestState_=function(e,t){return this.serverSyncTree_.calcCompleteEventCache(e,t)||va.EMPTY_NODE},e.prototype.sendReadyTransactions_=function(e){var t=this;if(void 0===e&&(e=this.transactionQueueTree_),e||this.pruneCompletedTransactionsBelowNode_(e),null!==e.getValue()){var n=this.buildTransactionQueue_(e);_i(n.length>0,"Sending zero length transaction queue"),n.every((function(e){return e.status===el.RUN}))&&this.sendTransactionQueue_(e.path(),n)}else e.hasChildren()&&e.forEachChild((function(e){t.sendReadyTransactions_(e)}))},e.prototype.sendTransactionQueue_=function(e,t){for(var n=this,r=t.map((function(e){return e.currentWriteId})),i=this.getLatestState_(e,r),o=i,s=i.hash(),a=0;a<t.length;a++){var u=t[a];_i(u.status===el.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=el.SENT,u.retryCount++;var l=hs(e,u.path);o=o.updateChild(l,u.currentOutputSnapshotRaw)}var c=o.val(!0),h=e;this.server_.put(h.toString(),c,(function(r){n.log_("transaction put response",{path:h.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=0;s<t.length;s++){if(t[s].status=el.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(t[s].currentWriteId)),t[s].onComplete){var a=t[s].currentOutputSnapshotResolved,u=new hl(n,t[s].path),l=new wa(a,u,ia);o.push(t[s].onComplete.bind(null,null,!0,l))}t[s].unwatcher()}n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(e)),n.sendReadyTransactions_(),Bu(n.eventQueue_,e,i);for(s=0;s<o.length;s++)Jo(o[s])}else{if("datastale"===r)for(s=0;s<t.length;s++)t[s].status===el.SENT_NEEDS_ABORT?t[s].status=el.NEEDS_ABORT:t[s].status=el.RUN;else{jo("transaction at "+h.toString()+" failed: "+r);for(s=0;s<t.length;s++)t[s].status=el.NEEDS_ABORT,t[s].abortReason=r}n.rerunTransactions_(e)}}),s)},e.prototype.rerunTransactions_=function(e){var t=this.getAncestorTransactionNode_(e),n=t.path(),r=this.buildTransactionQueue_(t);return this.rerunTransactionQueue_(r,n),n},e.prototype.rerunTransactionQueue_=function(e,t){if(0!==e.length){for(var n,r=[],i=[],o=e.filter((function(e){return e.status===el.RUN})).map((function(e){return e.currentWriteId})),s=0;s<e.length;s++){var a=e[s],u=hs(t,a.path),l=!1,c=void 0;if(_i(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===el.NEEDS_ABORT)l=!0,c=a.abortReason,i=i.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else if(a.status===el.RUN)if(a.retryCount>=25)l=!0,c="maxretry",i=i.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else{var h=this.getLatestState_(a.path,o);a.currentInputSnapshot=h;var p=e[s].update(h.val());if(void 0!==p){ks("transaction failed: Data returned ",p,a.path);var f=ga(p);"object"==typeof p&&null!=p&&Ai(p,".priority")||(f=f.updatePriority(h.getPriority()));var d=a.currentWriteId,_=this.generateServerValues(),v=Ya(f,h,_);a.currentOutputSnapshotRaw=f,a.currentOutputSnapshotResolved=v,a.currentWriteId=this.getNextWriteId_(),o.splice(o.indexOf(d),1),i=(i=i.concat(this.serverSyncTree_.applyUserOverwrite(a.path,v,a.currentWriteId,a.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(d,!0))}else l=!0,c="nodata",i=i.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0))}if(Bu(this.eventQueue_,t,i),i=[],l&&(e[s].status=el.COMPLETED,n=e[s].unwatcher,setTimeout(n,Math.floor(0)),e[s].onComplete))if("nodata"===c){var y=new hl(this,e[s].path),g=e[s].currentInputSnapshot,m=new wa(g,y,ia);r.push(e[s].onComplete.bind(null,null,!1,m))}else r.push(e[s].onComplete.bind(null,new Error(c),!1,null))}this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_);for(s=0;s<r.length;s++)Jo(r[s]);this.sendReadyTransactions_()}},e.prototype.getAncestorTransactionNode_=function(e){var t,n=this.transactionQueueTree_;for(t=ns(e);null!==t&&null===n.getValue();)n=n.subTree(t),t=ns(e=is(e));return n},e.prototype.buildTransactionQueue_=function(e){var t=[];return this.aggregateTransactionQueuesForNode_(e,t),t.sort((function(e,t){return e.order-t.order})),t},e.prototype.aggregateTransactionQueuesForNode_=function(e,t){var n=this,r=e.getValue();if(null!==r)for(var i=0;i<r.length;i++)t.push(r[i]);e.forEachChild((function(e){n.aggregateTransactionQueuesForNode_(e,t)}))},e.prototype.pruneCompletedTransactionsBelowNode_=function(e){var t=this,n=e.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==el.COMPLETED&&(n[r]=n[i],r++);n.length=r,e.setValue(n.length>0?n:null)}e.forEachChild((function(e){t.pruneCompletedTransactionsBelowNode_(e)}))},e.prototype.abortTransactions_=function(e){var t=this,n=this.getAncestorTransactionNode_(e).path(),r=this.transactionQueueTree_.subTree(e);return r.forEachAncestor((function(e){t.abortTransactionsOnNode_(e)})),this.abortTransactionsOnNode_(r),r.forEachDescendant((function(e){t.abortTransactionsOnNode_(e)})),n},e.prototype.abortTransactionsOnNode_=function(e){var t=e.getValue();if(null!==t){for(var n=[],r=[],i=-1,o=0;o<t.length;o++)if(t[o].status===el.SENT_NEEDS_ABORT);else if(t[o].status===el.SENT)_i(i===o-1,"All SENT items should be at beginning of queue."),i=o,t[o].status=el.SENT_NEEDS_ABORT,t[o].abortReason="set";else if(_i(t[o].status===el.RUN,"Unexpected transaction status in abort"),t[o].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(t[o].currentWriteId,!0)),t[o].onComplete){n.push(t[o].onComplete.bind(null,new Error("set"),!1,null))}-1===i?e.setValue(null):t.length=i+1,Bu(this.eventQueue_,e.path(),r);for(o=0;o<n.length;o++)Jo(n[o])}},e}(),hl=function(e){function t(t,n){if(!(t instanceof cl))throw new Error("new Reference() no longer supported - use app.database().");return e.call(this,t,n,new Da,!1)||this}return oi(t,e),t.prototype.getKey=function(){return Wi("Reference.key",0,0,arguments.length),cs(this.path)?null:os(this.path)},t.prototype.child=function(e){return Wi("Reference.child",1,1,arguments.length),"number"==typeof e?e=String(e):e instanceof es||(null===ns(this.path)?Ls("Reference.child",1,e,!1):Fs("Reference.child",1,e,!1)),new t(this.repo,ls(this.path,e))},t.prototype.getParent=function(){Wi("Reference.parent",0,0,arguments.length);var e=us(this.path);return null===e?null:new t(this.repo,e)},t.prototype.getRoot=function(){Wi("Reference.root",0,0,arguments.length);for(var e=this;null!==e.getParent();)e=e.getParent();return e},t.prototype.databaseProp=function(){return this.repo.database},t.prototype.set=function(e,t){Wi("Reference.set",1,2,arguments.length),Ms("Reference.set",this.path),Is("Reference.set",1,e,this.path,!1),Qi("Reference.set",2,t,!0);var n=new Ci;return this.repo.setWithPriority(this.path,e,null,n.wrapCallback(t)),n.promise},t.prototype.update=function(e,t){if(Wi("Reference.update",1,2,arguments.length),Ms("Reference.update",this.path),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,jo("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Os("Reference.update",1,e,this.path,!1),Qi("Reference.update",2,t,!0);var i=new Ci;return this.repo.update(this.path,e,i.wrapCallback(t)),i.promise},t.prototype.setWithPriority=function(e,t,n){if(Wi("Reference.setWithPriority",2,3,arguments.length),Ms("Reference.setWithPriority",this.path),Is("Reference.setWithPriority",1,e,this.path,!1),Ns("Reference.setWithPriority",2,t,!1),Qi("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new Ci;return this.repo.setWithPriority(this.path,e,t,r.wrapCallback(n)),r.promise},t.prototype.remove=function(e){return Wi("Reference.remove",0,1,arguments.length),Ms("Reference.remove",this.path),Qi("Reference.remove",1,e,!0),this.set(null,e)},t.prototype.transaction=function(e,t,n){if(Wi("Reference.transaction",1,3,arguments.length),Ms("Reference.transaction",this.path),Qi("Reference.transaction",1,e,!1),Qi("Reference.transaction",2,t,!0),js("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new Ci;"function"==typeof t&&r.promise.catch((function(){}));var i=function(e,n,i){e?r.reject(e):r.resolve(new Ws(n,i)),"function"==typeof t&&t(e,n,i)};return this.repo.startTransaction(this.path,e,i,n),r.promise},t.prototype.setPriority=function(e,t){Wi("Reference.setPriority",1,2,arguments.length),Ms("Reference.setPriority",this.path),Ns("Reference.setPriority",1,e,!1),Qi("Reference.setPriority",2,t,!0);var n=new Ci;return this.repo.setWithPriority(ls(this.path,".priority"),e,null,n.wrapCallback(t)),n.promise},t.prototype.push=function(e,t){Wi("Reference.push",0,2,arguments.length),Ms("Reference.push",this.path),Is("Reference.push",1,e,this.path,!0),Qi("Reference.push",2,t,!0);var n,r=this.repo.serverTime(),i=Qs(r),o=this.child(i),s=this.child(i);return n=null!=e?o.set(e,t).then((function(){return s})):Promise.resolve(s),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),"function"==typeof t&&n.catch((function(){})),o},t.prototype.onDisconnect=function(){return Ms("Reference.onDisconnect",this.path),new qs(this.repo,this.path)},Object.defineProperty(t.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),t}(Qa);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qa.__referenceConstructor=hl,mu.__referenceConstructor=hl;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var pl,fl=function(){function e(e,t){var n=this;this.app_=e,this.authProvider_=t,this.auth_=null,this.auth_=t.getImmediate({optional:!0}),this.auth_||t.get().then((function(e){return n.auth_=e}))}return e.prototype.getToken=function(e){return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(Fo("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):Promise.resolve(null)},e.prototype.addTokenChangeListener=function(e){this.auth_?this.auth_.addAuthTokenListener(e):(setTimeout((function(){return e(null)}),0),this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)})))},e.prototype.removeTokenChangeListener=function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))},e.prototype.notifyForInvalidToken=function(){var e='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',jo(e)},e}(),dl=function(){function e(){}return e.prototype.getToken=function(t){return Promise.resolve({accessToken:e.EMULATOR_AUTH_TOKEN})},e.prototype.addTokenChangeListener=function(t){t(e.EMULATOR_AUTH_TOKEN)},e.prototype.removeTokenChangeListener=function(e){},e.prototype.notifyForInvalidToken=function(){},e.EMULATOR_AUTH_TOKEN="owner",e}(),_l=function(){function e(){this.repos_={},this.useRestClient_=!1}return e.getInstance=function(){return pl||(pl=new e),pl},e.prototype.interrupt=function(){var e,t,n,r;try{for(var i=li(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,li(Object.keys(this.repos_[s]))),u=a.next();!u.done;u=a.next()){var l=u.value;this.repos_[s][l].interrupt()}}catch(c){n={error:c}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(h){e={error:h}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}},e.prototype.resume=function(){var e,t,n,r;try{for(var i=li(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,li(Object.keys(this.repos_[s]))),u=a.next();!u.done;u=a.next()){var l=u.value;this.repos_[s][l].resume()}}catch(c){n={error:c}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(h){e={error:h}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}},e.prototype.applyEmulatorSettings=function(e,t,n){e.repoInfo_=new ys(t+":"+n,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams),e.repoInfo_.nodeAdmin&&(e.authTokenProvider_=new dl)},e.prototype.databaseFromApp=function(e,t,n,r){var i=n||e.options.databaseURL;void 0===i&&(e.options.projectId||Uo("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Fo("Using default host for project ",e.options.projectId),i=e.options.projectId+"-default-rtdb.firebaseio.com");var o,s=Cs(i,r),a=s.repoInfo,u=void 0;"undefined"!=typeof process&&(u=process.env.FIREBASE_DATABASE_EMULATOR_HOST),u?(o=!0,i="http://"+u+"?ns="+a.namespace,a=(s=Cs(i,r)).repoInfo):o=!s.repoInfo.secure;var l=r&&o?new dl:new fl(e,t);return Us("Invalid Firebase Database URL",1,s),cs(s.path)||Uo("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(a,e,l).database},e.prototype.deleteRepo=function(e){var t=Di(this.repos_,e.app.name);t&&Di(t,e.key)===e||Uo("Database "+e.app.name+"("+e.repoInfo_+") has already been deleted."),e.interrupt(),delete t[e.key]},e.prototype.createRepo=function(e,t,n){var r=Di(this.repos_,t.name);r||(r={},this.repos_[t.name]=r);var i=Di(r,e.toURLString());return i&&Uo("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new cl(e,this.useRestClient_,t,n),r[e.toURLString()]=i,i},e.prototype.forceRestClient=function(e){this.useRestClient_=e},e}(),vl=function(){function e(e){var t=this;this.repoInternal_=e,this.instanceStarted_=!1,this.INTERNAL={delete:function(){return ai(t,void 0,void 0,(function(){return ui(this,(function(e){return this.checkDeleted_("delete"),_l.getInstance().deleteRepo(this.repo_),this.repoInternal_=null,this.rootInternal_=null,[2]}))}))}},e instanceof cl||Uo("Don't call new Database() directly - please use firebase.database().")}return Object.defineProperty(e.prototype,"repo_",{get:function(){return this.instanceStarted_||(this.repoInternal_.start(),this.instanceStarted_=!0),this.repoInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root_",{get:function(){return this.rootInternal_||(this.rootInternal_=new hl(this.repo_,ts())),this.rootInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),e.prototype.useEmulator=function(e,t){this.checkDeleted_("useEmulator"),this.instanceStarted_?Uo("Cannot call useEmulator() after instance has already been initialized."):_l.getInstance().applyEmulatorSettings(this.repoInternal_,e,t)},e.prototype.ref=function(e){return this.checkDeleted_("ref"),Wi("database.ref",0,1,arguments.length),e instanceof hl?this.refFromURL(e.toString()):void 0!==e?this.root_.child(e):this.root_},e.prototype.refFromURL=function(e){var t="database.refFromURL";this.checkDeleted_(t),Wi(t,1,1,arguments.length);var n=Cs(e,this.repo_.repoInfo_.nodeAdmin);Us(t,1,n);var r=n.repoInfo;return this.repo_.repoInfo_.isCustomHost()||r.host===this.repo_.repoInfo_.host||Uo(t+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},e.prototype.checkDeleted_=function(e){null===this.repoInternal_&&Uo("Cannot call "+e+" on a deleted database.")},e.prototype.goOffline=function(){Wi("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},e.prototype.goOnline=function(){Wi("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},e.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(e){return{".sv":{increment:e}}}},e}();var yl=Object.freeze({__proto__:null,forceLongPolling:function(){nl.forceDisallow(),$u.forceAllow()},forceWebSockets:function(){$u.forceDisallow()},isWebSocketsAvailable:function(){return nl.isAvailable()},setSecurityDebugCallback:function(e,t){e.repo.persistentConnection_.securityDebugCallback_=t},stats:function(e,t){e.repo.stats(t)},statsIncrementCounter:function(e,t){e.repo.statsIncrementCounter(t)},dataUpdateCount:function(e){return e.repo.dataUpdateCount},interceptServerData:function(e,t){return e.repo.interceptServerData_(t)},initStandalone:function(e){var t=e.app,n=e.url,r=e.version,i=e.customAuthImpl,o=e.namespace,s=e.nodeAdmin,a=void 0!==s&&s;Ju(r);var u=new Ki("auth-internal",new $i("database-standalone"));return u.setComponent(new zi("auth-internal",(function(){return i}),"PRIVATE")),{instance:_l.getInstance().databaseFromApp(t,u,n,a),namespace:o}}}),gl=sl;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sl.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},sl.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};var ml,bl=il,wl=ys,Cl=Object.freeze({__proto__:null,DataConnection:gl,RealTimeConnection:bl,hijackHash:function(e){var t=sl.prototype.put;return sl.prototype.put=function(n,r,i,o){void 0!==o&&(o=e()),t.call(this,n,r,i,o)},function(){sl.prototype.put=t}},ConnectionTarget:wl,queryIdentifier:function(e){return e.queryIdentifier()},forceRestClient:function(e){_l.getInstance().forceRestClient(e)}}),El=vl.ServerValue;Ju((ml=wo).SDK_VERSION),ml.INTERNAL.registerComponent(new zi("database",(function(e,t){var n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal");return _l.getInstance().databaseFromApp(n,r,t)}),"PUBLIC").setServiceProps({Reference:hl,Query:Qa,Database:vl,DataSnapshot:wa,enableLogging:Do,INTERNAL:yl,ServerValue:El,TEST_ACCESS:Cl}).setMultipleInstances(!0)),ml.registerVersion("@firebase/database","0.9.4");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Sl=function(e){function t(n,r){var i=e.call(this,Tl(n),"Firebase Storage: "+r+" ("+Tl(n)+")")||this;return i.customData={serverResponse:null},Object.setPrototypeOf(i,t.prototype),i}return oi(t,e),t.prototype._codeEquals=function(e){return Tl(e)===this.code},Object.defineProperty(t.prototype,"message",{get:function(){return this.customData.serverResponse?this.message+"\n"+this.customData.serverResponse:this.message},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e},enumerable:!1,configurable:!0}),t}(Ri);function Tl(e){return"storage/"+e}function Rl(){return new Sl("unknown","An unknown error occurred, please check the error payload for server response.")}function xl(){return new Sl("canceled","User canceled the upload/download.")}function Pl(){return new Sl("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Il(e){return new Sl("invalid-argument",e)}function kl(){return new Sl("app-deleted","The Firebase app was deleted.")}function Ol(e){return new Sl("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Nl(e,t){return new Sl("invalid-format","String does not match format '"+e+"': "+t)}function Al(e){throw new Sl("internal-error","Internal error: "+e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dl={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Fl=function(e,t){this.data=e,this.contentType=t||null};function Ll(e,t){switch(e){case Dl.RAW:return new Fl(Ml(t));case Dl.BASE64:case Dl.BASE64URL:return new Fl(Ul(e,t));case Dl.DATA_URL:return new Fl((n=new jl(t)).base64?Ul(Dl.BASE64,n.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw Nl(Dl.DATA_URL,"Malformed data URL.")}return Ml(t)}(n.rest),function(e){return new jl(e).contentType}(t))}var n;throw Rl()}function Ml(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<e.length-1&&56320==(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320==(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function Ul(e,t){switch(e){case Dl.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw Nl(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case Dl.BASE64URL:var i=-1!==t.indexOf("+"),o=-1!==t.indexOf("/");if(i||o)throw Nl(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(t)}catch(l){throw Nl(e,"Invalid character found")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}var jl=function(e){this.base64=!1,this.contentType=null;var t=e.match(/^data:([^,]+)?,/);if(null===t)throw Nl(Dl.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=t[1]||null;null!=n&&(this.base64=(r=n,i=";base64",r.length>=i.length&&r.substring(r.length-i.length)===i),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=e.substring(e.indexOf(",")+1);var r,i;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */};var ql,Wl,Bl={STATE_CHANGED:"state_changed"},Ql={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Vl(e){switch(e){case"running":case"pausing":case"canceling":return Ql.RUNNING;case"paused":return Ql.PAUSED;case"success":return Ql.SUCCESS;case"canceled":return Ql.CANCELED;case"error":default:return Ql.ERROR}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(Wl=ql||(ql={}))[Wl.NO_ERROR=0]="NO_ERROR",Wl[Wl.NETWORK_ERROR=1]="NETWORK_ERROR",Wl[Wl.ABORT=2]="ABORT";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Hl=function(){function e(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=ql.NO_ERROR,this.sendPromise_=new Promise((function(t){e.xhr_.addEventListener("abort",(function(){e.errorCode_=ql.ABORT,t(e)})),e.xhr_.addEventListener("error",(function(){e.errorCode_=ql.NETWORK_ERROR,t(e)})),e.xhr_.addEventListener("load",(function(){t(e)}))}))}return e.prototype.send=function(e,t,n,r){if(this.sent_)throw Al("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},e.prototype.getErrorCode=function(){if(!this.sent_)throw Al("cannot .getErrorCode() before sending");return this.errorCode_},e.prototype.getStatus=function(){if(!this.sent_)throw Al("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}},e.prototype.getResponseText=function(){if(!this.sent_)throw Al("cannot .getResponseText() before sending");return this.xhr_.responseText},e.prototype.abort=function(){this.xhr_.abort()},e.prototype.getResponseHeader=function(e){return this.xhr_.getResponseHeader(e)},e.prototype.addUploadProgressListener=function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)},e.prototype.removeUploadProgressListener=function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)},e}(),zl=function(){function e(){}return e.prototype.createXhrIo=function(){return new Hl},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kl(e){return"string"==typeof e||e instanceof String}function Gl(e){return $l()&&e instanceof Blob}function $l(){return"undefined"!=typeof Blob}function Yl(e,t,n,r){if(r<t)throw Il("Invalid value for '"+e+"'. Expected "+t+" or greater.");if(r>n)throw Il("Invalid value for '"+e+"'. Expected "+n+" or less.")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xl(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Jl(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Xl();if(void 0!==n){for(var r=new n,i=0;i<e.length;i++)r.append(e[i]);return r.getBlob()}if($l())return new Blob(e);throw new Sl("unsupported-environment","This browser doesn't seem to support creating Blobs")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Zl=function(){function e(e,t){var n=0,r="";Gl(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}return e.prototype.size=function(){return this.size_},e.prototype.type=function(){return this.type_},e.prototype.slice=function(t,n){if(Gl(this.data_)){var r=this.data_,i=(s=t,a=n,(o=r).webkitSlice?o.webkitSlice(s,a):o.mozSlice?o.mozSlice(s,a):o.slice?o.slice(s,a):null);return null===i?null:new e(i)}var o,s,a;return new e(new Uint8Array(this.data_.buffer,t,n-t),!0)},e.getBlob=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if($l()){var r=t.map((function(t){return t instanceof e?t.data_:t}));return new e(Jl.apply(null,r))}var i=t.map((function(e){return Kl(e)?Ll(Dl.RAW,e).data:e.data_})),o=0;i.forEach((function(e){o+=e.byteLength}));var s=new Uint8Array(o),a=0;return i.forEach((function(e){for(var t=0;t<e.length;t++)s[a++]=e[t]})),new e(s,!0)},e.prototype.uploadData=function(){return this.data_},e}(),ec=function(){function e(e,t){this.bucket=e,this.path_=t}return Object.defineProperty(e.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),e.prototype.fullServerUrl=function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)},e.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},e.makeFromBucketSpec=function(t){var n;try{n=e.makeFromUrl(t)}catch(r){return new e(t,"")}if(""===n.path)return n;throw new Sl("invalid-default-bucket","Invalid default bucket '"+t+"'.")},e.makeFromUrl=function(t){var n=null,r="([A-Za-z0-9.\\-_]+)";var i=new RegExp("^gs://"+r+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var s="firebasestorage.googleapis.com".replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+s+"/v[A-Za-z0-9_]+/b/"+r+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/"+r+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:o}],u=0;u<a.length;u++){var l=a[u],c=l.regex.exec(t);if(c){var h=c[l.indices.bucket],p=c[l.indices.path];p||(p=""),n=new e(h,p),l.postModify(n);break}}if(null==n)throw function(e){return new Sl("invalid-url","Invalid URL '"+e+"'.")}(t);return n},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function tc(e){var t,n;try{t=JSON.parse(e)}catch(r){return null}return"object"!=typeof(n=t)||Array.isArray(n)?null:t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nc(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rc(e){return"https://firebasestorage.googleapis.com/v0"+e}function ic(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oc(e,t){return t}var sc=function(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||oc},ac=null;function uc(){if(ac)return ac;var e=[];e.push(new sc("bucket")),e.push(new sc("generation")),e.push(new sc("metageneration")),e.push(new sc("name","fullPath",!0));var t=new sc("name");t.xform=function(e,t){return function(e){return!Kl(e)||e.length<2?e:nc(e)}(t)},e.push(t);var n=new sc("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new sc("timeCreated")),e.push(new sc("updated")),e.push(new sc("md5Hash",null,!0)),e.push(new sc("cacheControl",null,!0)),e.push(new sc("contentDisposition",null,!0)),e.push(new sc("contentEncoding",null,!0)),e.push(new sc("contentLanguage",null,!0)),e.push(new sc("contentType",null,!0)),e.push(new sc("metadata","customMetadata",!0)),ac=e}function lc(e,t,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,t[s.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new ec(n,r);return t._makeStorageReference(i)}})}(r,e),r}function cc(e,t,n){var r=tc(t);return null===r?null:lc(e,r,n)}function hc(e,t){for(var n={},r=t.length,i=0;i<r;i++){var o=t[i];o.writable&&(n[o.server]=e[o.local])}return JSON.stringify(n)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pc(e,t,n){var r=tc(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var s=o[i].replace(/\/$/,""),a=e._makeStorageReference(new ec(t,s));r.prefixes.push(a)}if(n.items)for(var u=0,l=n.items;u<l.length;u++){var c=l[u];a=e._makeStorageReference(new ec(t,c.name)),r.items.push(a)}return r}(e,t,r)}var fc=function(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dc(e){if(!e)throw Rl()}function _c(e,t){return function(n,r){var i=cc(e,r,t);return dc(null!==i),i}}function vc(e,t){return function(n,r){var i=cc(e,r,t);return dc(null!==i),function(e,t){var n=tc(t);if(null===n)return null;if(!Kl(n.downloadTokens))return null;var r=n.downloadTokens;if(0===r.length)return null;var i=encodeURIComponent;return r.split(",").map((function(t){var n=e.bucket,r=e.fullPath;return rc("/b/"+i(n)+"/o/"+i(r))+ic({alt:"media",token:t})}))[0]}(i,r)}}function yc(e){return function(t,n){var r,i,o;return 401===t.getStatus()?r=new Sl("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(o=e.bucket,r=new Sl("quota-exceeded","Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new Sl("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function gc(e){var t=yc(e);return function(n,r){var i,o=t(n,r);return 404===n.getStatus()&&(i=e.path,o=new Sl("object-not-found","Object '"+i+"' does not exist.")),o.serverResponse=r.serverResponse,o}}function mc(e,t,n){var r=rc(t.fullServerUrl()),i=e.maxOperationRetryTime,o=new fc(r,"GET",_c(e,n),i);return o.errorHandler=gc(t),o}function bc(e,t,n,r,i){var o={};t.isRoot?o.prefix="":o.prefix=t.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=rc(t.bucketOnlyServerUrl()),a=e.maxOperationRetryTime,u=new fc(s,"GET",function(e,t){return function(n,r){var i=pc(e,t,r);return dc(null!==i),i}}(e,t.bucket),a);return u.urlParams=o,u.errorHandler=yc(t),u}function wc(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}var Cc=function(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null};function Ec(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){dc(!1)}return dc(!!n&&-1!==(t||["active"]).indexOf(n)),n}function Sc(e,t,n,r,i,o,s,a){var u=new Cc(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new Sl("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var l=u.total-u.current,c=l;i>0&&(c=Math.min(c,i));var h=u.current,p=h+c,f={"X-Goog-Upload-Command":c===l?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},d=r.slice(h,p);if(null===d)throw Pl();var _=t.maxUploadRetryTime,v=new fc(n,"POST",(function(e,n){var i,s=Ec(e,["active","final"]),a=u.current+c,l=r.size();return i="final"===s?_c(t,o)(e,n):null,new Cc(a,l,"final"===s,i)}),_);return v.headers=f,v.body=d.uploadData(),v.progressCallback=a||null,v.errorHandler=yc(e),v}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tc=function(e,t,n){if("function"==typeof e||null!=t||null!=n)this.next=e,this.error=t,this.complete=n;else{var r=e;this.next=r.next,this.error=r.error,this.complete=r.complete}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rc(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];Promise.resolve().then((function(){return e.apply(void 0,t)}))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xc=function(){function e(e,t,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=n,this._mappings=uc(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){r._request=void 0,r._chunkMultiplier=1,e._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=e,r._transition("error"))},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals("canceled")?r.completeTransitions_():(r._error=e,r._transition("error"))},this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return e.prototype._makeProgressCallback=function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}},e.prototype._shouldDoResumable=function(e){return e.size()>262144},e.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},e.prototype._resolveToken=function(e){var t=this;this._ref.storage._getAuthToken().then((function(n){switch(t._state){case"running":e(n);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))},e.prototype._createResumable=function(){var e=this;this._resolveToken((function(t){var n=function(e,t,n,r,i){var o=t.bucketOnlyServerUrl(),s=wc(t,r,i),a={name:s.fullPath},u=rc(o),l={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},c=hc(s,n),h=e.maxUploadRetryTime,p=new fc(u,"POST",(function(e){var t;Ec(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){dc(!1)}return dc(Kl(t)),t}),h);return p.urlParams=a,p.headers=l,p.body=c,p.errorHandler=yc(t),p}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),r=e._ref.storage._makeRequest(n,t);e._request=r,r.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))},e.prototype._fetchStatus=function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n){var r=function(e,t,n,r){var i=e.maxUploadRetryTime,o=new fc(n,"POST",(function(e){var t=Ec(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(o){dc(!1)}n||dc(!1);var i=Number(n);return dc(!isNaN(i)),new Cc(i,r.size(),"final"===t)}),i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=yc(t),o}(e._ref.storage,e._ref._location,t,e._blob),i=e._ref.storage._makeRequest(r,n);e._request=i,i.getPromise().then((function(t){t=t,e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))},e.prototype._continueUpload=function(){var e=this,t=262144*this._chunkMultiplier,n=new Cc(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i){var o;try{o=Sc(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(a){return e._error=a,void e._transition("error")}var s=e._ref.storage._makeRequest(o,i);e._request=s,s.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))},e.prototype._increaseMultiplier=function(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},e.prototype._fetchMetadata=function(){var e=this;this._resolveToken((function(t){var n=mc(e._ref.storage,e._ref._location,e._mappings),r=e._ref.storage._makeRequest(n,t);e._request=r,r.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))},e.prototype._oneShotUpload=function(){var e=this;this._resolveToken((function(t){var n=function(e,t,n,r,i){var o=t.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();s["Content-Type"]="multipart/related; boundary="+a;var u=wc(t,r,i),l="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+hc(u,n)+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",c="\r\n--"+a+"--",h=Zl.getBlob(l,r,c);if(null===h)throw Pl();var p={name:u.fullPath},f=rc(o),d=e.maxUploadRetryTime,_=new fc(f,"POST",_c(e,n),d);return _.urlParams=p,_.headers=s,_.body=h.uploadData(),_.errorHandler=yc(t),_}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),r=e._ref.storage._makeRequest(n,t);e._request=r,r.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))},e.prototype._updateProgress=function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()},e.prototype._transition=function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=xl(),this._state=e,this._notifyObservers();break;case"error":case"success":this._state=e,this._notifyObservers()}},e.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(e.prototype,"snapshot",{get:function(){var e=Vl(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),e.prototype.on=function(e,t,n,r){var i=this,o=new Tc(t,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},e.prototype.then=function(e,t){return this._promise.then(e,t)},e.prototype.catch=function(e){return this.then(null,e)},e.prototype._addObserver=function(e){this._observers.push(e),this._notifyObserver(e)},e.prototype._removeObserver=function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)},e.prototype._notifyObservers=function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))},e.prototype._finishPromise=function(){if(void 0!==this._resolve){var e=!0;switch(Vl(this._state)){case Ql.SUCCESS:Rc(this._resolve.bind(null,this.snapshot))();break;case Ql.CANCELED:case Ql.ERROR:Rc(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}},e.prototype._notifyObserver=function(e){switch(Vl(this._state)){case Ql.RUNNING:case Ql.PAUSED:e.next&&Rc(e.next.bind(e,this.snapshot))();break;case Ql.SUCCESS:e.complete&&Rc(e.complete.bind(e))();break;case Ql.CANCELED:case Ql.ERROR:e.error&&Rc(e.error.bind(e,this._error))();break;default:e.error&&Rc(e.error.bind(e,this._error))()}},e.prototype.resume=function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e},e.prototype.pause=function(){var e="running"===this._state;return e&&this._transition("pausing"),e},e.prototype.cancel=function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e},e}(),Pc=function(){function e(e,t){this._service=e,this._location=t instanceof ec?t:ec.makeFromUrl(t)}return e.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},e.prototype._newRef=function(t,n){return new e(t,n)},Object.defineProperty(e.prototype,"root",{get:function(){var e=new ec(this._location.bucket,"");return this._newRef(this._service,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return nc(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new ec(this._location.bucket,t);return new e(this._service,n)},enumerable:!1,configurable:!0}),e.prototype._throwIfRoot=function(e){if(""===this._location.path)throw Ol(e)},e}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ic(e){var t={prefixes:[],items:[]};return kc(e,t).then((function(){return t}))}function kc(e,t,n){return ai(this,void 0,void 0,(function(){var r,i,o;return ui(this,(function(s){switch(s.label){case 0:return[4,Oc(e,{pageToken:n})];case 1:return r=s.sent(),(i=t.prefixes).push.apply(i,r.prefixes),(o=t.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,kc(e,t,r.nextPageToken)];case 2:s.sent(),s.label=3;case 3:return[2]}}))}))}function Oc(e,t){return ai(this,void 0,void 0,(function(){var n,r,i;return ui(this,(function(o){switch(o.label){case 0:return null!=t&&"number"==typeof t.maxResults&&Yl("options.maxResults",1,1e3,t.maxResults),[4,e.storage._getAuthToken()];case 1:return n=o.sent(),r=t||{},i=bc(e.storage,e._location,"/",r.pageToken,r.maxResults),[2,e.storage._makeRequest(i,n).getPromise()]}}))}))}function Nc(e,t){return ai(this,void 0,void 0,(function(){var n,r;return ui(this,(function(i){switch(i.label){case 0:return e._throwIfRoot("updateMetadata"),[4,e.storage._getAuthToken()];case 1:return n=i.sent(),r=function(e,t,n,r){var i=rc(t.fullServerUrl()),o=hc(n,r),s=e.maxOperationRetryTime,a=new fc(i,"PATCH",_c(e,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=gc(t),a}(e.storage,e._location,t,uc()),[2,e.storage._makeRequest(r,n).getPromise()]}}))}))}function Ac(e){return ai(this,void 0,void 0,(function(){var t,n;return ui(this,(function(r){switch(r.label){case 0:return e._throwIfRoot("getDownloadURL"),[4,e.storage._getAuthToken()];case 1:return t=r.sent(),n=function(e,t,n){var r=rc(t.fullServerUrl()),i=e.maxOperationRetryTime,o=new fc(r,"GET",vc(e,n),i);return o.errorHandler=gc(t),o}(e.storage,e._location,uc()),[2,e.storage._makeRequest(n,t).getPromise().then((function(e){if(null===e)throw new Sl("no-download-url","The given file does not have any download URLs.");return e}))]}}))}))}function Dc(e){return ai(this,void 0,void 0,(function(){var t,n;return ui(this,(function(r){switch(r.label){case 0:return e._throwIfRoot("deleteObject"),[4,e.storage._getAuthToken()];case 1:return t=r.sent(),n=function(e,t){var n=rc(t.fullServerUrl()),r=e.maxOperationRetryTime,i=new fc(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=gc(t),i}(e.storage,e._location),[2,e.storage._makeRequest(n,t).getPromise()]}}))}))}function Fc(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new ec(e._location.bucket,n);return new Pc(e.storage,r)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lc=function(){function e(e,t,n){this._delegate=e,this.task=t,this.ref=n}return Object.defineProperty(e.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),e}(),Mc=function(){function e(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(e.prototype,"snapshot",{get:function(){return new Lc(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),e.prototype.then=function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new Lc(t,n,n._ref))}),t)},e.prototype.on=function(e,t,n,r){var i=this,o=void 0;return t&&(o="function"==typeof t?function(e){return t(new Lc(e,i,i._ref))}:{next:t.next?function(e){return t.next(new Lc(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,o,n||void 0,r||void 0)},e}(),Uc=function(){function e(e,t){this._delegate=e,this._service=t}return Object.defineProperty(e.prototype,"prefixes",{get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new jc(t,e._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){var e=this;return this._delegate.items.map((function(t){return new jc(t,e._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),e}(),jc=function(){function e(e,t){this._delegate=e,this.storage=t}return Object.defineProperty(e.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return this._delegate.toString()},e.prototype.child=function(t){return new e(Fc(this._delegate,t),this.storage)},Object.defineProperty(e.prototype,"root",{get:function(){return new e(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)},enumerable:!1,configurable:!0}),e.prototype.put=function(e,t){return this._throwIfRoot("put"),new Mc(function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new xc(e,new Zl(t),n)}(this._delegate,e,t),this)},e.prototype.putString=function(e,t,n){void 0===t&&(t=Dl.RAW),this._throwIfRoot("putString");var r=Ll(t,e),i=si({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new Mc(new xc(this._delegate,new Zl(r.data,!0),i),this)},e.prototype.listAll=function(){var e=this;return Ic(this._delegate).then((function(t){return new Uc(t,e.storage)}))},e.prototype.list=function(e){var t=this;return Oc(this._delegate,e).then((function(e){return new Uc(e,t.storage)}))},e.prototype.getMetadata=function(){return function(e){return ai(this,void 0,void 0,(function(){var t,n;return ui(this,(function(r){switch(r.label){case 0:return e._throwIfRoot("getMetadata"),[4,e.storage._getAuthToken()];case 1:return t=r.sent(),n=mc(e.storage,e._location,uc()),[2,e.storage._makeRequest(n,t).getPromise()]}}))}))}(this._delegate)},e.prototype.updateMetadata=function(e){return Nc(this._delegate,e)},e.prototype.getDownloadURL=function(){return Ac(this._delegate)},e.prototype.delete=function(){return this._throwIfRoot("delete"),Dc(this._delegate)},e.prototype._throwIfRoot=function(e){if(""===this._delegate._location.path)throw Ol(e)},e}(),qc=function(){function e(e){this.promise_=Promise.reject(e)}return e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Wc=function(){function e(e,t,n,r,i,o,s,a,u,l,c){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=l,this.timeout_=u,this.pool_=c,this.promise_=new Promise((function(e,t){h.resolve_=e,h.reject_=t,h.start_()}))}return e.prototype.start_=function(){var e=this;function t(t,n){var r,i=e.resolve_,o=e.reject_,s=n.xhr;if(n.wasSuccessCode)try{var a=e.callback_(s,s.getResponseText());void 0!==a?i(a):i()}catch(u){o(u)}else null!==s?((r=Rl()).serverResponse=s.getResponseText(),e.errorCallback_?o(e.errorCallback_(s,r)):o(r)):n.canceled?o(r=e.appDelete_?kl():xl()):o(r=new Sl("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?t(0,new Bc(!1,null,!0)):this.backoffId_=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e,t,n){var r=1,i=null,o=!1,s=0;function a(){return 2===s}var u=!1;function l(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];u||(u=!0,t.apply(null,e))}function c(t){i=setTimeout((function(){i=null,e(h,a())}),t)}function h(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(!u)if(e)l.call.apply(l,pi([null,e],t));else{var i;a()||o?l.call.apply(l,pi([null,e],t)):(r<64&&(r*=2),1===s?(s=2,i=0):i=1e3*(r+Math.random()),c(i))}}var p=!1;function f(e){p||(p=!0,u||(null!==i?(e||(s=2),clearTimeout(i),c(0)):e||(s=1)))}return c(0),setTimeout((function(){o=!0,f(!0)}),n),f}((function(t,n){if(n)t(!1,new Bc(!1,null,!0));else{var r=e.pool_.createXhrIo();e.pendingXhr_=r,null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(n){null!==e.progressCallback_&&n.removeUploadProgressListener(i),e.pendingXhr_=null;var r=(n=n).getErrorCode()===ql.NO_ERROR,o=n.getStatus();if(r&&!e.isRetryStatusCode_(o)){var s=-1!==e.successCodes_.indexOf(o);t(!0,new Bc(s,n))}else{var a=n.getErrorCode()===ql.ABORT;t(!1,new Bc(!1,null,a))}}))}function i(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)}}),t,this.timeout_)},e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingXhr_&&this.pendingXhr_.abort()},e.prototype.isRetryStatusCode_=function(e){var t=e>=500&&e<600,n=-1!==[408,429].indexOf(e),r=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||r},e}(),Bc=function(e,t,n){this.wasSuccessCode=e,this.xhr=t,this.canceled=!!n};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Qc(e){return/^[A-Za-z]+:\/\//.test(e)}function Vc(e,t){if(e instanceof zc){var n=e;if(null==n._bucket)throw new Sl("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new Pc(n,n._bucket);return null!=t?Vc(r,t):r}if(void 0!==t){if(t.includes(".."))throw Il('`path` param cannot contain ".."');return Fc(e,t)}return e}function Hc(e,t){if(t&&Qc(t)){if(e instanceof zc)return new Pc(e,t);throw Il("To use ref(service, url), the first argument must be a Storage instance.")}return Vc(e,t)}var zc=function(){function e(e,t,n,r,i){var o,s;this.app=e,this._authProvider=t,this._pool=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?ec.makeFromBucketSpec(r):(o=this.app.options,null==(s=null==o?void 0:o.storageBucket)?null:ec.makeFromBucketSpec(s))}return Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(e){Yl("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(e){Yl("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e},enumerable:!1,configurable:!0}),e.prototype._getAuthToken=function(){return ai(this,void 0,void 0,(function(){var e,t;return ui(this,(function(n){switch(n.label){case 0:return(e=this._authProvider.getImmediate({optional:!0}))?[4,e.getToken()]:[3,2];case 1:if(null!==(t=n.sent()))return[2,t.accessToken];n.label=2;case 2:return[2,null]}}))}))},e.prototype._delete=function(){return this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear(),Promise.resolve()},e.prototype._makeStorageReference=function(e){return new Pc(this,e)},e.prototype._makeRequest=function(e,t){var n=this;if(this._deleted)return new qc(kl());var r=function(e,t,n,r,i){var o=ic(e.urlParams),s=e.url+o,a=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(a,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(a,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!=t?t:"AppManager")}(a,i),new Wc(s,e.method,a,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,r)}(e,this._appId,t,this._pool,this._firebaseVersion);return this._requests.add(r),r.getPromise().then((function(){return n._requests.delete(r)}),(function(){return n._requests.delete(r)})),r},e}(),Kc=function(){function e(e,t){var n=this;this.app=e,this._delegate=t,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(e.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),e.prototype.ref=function(e){if(Qc(e))throw Il("ref() expected a child path but got a URL, use refFromURL instead.");return new jc(Hc(this._delegate,e),this)},e.prototype.refFromURL=function(e){if(!Qc(e))throw Il("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ec.makeFromUrl(e)}catch(t){throw Il("refFromUrl() expected a valid full URL but got an invalid one.")}return new jc(Hc(this._delegate,e),this)},e.prototype.setMaxUploadRetryTime=function(e){this._delegate.maxUploadRetryTime=e},e.prototype.setMaxOperationRetryTime=function(e){this._delegate.maxOperationRetryTime=e},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gc(e,t){var n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal");return new Kc(n,new zc(n,r,new zl,t,wo.SDK_VERSION))}!function(e){var t={TaskState:Ql,TaskEvent:Bl,StringFormat:Dl,Storage:zc,Reference:jc};e.INTERNAL.registerComponent(new zi("storage",Gc,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage","0.4.3")}(wo);
/*!
  * vue-router v4.0.4
  * (c) 2021 Eduardo San Martin Morote
  * @license MIT
  */
const $c="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,Yc=e=>$c?Symbol(e):"_vr_"+e,Xc=Yc("rvlm"),Jc=Yc("rvd"),Zc=Yc("r"),eh=Yc("rl"),th=Yc("rvl"),nh="undefined"!=typeof window;const rh=Object.assign;function ih(e,t){const n={};for(const r in t){const i=t[r];n[r]=Array.isArray(i)?i.map(e):e(i)}return n}let oh=()=>{};const sh=/\/$/;function ah(e,t,n="/"){let r,i={},o="",s="";const a=t.indexOf("?"),u=t.indexOf("#",a>-1?a:0);return a>-1&&(r=t.slice(0,a),o=t.slice(a+1,u>-1?u:t.length),i=e(o)),u>-1&&(r=r||t.slice(0,u),s=t.slice(u,t.length)),r=function(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/");let i,o,s=n.length-1;for(i=0;i<r.length;i++)if(o=r[i],1!==s&&"."!==o){if(".."!==o)break;s--}return n.slice(0,s).join("/")+"/"+r.slice(i-(i===r.length?1:0)).join("/")}(null!=r?r:t,n),{fullPath:r+(o&&"?")+o+s,path:r,query:i,hash:s}}function uh(e,t){return!t||e.toLowerCase().indexOf(t.toLowerCase())?e:e.slice(t.length)||"/"}function lh(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function ch(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let n in e)if(!hh(e[n],t[n]))return!1;return!0}function hh(e,t){return Array.isArray(e)?ph(e,t):Array.isArray(t)?ph(t,e):e===t}function ph(e,t){return Array.isArray(t)?e.length===t.length&&e.every(((e,n)=>e===t[n])):1===e.length&&e[0]===t}var fh,dh,_h,vh;function yh(e){if(!e)if(nh){const t=document.querySelector("base");e=(e=t&&t.getAttribute("href")||"/").replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return"/"!==e[0]&&"#"!==e[0]&&(e="/"+e),e.replace(sh,"")}(dh=fh||(fh={})).pop="pop",dh.push="push",(vh=_h||(_h={})).back="back",vh.forward="forward",vh.unknown="";const gh=/^[^#]+#/;function mh(e,t){return e.replace(gh,"#")+t}const bh=()=>({left:window.pageXOffset,top:window.pageYOffset});function wh(e){let t;if("el"in e){let n=e.el;const r="string"==typeof n&&n.startsWith("#"),i="string"==typeof n?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;t=function(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(null!=t.left?t.left:window.pageXOffset,null!=t.top?t.top:window.pageYOffset)}function Ch(e,t){return(history.state?history.state.position-t:-1)+e}const Eh=new Map;function Sh(e,t){const{pathname:n,search:r,hash:i}=t;if(e.indexOf("#")>-1){let e=i.slice(1);return"/"!==e[0]&&(e="/"+e),uh(e,"")}return uh(n,e)+r+i}function Th(e,t,n,r=!1,i=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:i?bh():null}}function Rh(e){const{history:t,location:n}=window;let r={value:Sh(e,n)},i={value:t.state};function o(r,o,s){const a=e.indexOf("#"),u=a>-1?(n.host&&document.querySelector("base")?e:e.slice(a))+r:location.protocol+"//"+location.host+e+r;try{t[s?"replaceState":"pushState"](o,"",u),i.value=o}catch(l){console.error(l),n[s?"replace":"assign"](u)}}return i.value||o(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0),{location:r,state:i,push:function(e,n){const s=rh({},i.value,t.state,{forward:e,scroll:bh()});o(s.current,s,!0),o(e,rh({},Th(r.value,e,null),{position:s.position+1},n),!1),r.value=e},replace:function(e,n){o(e,rh({},t.state,Th(i.value.back,e,i.value.forward,!0),n,{position:i.value.position}),!0),r.value=e}}}function xh(e){const t=Rh(e=yh(e)),n=function(e,t,n,r){let i=[],o=[],s=null;const a=({state:o})=>{const a=Sh(e,location),u=n.value,l=t.value;let c=0;if(o){if(n.value=a,t.value=o,s&&s===u)return void(s=null);c=l?o.position-l.position:0}else r(a);i.forEach((e=>{e(n.value,u,{delta:c,type:fh.pop,direction:c?c>0?_h.forward:_h.back:_h.unknown})}))};function u(){const{history:e}=window;e.state&&e.replaceState(rh({},e.state,{scroll:bh()}),"")}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u),{pauseListeners:function(){s=n.value},listen:function(e){i.push(e);const t=()=>{const t=i.indexOf(e);t>-1&&i.splice(t,1)};return o.push(t),t},destroy:function(){for(const e of o)e();o=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}}}(e,t.state,t.location,t.replace);const r=rh({location:"",base:e,go:function(e,t=!0){t||n.pauseListeners(),history.go(e)},createHref:mh.bind(null,e)},t,n);return Object.defineProperty(r,"location",{get:()=>t.location.value}),Object.defineProperty(r,"state",{get:()=>t.state.value}),r}function Ph(e){return"string"==typeof e||"symbol"==typeof e}const Ih={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},kh=Yc("nf");var Oh,Nh;function Ah(e,t){return rh(new Error,{type:e,[kh]:!0},t)}function Dh(e,t){return e instanceof Error&&kh in e&&(null==t||!!(e.type&t))}(Nh=Oh||(Oh={}))[Nh.aborted=4]="aborted",Nh[Nh.cancelled=8]="cancelled",Nh[Nh.duplicated=16]="duplicated";const Fh={sensitive:!1,strict:!1,start:!0,end:!0},Lh=/[.+*?^${}()[\]/\\]/g;function Mh(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?1===e.length&&80===e[0]?-1:1:e.length>t.length?1===t.length&&80===t[0]?1:-1:0}function Uh(e,t){let n=0;const r=e.score,i=t.score;for(;n<r.length&&n<i.length;){const e=Mh(r[n],i[n]);if(e)return e;n++}return i.length-r.length}const jh={type:0,value:""},qh=/[a-zA-Z0-9_]/;function Wh(e,t,n){const r=function(e,t){const n=rh({},Fh,t);let r=[],i=n.start?"^":"";const o=[];for(const u of e){const e=u.length?[]:[90];n.strict&&!u.length&&(i+="/");for(let t=0;t<u.length;t++){const r=u[t];let s=40+(n.sensitive?.25:0);if(0===r.type)t||(i+="/"),i+=r.value.replace(Lh,"\\$&"),s+=40;else if(1===r.type){const{value:e,repeatable:n,optional:l,regexp:c}=r;o.push({name:e,repeatable:n,optional:l});const h=c||"[^/]+?";if("[^/]+?"!==h){s+=10;try{new RegExp(`(${h})`)}catch(a){throw new Error(`Invalid custom RegExp for param "${e}" (${h}): `+a.message)}}let p=n?`((?:${h})(?:/(?:${h}))*)`:`(${h})`;t||(p=l&&u.length<2?`(?:/${p})`:"/"+p),l&&(p+="?"),i+=p,s+=20,l&&(s+=-8),n&&(s+=-20),".*"===h&&(s+=-50)}e.push(s)}r.push(e)}if(n.strict&&n.end){const e=r.length-1;r[e][r[e].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const s=new RegExp(i,n.sensitive?"":"i");return{re:s,score:r,keys:o,parse:function(e){const t=e.match(s),n={};if(!t)return null;for(let r=1;r<t.length;r++){const e=t[r]||"",i=o[r-1];n[i.name]=e&&i.repeatable?e.split("/"):e}return n},stringify:function(t){let n="",r=!1;for(const i of e){r&&n.endsWith("/")||(n+="/"),r=!1;for(const e of i)if(0===e.type)n+=e.value;else if(1===e.type){const{value:o,repeatable:s,optional:a}=e,u=o in t?t[o]:"";if(Array.isArray(u)&&!s)throw new Error(`Provided param "${o}" is an array but it is not repeatable (* or + modifiers)`);const l=Array.isArray(u)?u.join("/"):u;if(!l){if(!a)throw new Error(`Missing required param "${o}"`);i.length<2&&(n.endsWith("/")?n=n.slice(0,-1):r=!0)}n+=l}}return n}}}(function(e){if(!e)return[[]];if("/"===e)return[[jh]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(e){throw new Error(`ERR (${n})/"${l}": ${e}`)}let n=0,r=n;const i=[];let o;function s(){o&&i.push(o),o=[]}let a,u=0,l="",c="";function h(){l&&(0===n?o.push({type:0,value:l}):1===n||2===n||3===n?(o.length>1&&("*"===a||"+"===a)&&t(`A repeatable param (${l}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:l,regexp:c,repeatable:"*"===a||"+"===a,optional:"*"===a||"?"===a})):t("Invalid state to consume buffer"),l="")}function p(){l+=a}for(;u<e.length;)if(a=e[u++],"\\"!==a||2===n)switch(n){case 0:"/"===a?(l&&h(),s()):":"===a?(h(),n=1):p();break;case 4:p(),n=r;break;case 1:"("===a?n=2:qh.test(a)?p():(h(),n=0,"*"!==a&&"?"!==a&&"+"!==a&&u--);break;case 2:")"===a?"\\"==c[c.length-1]?c=c.slice(0,-1)+a:n=3:c+=a;break;case 3:h(),n=0,"*"!==a&&"?"!==a&&"+"!==a&&u--,c="";break;default:t("Unknown state")}else r=n,n=4;return 2===n&&t(`Unfinished custom RegExp for param "${l}"`),h(),s(),i}(e.path),n),i=rh(r,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function Bh(e,t){const n=[],r=new Map;function i(e,n,r){let a=!r,u=function(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:Qh(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||{}:{default:e.component}}}(e);u.aliasOf=r&&r.record;const l=zh(t,e),c=[u];if("alias"in e){const t="string"==typeof e.alias?[e.alias]:e.alias;for(const e of t)c.push(rh({},u,{components:r?r.record.components:u.components,path:e,aliasOf:r?r.record:u}))}let h,p;for(const t of c){let{path:c}=t;if(n&&"/"!==c[0]){let e=n.record.path,r="/"===e[e.length-1]?"":"/";t.path=n.record.path+(c&&r+c)}if(h=Wh(t,n,l),r?r.alias.push(h):(p=p||h,p!==h&&p.alias.push(h),a&&e.name&&!Vh(h)&&o(e.name)),"children"in u){let e=u.children;for(let t=0;t<e.length;t++)i(e[t],h,r&&r.children[t])}r=r||h,s(h)}return p?()=>{o(p)}:oh}function o(e){if(Ph(e)){const t=r.get(e);t&&(r.delete(e),n.splice(n.indexOf(t),1),t.children.forEach(o),t.alias.forEach(o))}else{let t=n.indexOf(e);t>-1&&(n.splice(t,1),e.record.name&&r.delete(e.record.name),e.children.forEach(o),e.alias.forEach(o))}}function s(e){let t=0;for(;t<n.length&&Uh(e,n[t])>=0;)t++;n.splice(t,0,e),e.record.name&&!Vh(e)&&r.set(e.record.name,e)}return t=zh({strict:!1,end:!0,sensitive:!1},t),e.forEach((e=>i(e))),{addRoute:i,resolve:function(e,t){let i,o,s,a={};if("name"in e&&e.name){if(i=r.get(e.name),!i)throw Ah(1,{location:e});s=i.record.name,a=rh(function(e,t){let n={};for(let r of t)r in e&&(n[r]=e[r]);return n}(t.params,i.keys.filter((e=>!e.optional)).map((e=>e.name))),e.params),o=i.stringify(a)}else if("path"in e)o=e.path,i=n.find((e=>e.re.test(o))),i&&(a=i.parse(o),s=i.record.name);else{if(i=t.name?r.get(t.name):n.find((e=>e.re.test(t.path))),!i)throw Ah(1,{location:e,currentLocation:t});s=i.record.name,a=rh({},t.params,e.params),o=i.stringify(a)}const u=[];let l=i;for(;l;)u.unshift(l.record),l=l.parent;return{name:s,path:o,params:a,matched:u,meta:Hh(u)}},removeRoute:o,getRoutes:function(){return n},getRecordMatcher:function(e){return r.get(e)}}}function Qh(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(let r in e.components)t[r]="boolean"==typeof n?n:n[r];return t}function Vh(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Hh(e){return e.reduce(((e,t)=>rh(e,t.meta)),{})}function zh(e,t){let n={};for(let r in e)n[r]=r in t?t[r]:e[r];return n}const Kh=/#/g,Gh=/&/g,$h=/\//g,Yh=/=/g,Xh=/\?/g,Jh=/\+/g,Zh=/%5B/g,ep=/%5D/g,tp=/%5E/g,np=/%60/g,rp=/%7B/g,ip=/%7C/g,op=/%7D/g,sp=/%20/g;function ap(e){return encodeURI(""+e).replace(ip,"|").replace(Zh,"[").replace(ep,"]")}function up(e){return ap(e).replace(Jh,"%2B").replace(sp,"+").replace(Kh,"%23").replace(Gh,"%26").replace(np,"`").replace(rp,"{").replace(op,"}").replace(tp,"^")}function lp(e){return function(e){return ap(e).replace(Kh,"%23").replace(Xh,"%3F")}(e).replace($h,"%2F")}function cp(e){try{return decodeURIComponent(""+e)}catch(t){}return""+e}function hp(e){const t={};if(""===e||"?"===e)return t;const n=("?"===e[0]?e.slice(1):e).split("&");for(let r=0;r<n.length;++r){const e=n[r].replace(Jh," ");let i=e.indexOf("="),o=cp(i<0?e:e.slice(0,i)),s=i<0?null:cp(e.slice(i+1));if(o in t){let e=t[o];Array.isArray(e)||(e=t[o]=[e]),e.push(s)}else t[o]=s}return t}function pp(e){let t="";for(let n in e){t.length&&(t+="&");const r=e[n];if(n=up(n).replace(Yh,"%3D"),null==r){void 0!==r&&(t+=n);continue}let i=Array.isArray(r)?r.map((e=>e&&up(e))):[r&&up(r)];for(let e=0;e<i.length;e++)t+=(e?"&":"")+n,null!=i[e]&&(t+="="+i[e])}return t}function fp(e){const t={};for(let n in e){let r=e[n];void 0!==r&&(t[n]=Array.isArray(r)?r.map((e=>null==e?null:""+e)):null==r?r:""+r)}return t}function dp(){let e=[];return{add:function(t){return e.push(t),()=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)}},list:()=>e,reset:function(){e=[]}}}function _p(e,t,n,r,i){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise(((s,a)=>{const u=e=>{var u;!1===e?a(Ah(4,{from:n,to:t})):e instanceof Error?a(e):"string"==typeof(u=e)||u&&"object"==typeof u?a(Ah(2,{from:t,to:e})):(o&&r.enterCallbacks[i]===o&&"function"==typeof e&&o.push(e),s())},l=e.call(r&&r.instances[i],t,n,u);let c=Promise.resolve(l);e.length<3&&(c=c.then(u)),c.catch((e=>a(e)))}))}function vp(e,t,n,r){const i=[];for(const s of e)for(const e in s.components){let a=s.components[e];if("beforeRouteEnter"===t||s.instances[e])if("object"==typeof(o=a)||"displayName"in o||"props"in o||"__vccOpts"in o){const o=(a.__vccOpts||a)[t];o&&i.push(_p(o,n,r,s,e))}else{let o=a();o=o.catch(console.error),i.push((()=>o.then((i=>{if(!i)return Promise.reject(new Error(`Couldn't resolve component "${e}" at "${s.path}"`));const o=(a=i).__esModule||$c&&"Module"===a[Symbol.toStringTag]?i.default:i;var a;s.components[e]=o;const u=(o.__vccOpts||o)[t];return u&&_p(u,n,r,s,e)()}))))}}var o;return i}function yp(e){const t=ur(Zc),n=ur(eh),r=Nr((()=>t.resolve(Ze(e.to)))),i=Nr((()=>{let{matched:e}=r.value,{length:t}=e;const i=e[t-1];let o=n.matched;if(!i||!o.length)return-1;let s=o.findIndex(lh.bind(null,i));if(s>-1)return s;let a=mp(e[t-2]);return t>1&&mp(i)===a&&o[o.length-1].path!==a?o.findIndex(lh.bind(null,e[t-2])):s})),o=Nr((()=>i.value>-1&&function(e,t){for(let n in t){let r=t[n],i=e[n];if("string"==typeof r){if(r!==i)return!1}else if(!Array.isArray(i)||i.length!==r.length||r.some(((e,t)=>e!==i[t])))return!1}return!0}(n.params,r.value.params))),s=Nr((()=>i.value>-1&&i.value===n.matched.length-1&&ch(n.params,r.value.params)));return{route:r,href:Nr((()=>r.value.href)),isActive:o,isExactActive:s,navigate:function(n={}){return function(e){if(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)return;if(e.defaultPrevented)return;if(void 0!==e.button&&0!==e.button)return;if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}e.preventDefault&&e.preventDefault();return!0}(n)?t[Ze(e.replace)?"replace":"push"](Ze(e.to)):Promise.resolve()}}}const gp=In({name:"RouterLink",props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},setup(e,{slots:t,attrs:n}){const r=Be(yp(e)),{options:i}=ur(Zc),o=Nr((()=>({[bp(e.activeClass,i.linkActiveClass,"router-link-active")]:r.isActive,[bp(e.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive})));return()=>{const i=t.default&&t.default(r);return e.custom?i:Ar("a",rh({"aria-current":r.isExactActive?e.ariaCurrentValue:null,onClick:r.navigate,href:r.href},n,{class:o.value}),i)}}});function mp(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const bp=(e,t,n)=>null!=e?e:null!=t?t:n;function wp(e,t){if(!e)return null;const n=e(t);return 1===n.length?n[0]:n}const Cp=In({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},setup(e,{attrs:t,slots:n}){const r=ur(th),i=Nr((()=>e.route||r.value)),o=ur(Jc,0),s=Nr((()=>i.value.matched[o]));ar(Jc,o+1),ar(Xc,s),ar(th,i);const a=Je(u);var u;return fn((()=>[a.value,s.value,e.name]),(([e,t,n],[r,i,o])=>{t&&(t.instances[n]=e,i&&i!==t&&e&&e===r&&(t.leaveGuards=i.leaveGuards,t.updateGuards=i.updateGuards)),!e||!t||i&&lh(t,i)&&r||(t.enterCallbacks[n]||[]).forEach((t=>t(e)))}),{flush:"post"}),()=>{const r=i.value,o=s.value,u=o&&o.components[e.name],l=e.name;if(!u)return wp(n.default,{Component:u,route:r});const c=o.props[e.name],h=c?!0===c?r.params:"function"==typeof c?c(r):c:null,p=Ar(u,rh({},h,t,{onVnodeUnmounted:e=>{e.component.isUnmounted&&(o.instances[l]=null)},ref:a}));return wp(n.default,{Component:p,route:r})||p}}});function Ep(e){const t=Bh(e.routes,e);let n=e.parseQuery||hp,r=e.stringifyQuery||pp,i=e.history;const o=dp(),s=dp(),a=dp(),u=Je(Ih,!0);let l=Ih;nh&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=ih.bind(null,(e=>""+e)),h=ih.bind(null,lp),p=ih.bind(null,cp);function f(e,o){if(o=rh({},o||u.value),"string"==typeof e){let r=ah(n,e,o.path),s=t.resolve({path:r.path},o),a=i.createHref(r.fullPath);return rh(r,s,{params:p(s.params),hash:cp(r.hash),redirectedFrom:void 0,href:a})}let s;"path"in e?s=rh({},e,{path:ah(n,e.path,o.path).path}):(s=rh({},e,{params:h(e.params)}),o.params=h(o.params));let a=t.resolve(s,o);const l=e.hash||"";a.params=c(p(a.params));const f=function(e,t){let n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}(r,rh({},e,{hash:(d=l,ap(d).replace(rp,"{").replace(op,"}").replace(tp,"^")),path:a.path}));var d;let _=i.createHref(f);return rh({fullPath:f,hash:l,query:r===pp?fp(e.query):e.query},a,{redirectedFrom:void 0,href:_})}function d(e){return"string"==typeof e?ah(n,e,u.value.path):rh({},e)}function _(e,t){if(l!==e)return Ah(8,{from:t,to:e})}function v(e){return g(e)}function y(e){const t=e.matched[e.matched.length-1];if(t&&t.redirect){const{redirect:n}=t;let r="function"==typeof n?n(e):n;return"string"==typeof r&&(r=r.indexOf("?")>-1||r.indexOf("#")>-1?r=d(r):{path:r}),rh({query:e.query,hash:e.hash,params:e.params},r)}}function g(e,t){const n=l=f(e),i=u.value,o=e.state,s=e.force,a=!0===e.replace,c=y(n);if(c)return g(rh(d(c),{state:o,force:s,replace:a}),t||n);const h=n;let p;return h.redirectedFrom=t,!s&&function(e,t,n){let r=t.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&lh(t.matched[r],n.matched[i])&&ch(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}(r,i,n)&&(p=Ah(16,{to:h,from:i}),k(i,i,!0,!1)),(p?Promise.resolve(p):b(h,i)).catch((e=>Dh(e)?e:P(e))).then((e=>{if(e){if(Dh(e,2))return g(rh(d(e.to),{state:o,force:s,replace:a}),t||h)}else e=C(h,i,!0,a,o);return w(h,i,e),e}))}function m(e,t){const n=_(e,t);return n?Promise.reject(n):Promise.resolve()}function b(e,t){let n;const[r,i,a]=function(e,t){const n=[],r=[],i=[],o=Math.max(t.matched.length,e.matched.length);for(let s=0;s<o;s++){const o=t.matched[s];o&&(e.matched.indexOf(o)<0?n.push(o):r.push(o));const a=e.matched[s];a&&t.matched.indexOf(a)<0&&i.push(a)}return[n,r,i]}
/*!
 * vuex v4.0.0
 * (c) 2021 Evan You
 * @license MIT
 */(e,t);n=vp(r.reverse(),"beforeRouteLeave",e,t);for(const o of r)o.leaveGuards.forEach((r=>{n.push(_p(r,e,t))}));const u=m.bind(null,e,t);return n.push(u),Sp(n).then((()=>{n=[];for(const r of o.list())n.push(_p(r,e,t));return n.push(u),Sp(n)})).then((()=>{n=vp(i,"beforeRouteUpdate",e,t);for(const r of i)r.updateGuards.forEach((r=>{n.push(_p(r,e,t))}));return n.push(u),Sp(n)})).then((()=>{n=[];for(const r of e.matched)if(r.beforeEnter&&t.matched.indexOf(r)<0)if(Array.isArray(r.beforeEnter))for(const i of r.beforeEnter)n.push(_p(i,e,t));else n.push(_p(r.beforeEnter,e,t));return n.push(u),Sp(n)})).then((()=>(e.matched.forEach((e=>e.enterCallbacks={})),n=vp(a,"beforeRouteEnter",e,t),n.push(u),Sp(n)))).then((()=>{n=[];for(const r of s.list())n.push(_p(r,e,t));return n.push(u),Sp(n)})).catch((e=>Dh(e,8)?e:Promise.reject(e)))}function w(e,t,n){for(const r of a.list())r(e,t,n)}function C(e,t,n,r,o){const s=_(e,t);if(s)return s;const a=t===Ih,l=nh?history.state:{};n&&(r||a?i.replace(e.fullPath,rh({scroll:a&&l&&l.scroll},o)):i.push(e.fullPath,o)),u.value=e,k(e,t,n,a),I()}let E;function S(){E=i.listen(((e,t,n)=>{let r=f(e);const o=y(r);if(o)return void g(rh(o,{replace:!0}),r).catch(oh);l=r;const s=u.value;var a,c;nh&&(a=Ch(s.fullPath,n.delta),c=bh(),Eh.set(a,c)),b(r,s).catch((e=>Dh(e,12)?e:Dh(e,2)?(g(e.to,r).catch(oh),Promise.reject()):(n.delta&&i.go(-n.delta,!1),P(e)))).then((e=>{(e=e||C(r,s,!1))&&n.delta&&i.go(-n.delta,!1),w(r,s,e)})).catch(oh)}))}let T,R=dp(),x=dp();function P(e){return I(e),x.list().forEach((t=>t(e))),Promise.reject(e)}function I(e){T||(T=!0,S(),R.list().forEach((([t,n])=>e?n(e):t())),R.reset())}function k(t,n,r,i){const{scrollBehavior:o}=e;if(!nh||!o)return Promise.resolve();let s=!r&&function(e){const t=Eh.get(e);return Eh.delete(e),t}(Ch(t.fullPath,0))||(i||!r)&&history.state&&history.state.scroll||null;return bt().then((()=>o(t,n,s))).then((e=>e&&wh(e))).catch(P)}const O=e=>i.go(e);let N;const A=new Set;return{currentRoute:u,addRoute:function(e,n){let r,i;return Ph(e)?(r=t.getRecordMatcher(e),i=n):i=e,t.addRoute(i,r)},removeRoute:function(e){let n=t.getRecordMatcher(e);n&&t.removeRoute(n)},hasRoute:function(e){return!!t.getRecordMatcher(e)},getRoutes:function(){return t.getRoutes().map((e=>e.record))},resolve:f,options:e,push:v,replace:function(e){return v(rh(d(e),{replace:!0}))},go:O,back:()=>O(-1),forward:()=>O(1),beforeEach:o.add,beforeResolve:s.add,afterEach:a.add,onError:x.add,isReady:function(){return T&&u.value!==Ih?Promise.resolve():new Promise(((e,t)=>{R.add([e,t])}))},install(e){e.component("RouterLink",gp),e.component("RouterView",Cp),e.config.globalProperties.$router=this,Object.defineProperty(e.config.globalProperties,"$route",{get:()=>Ze(u)}),nh&&!N&&u.value===Ih&&(N=!0,v(i.location).catch((e=>{})));const t={};for(let r in Ih)t[r]=Nr((()=>u.value[r]));e.provide(Zc,this),e.provide(eh,Be(t)),e.provide(th,u);let n=e.unmount;A.add(e),e.unmount=function(){A.delete(e),A.size<1&&(E(),u.value=Ih,N=!1,T=!1),n.call(this,arguments)}}}}function Sp(e){return e.reduce(((e,t)=>e.then((()=>t()))),Promise.resolve())}var Tp=("undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).__VUE_DEVTOOLS_GLOBAL_HOOK__;function Rp(e,t){Object.keys(e).forEach((function(n){return t(e[n],n)}))}var xp=function(e,t){this.runtime=t,this._children=Object.create(null),this._rawModule=e;var n=e.state;this.state=("function"==typeof n?n():n)||{}},Pp={namespaced:{configurable:!0}};Pp.namespaced.get=function(){return!!this._rawModule.namespaced},xp.prototype.addChild=function(e,t){this._children[e]=t},xp.prototype.removeChild=function(e){delete this._children[e]},xp.prototype.getChild=function(e){return this._children[e]},xp.prototype.hasChild=function(e){return e in this._children},xp.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)},xp.prototype.forEachChild=function(e){Rp(this._children,e)},xp.prototype.forEachGetter=function(e){this._rawModule.getters&&Rp(this._rawModule.getters,e)},xp.prototype.forEachAction=function(e){this._rawModule.actions&&Rp(this._rawModule.actions,e)},xp.prototype.forEachMutation=function(e){this._rawModule.mutations&&Rp(this._rawModule.mutations,e)},Object.defineProperties(xp.prototype,Pp);var Ip=function(e){this.register([],e,!1)};function kp(e,t,n){if(t.update(n),n.modules)for(var r in n.modules){if(!t.getChild(r))return;kp(e.concat(r),t.getChild(r),n.modules[r])}}function Op(e){return new Np(e)}Ip.prototype.get=function(e){return e.reduce((function(e,t){return e.getChild(t)}),this.root)},Ip.prototype.getNamespace=function(e){var t=this.root;return e.reduce((function(e,n){return e+((t=t.getChild(n)).namespaced?n+"/":"")}),"")},Ip.prototype.update=function(e){kp([],this.root,e)},Ip.prototype.register=function(e,t,n){var r=this;void 0===n&&(n=!0);var i=new xp(t,n);0===e.length?this.root=i:this.get(e.slice(0,-1)).addChild(e[e.length-1],i);t.modules&&Rp(t.modules,(function(t,i){r.register(e.concat(i),t,n)}))},Ip.prototype.unregister=function(e){var t=this.get(e.slice(0,-1)),n=e[e.length-1],r=t.getChild(n);r&&r.runtime&&t.removeChild(n)},Ip.prototype.isRegistered=function(e){var t=this.get(e.slice(0,-1)),n=e[e.length-1];return!!t&&t.hasChild(n)};var Np=function(e){var t=this;void 0===e&&(e={});var n=e.plugins;void 0===n&&(n=[]);var r=e.strict;void 0===r&&(r=!1),this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new Ip(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null);var i=this,o=this.dispatch,s=this.commit;this.dispatch=function(e,t){return o.call(i,e,t)},this.commit=function(e,t,n){return s.call(i,e,t,n)},this.strict=r;var a=this._modules.root.state;Mp(this,a,[],this._modules.root),Lp(this,a),n.forEach((function(e){return e(t)})),(void 0===e.devtools||e.devtools)&&function(e){Tp&&(e._devtoolHook=Tp,Tp.emit("vuex:init",e),Tp.on("vuex:travel-to-state",(function(t){e.replaceState(t)})),e.subscribe((function(e,t){Tp.emit("vuex:mutation",e,t)}),{prepend:!0}),e.subscribeAction((function(e,t){Tp.emit("vuex:action",e,t)}),{prepend:!0}))}(this)},Ap={state:{configurable:!0}};function Dp(e,t,n){return t.indexOf(e)<0&&(n&&n.prepend?t.unshift(e):t.push(e)),function(){var n=t.indexOf(e);n>-1&&t.splice(n,1)}}function Fp(e,t){e._actions=Object.create(null),e._mutations=Object.create(null),e._wrappedGetters=Object.create(null),e._modulesNamespaceMap=Object.create(null);var n=e.state;Mp(e,n,[],e._modules.root,!0),Lp(e,n,t)}function Lp(e,t,n){var r=e._state;e.getters={},e._makeLocalGettersCache=Object.create(null);var i=e._wrappedGetters,o={};Rp(i,(function(t,n){o[n]=function(e,t){return function(){return e(t)}}(t,e),Object.defineProperty(e.getters,n,{get:function(){return o[n]()},enumerable:!0})})),e._state=Be({data:t}),e.strict&&function(e){fn((function(){return e._state.data}),(function(){}),{deep:!0,flush:"sync"})}(e),r&&n&&e._withCommit((function(){r.data=null}))}function Mp(e,t,n,r,i){var o=!n.length,s=e._modules.getNamespace(n);if(r.namespaced&&(e._modulesNamespaceMap[s],e._modulesNamespaceMap[s]=r),!o&&!i){var a=Up(t,n.slice(0,-1)),u=n[n.length-1];e._withCommit((function(){a[u]=r.state}))}var l=r.context=function(e,t,n){var r=""===t,i={dispatch:r?e.dispatch:function(n,r,i){var o=jp(n,r,i),s=o.payload,a=o.options,u=o.type;return a&&a.root||(u=t+u),e.dispatch(u,s)},commit:r?e.commit:function(n,r,i){var o=jp(n,r,i),s=o.payload,a=o.options,u=o.type;a&&a.root||(u=t+u),e.commit(u,s,a)}};return Object.defineProperties(i,{getters:{get:r?function(){return e.getters}:function(){return function(e,t){if(!e._makeLocalGettersCache[t]){var n={},r=t.length;Object.keys(e.getters).forEach((function(i){if(i.slice(0,r)===t){var o=i.slice(r);Object.defineProperty(n,o,{get:function(){return e.getters[i]},enumerable:!0})}})),e._makeLocalGettersCache[t]=n}return e._makeLocalGettersCache[t]}(e,t)}},state:{get:function(){return Up(e.state,n)}}}),i}(e,s,n);r.forEachMutation((function(t,n){!function(e,t,n,r){(e._mutations[t]||(e._mutations[t]=[])).push((function(t){n.call(e,r.state,t)}))}(e,s+n,t,l)})),r.forEachAction((function(t,n){var r=t.root?n:s+n,i=t.handler||t;!function(e,t,n,r){(e._actions[t]||(e._actions[t]=[])).push((function(t){var i=n.call(e,{dispatch:r.dispatch,commit:r.commit,getters:r.getters,state:r.state,rootGetters:e.getters,rootState:e.state},t);return function(e){return e&&"function"==typeof e.then}(i)||(i=Promise.resolve(i)),e._devtoolHook?i.catch((function(t){throw e._devtoolHook.emit("vuex:error",t),t})):i}))}(e,r,i,l)})),r.forEachGetter((function(t,n){!function(e,t,n,r){if(e._wrappedGetters[t])return;e._wrappedGetters[t]=function(e){return n(r.state,r.getters,e.state,e.getters)}}(e,s+n,t,l)})),r.forEachChild((function(r,o){Mp(e,t,n.concat(o),r,i)}))}function Up(e,t){return t.reduce((function(e,t){return e[t]}),e)}function jp(e,t,n){var r;return null!==(r=e)&&"object"==typeof r&&e.type&&(n=t,t=e,e=e.type),{type:e,payload:t,options:n}}Np.prototype.install=function(e,t){e.provide(t||"store",this),e.config.globalProperties.$store=this},Ap.state.get=function(){return this._state.data},Ap.state.set=function(e){},Np.prototype.commit=function(e,t,n){var r=this,i=jp(e,t,n),o=i.type,s=i.payload,a={type:o,payload:s},u=this._mutations[o];u&&(this._withCommit((function(){u.forEach((function(e){e(s)}))})),this._subscribers.slice().forEach((function(e){return e(a,r.state)})))},Np.prototype.dispatch=function(e,t){var n=this,r=jp(e,t),i=r.type,o=r.payload,s={type:i,payload:o},a=this._actions[i];if(a){try{this._actionSubscribers.slice().filter((function(e){return e.before})).forEach((function(e){return e.before(s,n.state)}))}catch(l){}var u=a.length>1?Promise.all(a.map((function(e){return e(o)}))):a[0](o);return new Promise((function(e,t){u.then((function(t){try{n._actionSubscribers.filter((function(e){return e.after})).forEach((function(e){return e.after(s,n.state)}))}catch(l){}e(t)}),(function(e){try{n._actionSubscribers.filter((function(e){return e.error})).forEach((function(t){return t.error(s,n.state,e)}))}catch(l){}t(e)}))}))}},Np.prototype.subscribe=function(e,t){return Dp(e,this._subscribers,t)},Np.prototype.subscribeAction=function(e,t){return Dp("function"==typeof e?{before:e}:e,this._actionSubscribers,t)},Np.prototype.watch=function(e,t,n){var r=this;return fn((function(){return e(r.state,r.getters)}),t,Object.assign({},n))},Np.prototype.replaceState=function(e){var t=this;this._withCommit((function(){t._state.data=e}))},Np.prototype.registerModule=function(e,t,n){void 0===n&&(n={}),"string"==typeof e&&(e=[e]),this._modules.register(e,t),Mp(this,this.state,e,this._modules.get(e),n.preserveState),Lp(this,this.state)},Np.prototype.unregisterModule=function(e){var t=this;"string"==typeof e&&(e=[e]),this._modules.unregister(e),this._withCommit((function(){delete Up(t.state,e.slice(0,-1))[e[e.length-1]]})),Fp(this)},Np.prototype.hasModule=function(e){return"string"==typeof e&&(e=[e]),this._modules.isRegistered(e)},Np.prototype.hotUpdate=function(e){this._modules.update(e),Fp(this,!0)},Np.prototype._withCommit=function(e){var t=this._committing;this._committing=!0,e(),this._committing=t},Object.defineProperties(Np.prototype,Ap);export{qn as F,er as a,nr as b,Gn as c,In as d,Op as e,wo as f,xh as g,Ep as h,ri as i,Ht as j,zt as k,rr as l,ei as m,zn as o,Vt as p,Mn as r,u as t,Wt as w};
//# sourceMappingURL=vendor.75d0d368.js.map
